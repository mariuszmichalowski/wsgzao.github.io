<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HelloDog</title>
  
  <subtitle>Keep Calm and Carry On</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://wsgzao.github.io/"/>
  <updated>2022-08-10T04:19:02.280Z</updated>
  <id>https://wsgzao.github.io/</id>
  
  <author>
    <name>wsgzao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>3proxy 安装配置实践</title>
    <link href="https://wsgzao.github.io/post/3proxy/"/>
    <id>https://wsgzao.github.io/post/3proxy/</id>
    <published>2022-08-10T06:59:49.000Z</published>
    <updated>2022-08-10T04:19:02.280Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文推荐的是 3proxy 但是也不能不提一下 SSH 端口转发，因为很多使用场景可能只需要借助 SSH 即可实现。SSH 有三种端口转发模式，本地端口转发 (Local Port Forwarding)，远程端口转发(Remote Port Forwarding) 以及动态端口转发(Dynamic Port Forwarding)。对于本地 / 远程端口转发，两者的方向恰好相反。动态端口转发则可以用于科学上网。3roxy 的角色类似于 CCProxy，如果你熟悉 CCProxy 那配置 3proxy 应该也不会存在太大问题。</p><blockquote><p>3proxy tiny free proxy server</p></blockquote><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 08 月 10 日 - 完善内容<br>2018 年 04 月 17 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/3proxy/">https://wsgzao.github.io/post/3proxy/</a></p><p><strong> 扩展阅读 </strong></p><p>3proxy - <a href="https://3proxy.ru/" target="_blank" rel="noopener">https://3proxy.ru/</a></p><hr><h2 id="3proxy-简介"><a href="#3proxy-简介" class="headerlink" title="3proxy 简介"></a>3proxy 简介</h2><p>3proxy 是一款代理软件支持 http/socks，支持 windows 和 linux 平台，安装和配置都很简单<br><a href="http://3proxy.ru/" target="_blank" rel="noopener">http://3proxy.ru/</a></p><p>详细的配置文档可以参考 3proxy documentation How To (English, very incomplete)<br><a href="https://3proxy.ru/doc/howtoe.html" target="_blank" rel="noopener">https://3proxy.ru/doc/howtoe.html</a></p><p>关于 3proxy 的比较好的资料是<br><a href="http://linux.die.net/man/3/3proxy.cfg" target="_blank" rel="noopener">http://linux.die.net/man/3/3proxy.cfg</a><br><a href="https://github.com/z3APA3A/3proxy/wiki" target="_blank" rel="noopener">https://github.com/z3APA3A/3proxy/wiki</a></p><h2 id="3proxy-安装配置"><a href="#3proxy-安装配置" class="headerlink" title="3proxy 安装配置"></a>3proxy 安装配置</h2><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>3proxy 的代码代管在 github 上面，地址是：<br><a href="https://github.com/z3APA3A/3proxy" target="_blank" rel="noopener">https://github.com/z3APA3A/3proxy</a></p><p>最新版的安装包 (包括 rpm,deb) 下载地址:<br><a href="https://3proxy.org/download/stable/" target="_blank" rel="noopener">https://3proxy.org/download/stable/</a></p><p>安装步骤如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过 git 下载最新版 3proxy 源码</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/z3APA3A/3proxy.git</span><br><span class="line"><span class="comment"># 切换到 3proxy 目录</span></span><br><span class="line"><span class="built_in">cd</span> 3proxy</span><br><span class="line"><span class="comment"># 编译 3proxy, 如果你的系统没有 gcc，你需求先安装 gcc</span></span><br><span class="line">make -f Makefile.Linux</span><br><span class="line"><span class="comment"># 安装 3proxy</span></span><br><span class="line">make -f Makefile.Linux install</span><br></pre></td></tr></table></figure><p>编辑生成 3proxy.cfg 配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/3proxy/conf/3proxy.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/local/bin/3proxy</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#nserver 8.8.8.8</span></span><br><span class="line"><span class="comment">#nserver 8.8.4.4</span></span><br><span class="line">nscache 65536</span><br><span class="line">maxconn 1000</span><br><span class="line"><span class="built_in">log</span> /logs/3proxy-%y%m%d.log D</span><br><span class="line">rotate 7</span><br><span class="line">external 0.0.0.0</span><br><span class="line">internal 0.0.0.0</span><br><span class="line">auth none</span><br><span class="line">allow *</span><br><span class="line">proxy -a -p6666</span><br><span class="line">socks -p6667</span><br></pre></td></tr></table></figure><p>执行配置文件，如果有报错比如日志目录不存在和语法错误都会有具体提示</p><pre><code>3proxy 3proxy.cfg </code></pre><p>后台执行</p><pre><code>3proxy 3proxy.cfg &amp;</code></pre><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>Windows 安装 3proxy<br><a href="https://cloud.tencent.com/developer/article/1567809" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1567809</a></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># string into 3proxy.cfg. Now, start command prompt (cmd.exe). Change directory to 3proxy installation and run 3proxy.exe --install:</span></span><br><span class="line">D:\&gt;C:</span><br><span class="line">C:\&gt;cd C:\Program Files\<span class="number">3</span>proxy</span><br><span class="line">C:\Program Files\<span class="number">3</span>proxy&gt;<span class="number">3</span>proxy.exe -<span class="literal">-install</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Now, you should have 3proxy service installed and running. If service is not started, remove "service" string from 3proxy.cfg, run 3proxy.exe manually and correct all errors.</span></span><br><span class="line"><span class="comment"># To remove 3proxy run 3proxy --remove:</span></span><br><span class="line"></span><br><span class="line">D:\&gt;C:</span><br><span class="line">C:\&gt;cd C:\Program Files\<span class="number">3</span>proxy</span><br><span class="line">C:\Program Files\<span class="number">3</span>proxy&gt;net stop <span class="number">3</span>proxy</span><br><span class="line">C:\Program Files\<span class="number">3</span>proxy&gt;<span class="number">3</span>proxy.exe -<span class="literal">-remove</span></span><br></pre></td></tr></table></figure><h2 id="3proxy-配置文件解释"><a href="#3proxy-配置文件解释" class="headerlink" title="3proxy 配置文件解释"></a>3proxy 配置文件解释</h2><p>How To (English, very incomplete)<br><a href="https://3proxy.org/doc/howtoe.html" target="_blank" rel="noopener">https://3proxy.org/doc/howtoe.html</a><br><a href="https://github.com/3proxy/3proxy/wiki/How-To-(incomplete)" target="_blank" rel="noopener">https://github.com/3proxy/3proxy/wiki/How-To-(incomplete)</a></p><p>Recommendations for high load<br><a href="https://3proxy.org/doc/highload.html" target="_blank" rel="noopener">https://3proxy.org/doc/highload.html</a><br><a href="https://github.com/3proxy/3proxy/wiki/High%20Load" target="_blank" rel="noopener">https://github.com/3proxy/3proxy/wiki/High%20Load</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">3proxy -v</span><br><span class="line">Usage: 3proxy [conffile]</span><br><span class="line"></span><br><span class="line"> if conffile is missing, configuration is expected from stdin</span><br><span class="line">available socket options:</span><br><span class="line">TCP_NODELAY</span><br><span class="line">TCP_CORK</span><br><span class="line">TCP_DEFER_ACCEPT</span><br><span class="line">TCP_QUICKACK</span><br><span class="line">SO_REUSEADDR</span><br><span class="line">SO_REUSEPORT</span><br><span class="line">SO_KEEPALIVE</span><br><span class="line">SO_DONTROUTE</span><br><span class="line">IP_TRANSPARENT</span><br><span class="line"></span><br><span class="line">3proxy tiny proxy server 3proxy-0.9.4 ()</span><br><span class="line">(c)3APA3A, Vladimir Dubrovin &amp; 3proxy.org</span><br><span class="line">Documentation and sources: https://3proxy.org/</span><br><span class="line">Please read license agreement in &apos;copying&apos; file.</span><br><span class="line">You may not use this program without accepting license agreement</span><br></pre></td></tr></table></figure><h3 id="3proxy-cfg"><a href="#3proxy-cfg" class="headerlink" title="3proxy.cfg"></a>3proxy.cfg</h3><p><a href="https://3proxy.org/doc/man3/3proxy.cfg.3.html" target="_blank" rel="noopener">https://3proxy.org/doc/man3/3proxy.cfg.3.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br></pre></td><td class="code"><pre><span class="line">Common structure:</span><br><span class="line">Configuration file is a text file 3proxy reads configuration from. Each line of the file is a <span class="built_in">command</span> executed immediately, as it was given from console. Sequence of commands is important. Configuration file as actually a script <span class="keyword">for</span> 3proxy executable. Each line of the file is treated as a blank (space or tab) separated <span class="built_in">command</span> line. Additional space characters are ignored. Think about 3proxy as <span class="string">"application level router"</span> with console interface.</span><br><span class="line"></span><br><span class="line">Comments:</span><br><span class="line">Any string beginning with space character or ´<span class="comment">#´ character is comment. It´s ignored. &lt;LF&gt;s are ignored. &lt;CR&gt; is end of command.</span></span><br><span class="line"></span><br><span class="line">Quotation:</span><br><span class="line">Quotation character is <span class="string">"(double quote). Quotation must be used to quote spaces or another special characters. To use quotation character inside quotation character must be dubbed (BASIC convention). For example to use HELLO"</span>WORLD<span class="string">"as an argument you should use it as"</span>HELLO <span class="string">""</span>WORLD<span class="string">""</span><span class="string">". Good practice is to quote any argument you use.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">File inclusion:</span></span><br><span class="line"><span class="string">You can include file by using <span class="variable">$FILENAME</span> macro (replace FILENAME with a path to file, for example $/usr/local/etc/3proxy/conf.incl or</span></span><br><span class="line"><span class="string">$"</span>c:\\Program Files\3proxy\include.cfg<span class="string">"Quotation is required in last example because path contains space character. For included file &lt;CR&gt; (end of line characters) is treated as space character (arguments delimiter instead of end of command delimiter). Thus, include files are only useful to store long signle-line commands (like userlist, network lists, etc). To use dollar sign somewhere in argument it must be quoted. Recursion is not allowed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Next commands start gateway services:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">proxy [options]</span></span><br><span class="line"><span class="string">socks [options]</span></span><br><span class="line"><span class="string">pop3p [options]</span></span><br><span class="line"><span class="string">ftppr [options]</span></span><br><span class="line"><span class="string">admin [options]</span></span><br><span class="line"><span class="string">dnspr [options]</span></span><br><span class="line"><span class="string">tcppm [options] &lt;SRCPORT&gt; &lt;DSTADDR&gt; &lt;DSTPORT&gt;</span></span><br><span class="line"><span class="string">udppm [options] &lt;SRCPORT&gt; &lt;DSTADDR&gt; &lt;DSTPORT&gt;</span></span><br><span class="line"><span class="string">Descriptions:</span></span><br><span class="line"><span class="string">proxy HTTP/HTTPS proxy (default port 3128)</span></span><br><span class="line"><span class="string">socks SOCKS 4/4.5/5 proxy (default port 1080)</span></span><br><span class="line"><span class="string">pop3p POP3 proxy (default port 110)</span></span><br><span class="line"><span class="string">ftppr FTP proxy (default port 21)</span></span><br><span class="line"><span class="string">admin Web interface (default port 80)</span></span><br><span class="line"><span class="string">dnspr caching DNS proxy (default port 53)</span></span><br><span class="line"><span class="string">tcppm TCP portmapper</span></span><br><span class="line"><span class="string">udppm UDP portmapper</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Options:</span></span><br><span class="line"><span class="string">-pNUMBER change default server port to NUMBER</span></span><br><span class="line"><span class="string">-n disable NTLM authentication (required if passwords are stored in Unix crypt format).</span></span><br><span class="line"><span class="string">-n1 enable NTLMv1 authentication.</span></span><br><span class="line"><span class="string">-s</span></span><br><span class="line"><span class="string">(for admin) secure, allow only secure operations, currently only traffic counters view without ability to reset.</span></span><br><span class="line"><span class="string">(for dnspr) simple, do not use resolver and 3proxy cache, always use external DNS server.</span></span><br><span class="line"><span class="string">(for udppm) singlepacket, expect only one packet from both client and server</span></span><br><span class="line"><span class="string">-u Never ask for username/password</span></span><br><span class="line"><span class="string">-u2 (for socks) require username/password in authentication methods</span></span><br><span class="line"><span class="string">-a (for proxy) anonymous proxy (no information about client reported)</span></span><br><span class="line"><span class="string">-a1 (for proxy) anonymous proxy (random client information reported)</span></span><br><span class="line"><span class="string">-a2 (for proxy) generate Via: and X-Forwared-For: instead of Forwarded:</span></span><br><span class="line"><span class="string">-6 Only resolve IPv6 addresses. IPv4 addresses are packed in IPv6 in IPV6_V6ONLY compatible way.</span></span><br><span class="line"><span class="string">-4 Only resolve IPv4 addresses</span></span><br><span class="line"><span class="string">-46 Resolve IPv6 addresses if IPv4 address is not resolvable</span></span><br><span class="line"><span class="string">-64 Resolve IPv4 addresses if IPv6 address is not resolvable</span></span><br><span class="line"><span class="string">-RHOST:port listen on given local HOST:port for incoming connections instead of making remote outgoing connection. Can be used with another 3proxy service running -r option for connect back functionality. Most commonly used with tcppm. HOST can be given as IP or hostname, useful in case of dynamic DNS.</span></span><br><span class="line"><span class="string">-rHOST:port connect to given remote HOST:port instead of listening local connection on -p or default port. Can be used with another 3proxy service running -R option for connect back functionality. Most commonly used with proxy or socks. HOST can be given as IP or hostname, useful in case of dynamic DNS.</span></span><br><span class="line"><span class="string">-ocOPTIONS, -osOPTIONS, -olOPTIONS, -orOPTIONS, -oROPTIONS options for proxy-to-client (oc), proxy-to-server (os), proxy listening (ol), connect back client (or), connect back listening (oR) sockets. Options like TCP_CORK, TCP_NODELAY, TCP_DEFER_ACCEPT, TCP_QUICKACK, TCP_TIMESTAMPS, USE_TCP_FASTOPEN, SO_REUSEADDR, SO_REUSEPORT, SO_PORT_SCALABILITY, SO_REUSE_UNICASTPORT, SO_KEEPALIVE, SO_DONTROUTE may be supported depending on OS.</span></span><br><span class="line"><span class="string">-DiINTERFACE, -DeINTERFACE bind internal interface / external inteface to given INTERFACE (e.g. eth0) if SO_BINDTODEVICE supported by system. You may need to run as root or to have CAP_NET_RAW capability in order to bind to interface, depending on system, so this option may require root privileges and can be incompatible with some configuraton commands like chroot and setuid (and daemon if setcap is used).</span></span><br><span class="line"><span class="string">-e External address. IP address of interface proxy should initiate connections from. External IP must be specified if you need incoming connections. By default system will deside which address to use in accordance with routing table.</span></span><br><span class="line"><span class="string">-i Internal address. IP address proxy accepts connections to. By default connection to any interface is accepted.</span></span><br><span class="line"><span class="string">-N (for socks) External NAT address 3proxy reports to client for BIND and UDPASSOC By default external address is reported. It’s only useful in the case of IP-IP NAT (will not work for PAT)</span></span><br><span class="line"><span class="string">Also, all options mentioned for proxy(8) socks(8) pop3p(8) tcppm(8) udppm(8) ftppr(8)</span></span><br><span class="line"><span class="string">are also supported.</span></span><br><span class="line"><span class="string">Portmapping services listen at SRCPORT and connect to DSTADDR:DSTPORT HTTP and SOCKS proxies are standard.</span></span><br><span class="line"><span class="string">POP3 proxy must be configured as POP3 server and requires username in the form of: pop3username@pop3server. If POP3 proxy access must be authenticated, you can specify username as proxy_username:proxy_password:POP3_username@pop3server</span></span><br><span class="line"><span class="string">DNS proxy resolves any types of records but only hostnames are cached. It requires nserver/nscache to be configured. If nserver is configured as TCP, redirections are applied on connection, so parent proxy may be used to resolve names to IP.</span></span><br><span class="line"><span class="string">FTP proxy can be used as FTP server in any FTP client or configured as FTP proxy on a client with FTP proxy support. Username format is one of</span></span><br><span class="line"><span class="string">FTPuser@FTPServer</span></span><br><span class="line"><span class="string">FTPuser:FTPpassword@FTPserver</span></span><br><span class="line"><span class="string">proxyuser:proxypassword:FTPuser:FTPpassword@FTPserver</span></span><br><span class="line"><span class="string">Please note, if you use FTP client interface for FTP proxy do not add FTPpassword and FTPServer to username, because FTP client does it for you. That is, if you use 3proxy with authentication use proxyuser:proxypassword:FTPuser as FTP username, otherwise do not change original FTP user name</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">include &lt;path&gt;</span></span><br><span class="line"><span class="string">Include config file</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">config &lt;path&gt;</span></span><br><span class="line"><span class="string">Path to configuration file to use on 3proxy restart or to save configuration.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">writable</span></span><br><span class="line"><span class="string">ReOpens configuration file for write access via Web interface, and rereads it. Usually should be first command on config file but in combination with config it can be used anywhere to open alternate config file. Think twice before using it.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">End of configuration</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">log [[@|&amp;]logfile] [&lt;LOGTYPE&gt;]</span></span><br><span class="line"><span class="string">sets logfile for all gateways</span></span><br><span class="line"><span class="string">@ (for Unix) use syslog, filename is used as ident name</span></span><br><span class="line"><span class="string">&amp; use ODBC, filename consists of comma-delimited datasource,username,password (username and password are optional)</span></span><br><span class="line"><span class="string">radius - use RADIUS for logging</span></span><br><span class="line"><span class="string">LOGTYPE is one of:</span></span><br><span class="line"><span class="string">M Monthly</span></span><br><span class="line"><span class="string">W Weekly (starting from Sunday)</span></span><br><span class="line"><span class="string">D Daily</span></span><br><span class="line"><span class="string">H Hourly</span></span><br><span class="line"><span class="string">if logfile is not specified logging goes to stdout. You can specify individual logging options for gateway by using -l option in gateway configuration.</span></span><br><span class="line"><span class="string">log command supports same format specifications for filename template as"</span>logformat<span class="string">"(if filename contains ´%´ sign it´s believed to be template). As with"</span>logformat<span class="string">"filename must begin with ´L´ or ´G´ to specify Local or Grinwitch time zone for all time-based format specificators.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">rotate &lt;n&gt;</span></span><br><span class="line"><span class="string">how many archived log files to keep</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logformat &lt;format&gt;</span></span><br><span class="line"><span class="string">Format for log record. First symbol in format must be L (local time) or G (absolute Grinwitch time). It can be preceeded with -XXX+Y where XXX is list of characters to be filtered in user input (any non-printable characters are filtered too in this case) and Y is replacement character. For example,"</span>-,%+ L<span class="string">"in the beginning of logformat means comma and percent are replaced with space and all time based elemnts are in local time zone.</span></span><br><span class="line"><span class="string">You can use:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">%y Year in 2 digit format</span></span><br><span class="line"><span class="string">%Y Year in 4 digit format</span></span><br><span class="line"><span class="string">%m Month number</span></span><br><span class="line"><span class="string">%o Month abbriviature</span></span><br><span class="line"><span class="string">%d Day</span></span><br><span class="line"><span class="string">%H Hour</span></span><br><span class="line"><span class="string">%M Minute</span></span><br><span class="line"><span class="string">%S Second</span></span><br><span class="line"><span class="string">%t Timstamp (in seconds since 01-Jan-1970)</span></span><br><span class="line"><span class="string">%. milliseconds</span></span><br><span class="line"><span class="string">%z timeZone (from Grinvitch)</span></span><br><span class="line"><span class="string">%D request duration (in milliseconds)</span></span><br><span class="line"><span class="string">%b average send rate per request (in Bytes per second) this speed is typically below connection speed shown by download manager.</span></span><br><span class="line"><span class="string">%B average receive rate per request (in Bytes per second) this speed is typically below connection speed shown by download manager.</span></span><br><span class="line"><span class="string">%U Username</span></span><br><span class="line"><span class="string">%N service Name</span></span><br><span class="line"><span class="string">%p service Port</span></span><br><span class="line"><span class="string">%E Error code</span></span><br><span class="line"><span class="string">%C Client IP</span></span><br><span class="line"><span class="string">%c Client port</span></span><br><span class="line"><span class="string">%R Remote IP</span></span><br><span class="line"><span class="string">%r Remote port</span></span><br><span class="line"><span class="string">%i Internal IP used to accept client connection</span></span><br><span class="line"><span class="string">%e External IP used to establish connection</span></span><br><span class="line"><span class="string">%Q Requested IP</span></span><br><span class="line"><span class="string">%q Requested port</span></span><br><span class="line"><span class="string">%n requested hostname</span></span><br><span class="line"><span class="string">%I bytes In</span></span><br><span class="line"><span class="string">%O bytes Out</span></span><br><span class="line"><span class="string">%h Hops (redirections) count</span></span><br><span class="line"><span class="string">%T service specific Text</span></span><br><span class="line"><span class="string">%N1-N2T (N1 and N2 are positive numbers) log only fields from N1 thorugh N2 of service specific text</span></span><br><span class="line"><span class="string">in the case of ODBC logging logformat specifies SQL statement, for exmample:</span></span><br><span class="line"><span class="string">logformat"</span>-´+_Linsert into <span class="built_in">log</span> (l_date, l_user, l_service, l_in, l_out, l_descr) values (´%d-%m-%Y %H:%M:%S´, ´%U´, ´%N´, %I, %O, ´%T´)<span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logdump &lt;in_traffic_limit&gt; &lt;out_traffic_limit&gt;</span></span><br><span class="line"><span class="string">Immediately creates additional log records if given amount of incoming/outgoing traffic is achieved for connection, without waiting for connection to finish. It may be useful to prevent information about long-lasting downloads on server shutdown.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">archiver &lt;ext&gt; &lt;commandline&gt;</span></span><br><span class="line"><span class="string">Archiver to use for log files. &lt;ext&gt; is file extension produced by archiver. Filename will be last argument to archiver, optionally you can use %A as produced archive name and %F as filename.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">timeouts &lt;BYTE_SHORT&gt; &lt;BYTE_LONG&gt; &lt;STRING_SHORT&gt; &lt;STRING_LONG&gt; &lt;CONNECTION_SHORT&gt; &lt;CONNECTION_LONG&gt; &lt;DNS&gt; &lt;CHAIN&gt; &lt;CONNECT&gt; &lt;CONNECTBACK&gt;</span></span><br><span class="line"><span class="string">Sets timeout values, defaults 1, 5, 30, 60, 180, 1800, 15, 60, 15, 5.</span></span><br><span class="line"><span class="string">BYTE_SHORT short timeout for single byte, is usually used for receiving single byte from stream.</span></span><br><span class="line"><span class="string">BYTE_LONG long timeout for single byte, is usually used for receiving first byte in frame (for example first byte in socks request).</span></span><br><span class="line"><span class="string">STRING_SHORT short timeout, for character string within stream (for example to wait between 2 HTTP headers)</span></span><br><span class="line"><span class="string">STRING_LONG long timeout, for first string in stream (for example to wait for HTTP request).</span></span><br><span class="line"><span class="string">CONNECTION_SHORT inactivity timeout for short connections (HTTP, POP3, etc).</span></span><br><span class="line"><span class="string">CONNECTION_LONG inactivity timeout for long connection (SOCKS, portmappers, etc).</span></span><br><span class="line"><span class="string">DNS timeout for DNS request before requesting next server</span></span><br><span class="line"><span class="string">CHAIN timeout for reading data from chained connection</span></span><br><span class="line"><span class="string">default timeouts 1 5 30 60 180 1800 15 60 15 5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">radius &lt;NAS_SECRET&gt; &lt;radius_server_1[:port][/local_address_1]&gt; &lt;radius_server_2[:port][/local_address_2]&gt;</span></span><br><span class="line"><span class="string">Configures RADIUS servers to be used for logging and authentication (log and auth types must be set to radius). port and local address to use with given server may be specified.</span></span><br><span class="line"><span class="string">Attributes within request: User-Name, Password: (username and password if presented by client), Service Type: Authenticate-Only, NAS-Port-Type: NAS-Port-Virtual, NAS-Port-ID: (proxy service port, e.g. 1080), NAS-IPv6-Address / NAS-IP-Address: (proxy interface accessed by client), NAS-Identifier: (text identifing proxy, e.g. PROXY or SOCKSv5), Framed-IPv6-Address / Framed-IP-Address: (IP address of the client), Called-Station-ID: (requested Hostname, if presents), Login-Service: (type of request, e.g. 1001 - SOCKS CONNECT, 1010 - HTTP GET, 1013 - HTTP CONNECT), Login-TCP-Port: (requested port), Login-IPv6-Host / Login-IP-Host: (requested IP).</span></span><br><span class="line"><span class="string">Supported reply attributes for authentication: Framed-IP-Address / Framed-IPv6-Address (IP to assign to user), Reply-Message. Use authcache to speedup authentication. RADIUS feature is currently experimental.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nserver &lt;ipaddr&gt;[:port][/tcp]</span></span><br><span class="line"><span class="string">Nameserver to use for name resolutions. If none specified system routines for name resolution is used. Optional port number may be specified. If optional /tcp is added to IP address, name resolution is performed over TCP.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nscache &lt;cachesize&gt; nscache6 &lt;cachesize&gt;</span></span><br><span class="line"><span class="string">Cache &lt;cachesize&gt; records for name resolution (nscache for IPv4, nscache6 for IPv6). Cachesize usually should be large enougth (for example 65536).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nsrecord &lt;hostname&gt; &lt;hostaddr&gt;</span></span><br><span class="line"><span class="string">Adds static record to nscache. nscache must be enabled. If 0.0.0.0 is used as a hostaddr host will never resolve, it can be used to blacklist something or together with dialer command to set up UDL for dialing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">fakeresolve</span></span><br><span class="line"><span class="string">All names are resolved to 127.0.0.2 address. Usefull if all requests are redirected to parent proxy with http, socks4+, connect+ or socks5+.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">dialer &lt;progname&gt;</span></span><br><span class="line"><span class="string">Execute progname if external name can´t be resolved. Hint: if you use nscache, dialer may not work, because names will be resolved through cache. In this case you can use something like http://dial.right.now/ from browser to set up connection.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">internal &lt;ipaddr&gt;</span></span><br><span class="line"><span class="string">sets ip address of internal interface. This IP address will be used to bind gateways. Alternatively you can use -i option for individual gateways. Since 0.8 version, IPv6 address may be used.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">external &lt;ipaddr&gt;</span></span><br><span class="line"><span class="string">sets ip address of external interface. This IP address will be source address for all connections made by proxy. Alternatively you can use -e option to specify individual address for gateway. Since 0.8 version External or -e can be given twice: once with IPv4 and once with IPv6 address.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">maxconn &lt;number&gt;</span></span><br><span class="line"><span class="string">sets maximum number of simulationeous connections to each services started after this command. Default is 250.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">service</span></span><br><span class="line"><span class="string">(depricated). Indicates 3proxy to behave as Windows 95/98/NT/2000/XP service, no effect for Unix. Not required for 3proxy 0.6 and above. If you upgraded from previous version of 3proxy use --remove and --install to reinstall service.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daemon</span></span><br><span class="line"><span class="string">Should be specified to close console. Do not use ´daemon´ with ´service´. At least under FreeBSD ´daemon´ should preceed any proxy service and log commands to avoid sockets problem. Always place it in the beginning of the configuration file.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">auth &lt;authtype&gt; [...]</span></span><br><span class="line"><span class="string">Type of user authorization. Currently supported:</span></span><br><span class="line"><span class="string">none - no authentication or authorization required.</span></span><br><span class="line"><span class="string">Note: is auth is none any ip based limitation, redirection, etc will not work. This is default authentication type</span></span><br><span class="line"><span class="string">iponly - authentication by access control list with username ignored.</span></span><br><span class="line"><span class="string">Appropriate for most cases</span></span><br><span class="line"><span class="string">useronly - authentication by username without checking for any password with authorization by ACLs. Useful for e.g. SOCKSv4 proxy and icqpr (icqpr set UIN / AOL screen name as a username)</span></span><br><span class="line"><span class="string">dnsname - authentication by DNS hostnname with authorization by ACLs. DNS hostname is resolved via PTR (reverse) record and validated (resolved name must resolve to same IP address). It´s recommended to use authcache by ip for this authentication. NB: there is no any password check, name may be spoofed.</span></span><br><span class="line"><span class="string">strong - username/password authentication required. It will work with SOCKSv5, FTP, POP3 and HTTP proxy.</span></span><br><span class="line"><span class="string">cache - cached authentication, may be used with ´authcache´.</span></span><br><span class="line"><span class="string">radius - authentication with RADIUS.</span></span><br><span class="line"><span class="string">Plugins may add additional authentication types.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">It´s possible to use few authentication types in the same commands. E.g.</span></span><br><span class="line"><span class="string">auth iponly strong</span></span><br><span class="line"><span class="string">In this case ´strong´ authentication will be used only in case resource access can not be performed with ´iponly´ authentication, that is username is required in ACL. It´s usefull to protect access to some resources with password allowing passwordless access to another resources, or to use IP-based authentication for dedicated laptops and request username/password for shared ones.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">authcache &lt;cachtype&gt; &lt;cachtime&gt;</span></span><br><span class="line"><span class="string">Cache authentication information to given amount of time (cachetime) in seconds. Cahtype is one of:</span></span><br><span class="line"><span class="string">ip - after successful authentication all connections during caching time from same IP are assigned to the same user, username is not requested.</span></span><br><span class="line"><span class="string">ip,user username is requested and all connections from the same IP are assigned to the same user without actual authentication.</span></span><br><span class="line"><span class="string">user - same as above, but IP is not checked.</span></span><br><span class="line"><span class="string">user,password - both username and password are checked against cached ones.</span></span><br><span class="line"><span class="string">limit - limit user to use only one ip, ´ip´ and ´user´ are required</span></span><br><span class="line"><span class="string">acl - only use cached auth if user access service with same ACL</span></span><br><span class="line"><span class="string">ext - cache external IP</span></span><br><span class="line"><span class="string">Use auth type ´cache´ for cached authentication</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">allow &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">deny &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">Access control entries. All lists are comma-separated, no spaces are allowed. Usernames are case sensitive (if used with authtype nbname username must be in uppercase). Source and target lists may contain IP addresses (W.X.Y.Z), ranges A.B.C.D - W.X.Y.Z (since 0.8) or CIDRs (W.X.Y.Z/L). Since 0.6, targetlist may also contain host names, instead of addresses. It´s possible to use wildmask in the begginning and in the the end of hostname, e.g. *badsite.com or *badcontent*. Hostname is only checked if hostname presents in request. Targetportlist may contain ports (X) or port ranges lists (X-Y). For any field * sign means ANY. If access list is empty it´s assumed to be</span></span><br><span class="line"><span class="string">allow *</span></span><br><span class="line"><span class="string">If access list is not empty last item in access list is assumed to be</span></span><br><span class="line"><span class="string">deny *</span></span><br><span class="line"><span class="string">You may want explicitly add deny * to the end of access list to prevent HTTP proxy from requesting user´s password. Access lists are checked after user have requested any resource. If you want 3proxy to reject connections from specific addresses immediately without any conditions you should either bind proxy to appropriate interface only or to use ip filters.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Operation is one of:</span></span><br><span class="line"><span class="string">CONNECT establish outgoing TCP connection</span></span><br><span class="line"><span class="string">BIND bind TCP port for listening</span></span><br><span class="line"><span class="string">UDPASSOC make UDP association</span></span><br><span class="line"><span class="string">ICMPASSOC make ICMP association (for future use)</span></span><br><span class="line"><span class="string">HTTP_GET HTTP GET request</span></span><br><span class="line"><span class="string">HTTP_PUT HTTP PUT request</span></span><br><span class="line"><span class="string">HTTP_POST HTTP POST request</span></span><br><span class="line"><span class="string">HTTP_HEAD HTTP HEAD request</span></span><br><span class="line"><span class="string">HTTP_CONNECT HTTP CONNECT request</span></span><br><span class="line"><span class="string">HTTP_OTHER over HTTP request</span></span><br><span class="line"><span class="string">HTTP matches any HTTP request except HTTP_CONNECT</span></span><br><span class="line"><span class="string">HTTPS same as HTTP_CONNECT</span></span><br><span class="line"><span class="string">FTP_GET FTP get request</span></span><br><span class="line"><span class="string">FTP_PUT FTP put request</span></span><br><span class="line"><span class="string">FTP_LIST FTP list request</span></span><br><span class="line"><span class="string">FTP_DATA FTP data connection. Note: FTP_DATA requires access to dynamic non-ptivileged (1024-65535) ports on remote side.</span></span><br><span class="line"><span class="string">FTP matches any FTP/FTP Data request</span></span><br><span class="line"><span class="string">ADMIN access to administration interface</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Weeksdays are week days numbers or periods, 0 or 7 means Sunday, 1 is Monday, 1-5 means Monday through Friday.</span></span><br><span class="line"><span class="string">Timeperiodlists is a list of time periods in HH:MM:SS-HH:MM:SS format. For example, 00:00:00-08:00:00,17:00:00-24:00:00 lists non-working hours.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parent &lt;weight&gt; &lt;type&gt; &lt;ip&gt; &lt;port&gt; &lt;username&gt; &lt;password&gt;</span></span><br><span class="line"><span class="string">this command must follow"</span>allow<span class="string">"rule. It extends last allow rule to build proxy chain. Proxies may be grouped. Proxy inside the group is selected randomly. If few groups are specified one proxy is randomly picked from each group and chain of proxies is created (that is second proxy connected through first one and so on). Weight is used to group proxies. Weigt is a number between 1 and 1000. Weights are summed and proxies are grouped together untill weight of group is 1000. That is:</span></span><br><span class="line"><span class="string">allow *</span></span><br><span class="line"><span class="string">parent 500 socks5 192.168.10.1 1080</span></span><br><span class="line"><span class="string">parent 500 connect 192.168.10.1 3128</span></span><br><span class="line"><span class="string">makes 3proxy to randomly choose between 2 proxies for all outgoing connections. These 2 proxies form 1 group (summarized weight is 1000).</span></span><br><span class="line"><span class="string">allow * * * 80</span></span><br><span class="line"><span class="string">parent 1000 socks5 192.168.10.1 1080</span></span><br><span class="line"><span class="string">parent 1000 connect 192.168.20.1 3128</span></span><br><span class="line"><span class="string">parent 300 socks4 192.168.30.1 1080</span></span><br><span class="line"><span class="string">parent 700 socks5 192.168.40.1 1080</span></span><br><span class="line"><span class="string">creates chain of 3 proxies: 192.168.10.1, 192.168.20.1 and third is (192.168.30.1 with probability of 0.3 or 192.168.40.1 with probability of 0.7) for outgoing web connections. Chains are only applied to new connections, pipelined (keep-alive) requests in the same connection use the same chain.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">type is one of:</span></span><br><span class="line"><span class="string">extip does not actully redirect request, it sets external address for this request to &lt;ip&gt;. It can be chained with another parent types. It’s usefaul to set external IP based on ACL or make it random.</span></span><br><span class="line"><span class="string">tcp simply redirect connection. TCP is always last in chain. This type of proxy is a simple TCP redirection, it does not support parent authentication.</span></span><br><span class="line"><span class="string">http redirect to HTTP proxy. HTTP is always the last chain. It should only be used with http (proxy) service, if used with different service, it works as tcp redirection.</span></span><br><span class="line"><span class="string">pop3 redirect to POP3 proxy (only local redirection is supported, can only be used as a first hop in chaining)</span></span><br><span class="line"><span class="string">ftp redirect to FTP proxy (only local redirection is supported, can only be used as a first hop in chaining)</span></span><br><span class="line"><span class="string">connect parent is HTTP CONNECT method proxy</span></span><br><span class="line"><span class="string">connect+ parent is HTTP CONNECT proxy with name resolution (hostname is used instead of IP if available)</span></span><br><span class="line"><span class="string">socks4 parent is SOCKSv4 proxy</span></span><br><span class="line"><span class="string">socks4+ parent is SOCKSv4 proxy with name resolution (SOCKSv4a)</span></span><br><span class="line"><span class="string">socks5 parent is SOCKSv5 proxy</span></span><br><span class="line"><span class="string">socks5+ parent is SOCKSv5 proxy with name resolution</span></span><br><span class="line"><span class="string">socks4b parent is SOCKS4b (broken SOCKSv4 implementation with shortened server reply. I never saw this kind ofservers byt they say there are). Normally you should not use this option. Do not mess this option with SOCKSv4a (socks4+).</span></span><br><span class="line"><span class="string">socks5b parent is SOCKS5b (broken SOCKSv5 implementation with shortened server reply. I think you will never find it useful). Never use this option unless you know exactly you need it.</span></span><br><span class="line"><span class="string">admin redirect request to local ´admin´ service (with -s parameter).</span></span><br><span class="line"><span class="string">Use"</span>+<span class="string">"proxy only with"</span>fakeresolve<span class="string">"option</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">IP and port are ip addres and port of parent proxy server. If IP is zero, ip is taken from original request, only port is changed. If port is zero, it´s taken from original request, only IP is changed. If both IP and port are zero - it´s a special case of local redirection, it works only with socks proxy. In case of local redirection request is redirected to different service, ftp locally redirects to ftppr pop3 locally redirects to pop3p http locally redurects to proxy admin locally redirects to admin -s service.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Main purpose of local redirections is to have requested resource (URL or POP3 username) logged and protocol-specific filters to be applied. In case of local redirection ACLs are revied twice: first, by SOCKS proxy up to ´parent´ command and then with gateway service connection is redirected (HTTP, FTP or POP3) after ´parent´ command. It means, additional ´allow´ command is required for redirected requests, for example:</span></span><br><span class="line"><span class="string">allow * * * 80</span></span><br><span class="line"><span class="string">parent 1000 http 0.0.0.0 0</span></span><br><span class="line"><span class="string">allow * * * 80 HTTP_GET,HTTP_POST</span></span><br><span class="line"><span class="string">socks</span></span><br><span class="line"><span class="string">redirects all SOCKS requests with target port 80 to local HTTP proxy, local HTTP proxy parses requests and allows only GET and POST requests.</span></span><br><span class="line"><span class="string">parent 1000 http 1.2.3.4 0</span></span><br><span class="line"><span class="string">Changes external address for given connection to 1.2.3.4 (an equivalent to -e1.2.3.4)</span></span><br><span class="line"><span class="string">Optional username and password are used to authenticate on parent proxy. Username of ´*´ means username must be supplied by user.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nolog &lt;n&gt;</span></span><br><span class="line"><span class="string">extends last allow or deny command to prevent logging, e.g.</span></span><br><span class="line"><span class="string">allow * * 192.168.1.1</span></span><br><span class="line"><span class="string">nolog</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">weight &lt;n&gt;</span></span><br><span class="line"><span class="string">extends last allow or deny command to set weight for this request</span></span><br><span class="line"><span class="string">allow * * 192.168.1.1</span></span><br><span class="line"><span class="string">weight 100</span></span><br><span class="line"><span class="string">Weight may be used for different purposes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">force</span></span><br><span class="line"><span class="string">noforce</span></span><br><span class="line"><span class="string">If force is specified for service, configuration reload will require all current sessions of this service to be re-authenticated. If ACL is changed or user account is removed, old connections which do not match current are closed. noforce allows to keep previously authenticated connections.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">bandlimin &lt;rate&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nobandlimin &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">bandlimout &lt;rate&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nobandlimout &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">bandlim sets bandwith limitation filter to &lt;rate&gt; bps (bits per second) If you want to specife bytes per second - multiply your value to 8. bandlim rules act in a same manner as allow/deny rules except one thing: bandwidth limiting is applied to all services, not to some specific service. bandlimin and nobandlimin applies to incoming traffic bandlimout and nobandlimout applies to outgoing traffic If tou want to ratelimit your clients with IPs 192.168.10.16/30 (4 addresses) to 57600 bps you have to specify 4 rules like</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.16</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.17</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.18</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.19</span></span><br><span class="line"><span class="string">and every of you clients will have 56K channel. If you specify</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.16/30</span></span><br><span class="line"><span class="string">you will have 56K channel shared between all clients. if you want, for example, to limit all speed ecept access to POP3 you can use</span></span><br><span class="line"><span class="string">nobandlimin * * * 110</span></span><br><span class="line"><span class="string">before the rest of bandlim rules.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">connlim &lt;rate&gt; &lt;period&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">noconnlim &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">connlim sets connections rate limit per time period for traffic pattern controlled by ACL. Period is in seconds. If period is 0, connlim limits a number of parallel connections.</span></span><br><span class="line"><span class="string">connlim 100 60 * 127.0.0.1</span></span><br><span class="line"><span class="string">allows 100 connections per minute for 127.0.0.1.</span></span><br><span class="line"><span class="string">connlim 20 0 * 127.0.0.1</span></span><br><span class="line"><span class="string">allows 20 simulationeous connections for 127.0.0.1.</span></span><br><span class="line"><span class="string">Like with bandlimin, if individual limit is required per client, separate rule mustbe added for every client. Like with nobanlimin, noconnlim adds an exception.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">counter &lt;filename&gt; &lt;reporttype&gt; &lt;repotname&gt;</span></span><br><span class="line"><span class="string">countin &lt;number&gt; &lt;type&gt; &lt;limit&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nocountin &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">countout &lt;number&gt; &lt;type&gt; &lt;limit&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nocountout &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">countall &lt;number&gt; &lt;type&gt; &lt;limit&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nocountall &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">counter, countin, nocountin, countout, noucountout, countall, nocountall commands are used to set traffic limit in MB for period of time (day, week or month). Filename is a path to a special file where traffic information is permanently stored. number is sequential number of record in this file. If number is 0 this counter is not preserved in counter file (that is if proxy restarted all counters with 0 are flushed) overwise it should be unique sequential number which points to position of the couter within the file. Type specifies a type of counter. Type is one of:</span></span><br><span class="line"><span class="string">H - counter is resetted hourly</span></span><br><span class="line"><span class="string">D - counter is resetted daily</span></span><br><span class="line"><span class="string">W - counter is resetted weekly</span></span><br><span class="line"><span class="string">M - counter is resetted monthely</span></span><br><span class="line"><span class="string">reporttype/repotname may be used to generate traffic reports. Reporttype is one of D,W,M,H(hourly) and repotname specifies filename template for reports. Report is text file with counter values in format:</span></span><br><span class="line"><span class="string">&lt;COUNTERNUMBER&gt; &lt;TRAF&gt;</span></span><br><span class="line"><span class="string">The rest of parameters is identical to bandlim/nobandlim.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">users username[:pwtype:password] ...</span></span><br><span class="line"><span class="string">pwtype is one of:</span></span><br><span class="line"><span class="string">none (empty) - use system authentication</span></span><br><span class="line"><span class="string">CL - password is cleartext</span></span><br><span class="line"><span class="string">CR - password is crypt-style password</span></span><br><span class="line"><span class="string">NT - password is NT password (in hex)</span></span><br><span class="line"><span class="string">example:</span></span><br><span class="line"><span class="string">users test1:CL:password1"</span>test2:CR:<span class="variable">$1</span><span class="variable">$lFDGlder</span><span class="variable">$pLRb4cU2D7GAT58YQvY49</span>.<span class="string">"</span></span><br><span class="line"><span class="string">users test3:NT:BD7DFBF29A93F93C63CB84790DA00E63</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Note: double quotes are requiered because password contains $ sign.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">flush</span></span><br><span class="line"><span class="string">empty active access list. Access list must be flushed avery time you creating new access list for new service. For example:</span></span><br><span class="line"><span class="string">allow *</span></span><br><span class="line"><span class="string">pop3p</span></span><br><span class="line"><span class="string">flush</span></span><br><span class="line"><span class="string">allow * 192.168.1.0/24</span></span><br><span class="line"><span class="string">socks</span></span><br><span class="line"><span class="string">sets different ACLs for pop3p and socks</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">system &lt;command&gt;</span></span><br><span class="line"><span class="string">execute system command</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">pidfile &lt;filename&gt;</span></span><br><span class="line"><span class="string">write pid of current process to file. It can be used to manipulate 3proxy with signals under Unix. Currently next signals are available:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">monitor &lt;filename&gt;</span></span><br><span class="line"><span class="string">If file monitored changes in modification time or size, 3proxy reloads configuration within one minute. Any number of files may be monitored.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">setuid &lt;uid&gt;</span></span><br><span class="line"><span class="string">calls setuid(uid), uid can be numeric or since 0.9 username. Unix only. Warning: under some Linux kernels setuid() works for current thread only. It makes it impossible to suid for all threads.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">setgid &lt;gid&gt;</span></span><br><span class="line"><span class="string">calls setgid(gid), gid can be numeric or since 0.9 groupname. Unix only.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">chroot &lt;path&gt; [&lt;uid&gt;] [&lt;gid&gt;]</span></span><br><span class="line"><span class="string">calls chroot(path) and sets gid/uid. Unix only. uid/gid supported since 0.9, can be numeric or username/groupname</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">stacksize &lt;value_to_add_to_default_stack_size&gt;</span></span><br><span class="line"><span class="string">Change default size for threads stack. May be required in some situation, e.g. with non-default plugins, on on some platforms (some FreeBSD version may require adjusting stack size due to invalid defined value in system header files, this value is also oftent reqruied to be changed for ODBC and PAM support on Linux. If you experience 3proxy crash on request processing, try to set some positive value. You may start with stacksize 65536 and then find the minimal value for service to work. If you experience memory shortage, you can try to experiment with negative values.</span></span><br></pre></td></tr></table></figure><p>Centos7 下载安装 3proxy<br><a href="https://juejin.cn/post/7091955944631992350" target="_blank" rel="noopener">https://juejin.cn/post/7091955944631992350</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># #DNS 服务器</span></span><br><span class="line"><span class="comment"># nserver 202.141.162.123</span></span><br><span class="line"><span class="comment"># nserver 202.141.176.93</span></span><br><span class="line">nserver 127.0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment">#DNS 缓存时间</span></span><br><span class="line">nscache 65536</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 DNS 解析交给上级代理完成</span></span><br><span class="line"><span class="comment"># fakeresolve</span></span><br><span class="line"><span class="comment"># dnspr 参数表示使用 dns</span></span><br><span class="line"><span class="comment"># dnspr</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 超时</span></span><br><span class="line">timeouts 1 5 30 60 180 1800 15 60</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对 linux 及非 nt 系统应替换为 daemon，就可以保证在后台运行。</span></span><br><span class="line">daemon</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志相关配置</span></span><br><span class="line"><span class="comment">## 日志保存目录</span></span><br><span class="line"><span class="built_in">log</span> /var/<span class="built_in">log</span>/3proxy/3proxy.log D</span><br><span class="line"><span class="comment">## 日志格式</span></span><br><span class="line"><span class="comment">#logformat "- +_L%N.%p %E %U %C:%c %R:%r %O %I %h %T"</span></span><br><span class="line">logformat <span class="string">"L%y-%m-%d %H:%M:%S %U %N %C:%c %R:%r %I %O %T"</span></span><br><span class="line"><span class="comment"># 日志保存时长</span></span><br><span class="line">rotate 30</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了一个用户，用户名：ziyou，密码：pass</span></span><br><span class="line"><span class="comment">## CL 表示使用了明文密码。</span></span><br><span class="line">users zhouwen:CL:zhouwen123 qiaofei:CL:qiaofei123</span><br><span class="line"></span><br><span class="line"><span class="comment"># 认证方式: 使用账号密码认证</span></span><br><span class="line">auth strong</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许 ziyou 这个用户访问</span></span><br><span class="line"><span class="comment">## 注意添加完用户还要配置允许用户</span></span><br><span class="line"><span class="comment"># allow zhouwen</span></span><br><span class="line">allow zhouwen,qiaofei</span><br><span class="line"></span><br><span class="line"><span class="comment"># 父代理 轮询比例(1000 最大) 协议 ip 端口</span></span><br><span class="line"><span class="comment"># parent 1000 http 43.132.255.122 9999</span></span><br><span class="line">parent 1000 socks5 127.0.0.1 1080</span><br><span class="line"><span class="comment"># 监听端口</span></span><br><span class="line"><span class="comment"># -a 表示匿名代理,-p 代表监听的端口</span></span><br><span class="line"><span class="comment">## 匿名代理 - 对方知道你使用了代理, 但不知道你的真实 ip</span></span><br><span class="line"><span class="comment">## http 协议端口 3128</span></span><br><span class="line">proxy -a -p10808</span><br><span class="line"></span><br><span class="line"><span class="comment">## socks4 协议端口 1080</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#socks -p1080</span></span><br><span class="line"><span class="comment"># socks -a -p10808</span></span><br></pre></td></tr></table></figure><h2 id="客户端代理使用"><a href="#客户端代理使用" class="headerlink" title="客户端代理使用"></a>客户端代理使用</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><blockquote><p>有钱任性，服务端可以购买使用 CCProxy</p></blockquote><ul><li>浏览器代理</li><li>Proxifier</li></ul><h3 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h3><ul><li>export http_proxy=””</li><li>proxychains(proxychains-ng)</li><li>redsocks + iptables</li></ul>]]></content>
    
    <summary type="html">
    
      3proxy tiny free proxy server
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>AdGuard 过滤规则分享</title>
    <link href="https://wsgzao.github.io/post/adguard/"/>
    <id>https://wsgzao.github.io/post/adguard/</id>
    <published>2022-08-08T06:59:49.000Z</published>
    <updated>2022-08-07T19:02:03.165Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20200122122954.png" alt></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我和很多人一样一开始用 Maxthon 傲游浏览器，然后见证了国内第三方浏览器的群雄逐鹿到只剩下 360 和腾讯，现在也基本回归 Google Chrome，广告过滤我也是一路从 AdBlock Plus 到 uBlock Origin 然后是现在的 AdGuard，无论选择哪种广告过滤方案，持续更新的过滤规则始终是核心。</p><blockquote><p>AdGuard 过滤规则分享</p></blockquote><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 08 月 08 日 - 增加 AdGuardHome 和 anti-AD<br>2021 年 08 月 15 日 - 移除无效规则，增加 halflife 维护的 abp 规则地址指向<br>2020 年 03 月 01 日 - 移除广告净化器规则，增加乘风广告过滤规则 + 视频过滤规则<br>2020 年 01 月 21 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/adguard/">https://wsgzao.github.io/post/adguard/</a></p><p><strong> 扩展阅读 </strong></p><p><a href="https://adguard.com/zh_cn/welcome.html" target="_blank" rel="noopener">AdGuard</a></p><hr><h2 id="为什么要买-AdGuard"><a href="#为什么要买-AdGuard" class="headerlink" title="为什么要买 AdGuard"></a>为什么要买 AdGuard</h2><ol><li>AdBlock Plus(ABP) 大牌免费不香吗？</li><li>uBlock Origin 免费性能好，占用内存低不香吗？</li><li>国内各种 APP 和浏览器扩展横行劫持，无脑安装不也很香吗？</li></ol><blockquote><p>名声在外，全平台支持，懒得折腾，我买 AdGuard</p></blockquote><h2 id="AdGuard-购买记录"><a href="#AdGuard-购买记录" class="headerlink" title="AdGuard 购买记录"></a>AdGuard 购买记录</h2><p>2019 年黑色星期五的时候 ¥187.96 价格购买了 AdGuard 终生 9 设备，貌似买多了</p><p><a href="https://adguard.com/zh_cn/license.html" target="_blank" rel="noopener">https://adguard.com/zh_cn/license.html</a></p><h2 id="广告过滤规则推荐"><a href="#广告过滤规则推荐" class="headerlink" title="广告过滤规则推荐"></a>广告过滤规则推荐</h2><blockquote><p>以下第三方规则可以适用于 AdGuard，AdBlock Plus，uBlock Origin 等</p></blockquote><p>AdGuard 默认的内置规则里很多选择，可以点击订阅自行加载，例如以下几个推荐的：</p><ol><li>EasyList China : 国内网站广告过滤的主规则。<br>链接：<a href="https://easylist-downloads.adblockplus.org/easylistchina.txt" target="_blank" rel="noopener">https://easylist-downloads.adblockplus.org/easylistchina.txt</a></li><li>EasyPrivacy : EasyPrivacy 是隐私保护，不被跟踪。<br>链接：<a href="https://easylist-downloads.adblockplus.org/easyprivacy.txt" target="_blank" rel="noopener">https://easylist-downloads.adblockplus.org/easyprivacy.txt</a></li><li>CJX’s Annoyance List : 过滤烦人的自我推广，并补充 EasyPrivacy 隐私规则。<br>链接：<a href="https://raw.githubusercontent.com/cjx82630/cjxlist/master/cjx-annoyance.txt" target="_blank" rel="noopener">https://raw.githubusercontent.com/cjx82630/cjxlist/master/cjx-annoyance.txt</a></li><li>I don’t care about cookies : 我不关心 Cookie 的问题，屏蔽网站的 cookies 相关的警告。<br>链接：<a href="https://www.i-dont-care-about-cookies.eu/abp/" target="_blank" rel="noopener">https://www.i-dont-care-about-cookies.eu/abp/</a></li></ol><blockquote><p>广告过滤器规则推荐（打开 Adguard -&gt; 设置 -&gt; 内容拦截 -&gt; User rules）</p></blockquote><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20200122122936.png" alt></p><h2 id="AdGuard-激活和管理"><a href="#AdGuard-激活和管理" class="headerlink" title="AdGuard 激活和管理"></a>AdGuard 激活和管理</h2><p>不要忘记在您的设备上激活此授权码！转到 “许可” 页面，输入此处的授权码并点击 “激活”。如果您需要帮助，可参阅此 <a href="https://kb.adguard.com/en/general/license-key?utm_source=email&amp;utm_campaign=license_purchased_key&amp;utm_medium=transact&amp;utm_content=body#activation" target="_blank" rel="noopener">手册</a></p><p>When you enter the <a href="https://adguard.com/zh_cn/account/main.html" target="_blank" rel="noopener">AdGuard personal account</a> you will see the list of your license keys and their current status</p><h2 id="ABP-ublock-订阅规则"><a href="#ABP-ublock-订阅规则" class="headerlink" title="ABP/ublock 订阅规则"></a>ABP/ublock 订阅规则</h2><p>下列各规则、各规则的不同源不要同时订阅，因为重复了，也就是所有地址 <strong> 选择一个 </strong> 订阅就可以了<br>反馈请到 <a href="https://tieba.baidu.com/p/6536115684" target="_blank" rel="noopener">https://tieba.baidu.com/p/6536115684</a></p><ul><li>ad-pc.txt：[推荐桌面端]</li><li>ad.txt：[推荐移动端]</li></ul><ol><li>ad-pc.txt：[推荐桌面端] 合并自乘风视频广告过滤规则、Easylist、EasylistChina、EasyPrivacy、CJX’sAnnoyance，以及补充的一些规则；</li><li>ad-mo.txt：合并自 Easylist、EasylistChina、EasyPrivacy、CJX’sAnnoyance；</li><li>ad.txt：[推荐移动端] 合并自乘风视频广告过滤规则、EasylistChina、EasylistLite、CJX’sAnnoyance，以及补充的一些规则；</li><li>ad2.txt：合并自乘风视频广告过滤规则、EasylistChina、EasylistLite、CJX’sAnnoyance；</li><li>ad3.txt：合并自乘风视频广告过滤规则、EasylistChina、EasylistLite、CJX’sAnnoyance、EasyPrivacy；</li><li>ad-edentw.txt：合并自 Adblock Warning Removal List、ABP filters、anti-adblock-killer-filters。</li></ol><p>1.ad-pc.txt：[推荐桌面端] 合并自乘风视频广告过滤规则、Easylist、EasylistChina、EasyPrivacy、CJX’sAnnoyance，以及补充的一些规则；</p><p>国内源 1：<a href="https://halflife.coding.net/p/list/d/list/git/raw/master/ad-pc.txt" target="_blank" rel="noopener">coding</a><br>国内源 2：<a href="https://gitee.com/halflife/list/raw/master/ad-pc.txt" target="_blank" rel="noopener">gitee</a><br>国外源 1：<a href="https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad-pc.txt" target="_blank" rel="noopener">jsdelivr</a><br>国外源 2：<a href="https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad-pc.txt" target="_blank" rel="noopener">github</a></p><p>2.ad-mo.txt：合并自 Easylist、EasylistChina、EasyPrivacy、CJX’sAnnoyance；</p><p>国内源 1：<a href="https://halflife.coding.net/p/list/d/list/git/raw/master/ad-mo.txt" target="_blank" rel="noopener">coding</a><br>国内源 2：<a href="https://gitee.com/halflife/list/raw/master/ad-mo.txt" target="_blank" rel="noopener">gitee</a><br>国外源 1：<a href="https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad-mo.txt" target="_blank" rel="noopener">jsdelivr</a><br>国外源 2：<a href="https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad-mo.txt" target="_blank" rel="noopener">github</a></p><p>3.ad.txt：【推荐】合并自乘风视频广告过滤规则、EasylistChina、EasylistLite、CJX’sAnnoyance，以及补充的一些规则；</p><p>国内源 1：<a href="https://halflife.coding.net/p/list/d/list/git/raw/master/ad.txt" target="_blank" rel="noopener">coding</a><br>国内源 2：<a href="https://gitee.com/halflife/list/raw/master/ad.txt" target="_blank" rel="noopener">gitee</a><br>国外源 1：<a href="https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad.txt" target="_blank" rel="noopener">jsdelivr</a><br>国外源 2：<a href="https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad.txt" target="_blank" rel="noopener">github</a></p><p>4.ad2.txt：合并自乘风视频广告过滤规则、EasylistChina、EasylistLite、CJX’sAnnoyance；</p><p>国内源 1：<a href="https://halflife.coding.net/p/list/d/list/git/raw/master/ad2.txt" target="_blank" rel="noopener">coding</a><br>国内源 2：<a href="https://gitee.com/halflife/list/raw/master/ad2.txt" target="_blank" rel="noopener">gitee</a><br>国外源 1：<a href="https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad2.txt" target="_blank" rel="noopener">jsdelivr</a><br>国外源 2：<a href="https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad2.txt" target="_blank" rel="noopener">github</a></p><p>5.ad3.txt：合并自乘风视频广告过滤规则、EasylistChina、EasylistLite、CJX’sAnnoyance、EasyPrivacy；</p><p>国内源 1：<a href="https://halflife.coding.net/p/list/d/list/git/raw/master/ad3.txt" target="_blank" rel="noopener">coding</a><br>国内源 2：<a href="https://gitee.com/halflife/list/raw/master/ad3.txt" target="_blank" rel="noopener">gitee</a><br>国外源 1：<a href="https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad3.txt" target="_blank" rel="noopener">jsdelivr</a><br>国外源 2：<a href="https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad3.txt" target="_blank" rel="noopener">github</a></p><p>6.ad-edentw.txt：合并自 Adblock Warning Removal List、ABP filters、anti-adblock-killer-filters。</p><p>国内源 1：<a href="https://halflife.coding.net/p/list/d/list/git/raw/master/ad-edentw.txt" target="_blank" rel="noopener">coding</a><br>国内源 2：<a href="https://gitee.com/halflife/list/raw/master/ad-edentw.txt" target="_blank" rel="noopener">gitee</a><br>国外源 1：<a href="https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad-edentw.txt" target="_blank" rel="noopener">jsdelivr</a><br>国外源 2：<a href="https://raw.githubusercontent.com/o0HalfLife0o/list/master/ad-edentw.txt" target="_blank" rel="noopener">github</a></p><h2 id="anti-AD"><a href="#anti-AD" class="headerlink" title="anti-AD"></a>anti-AD</h2><p>致力于成为中文区命中率最高的广告过滤列表，实现精确的广告屏蔽和隐私保护。</p><p><a href="https://anti-ad.net/" target="_blank" rel="noopener">https://anti-ad.net/</a></p><p>anti-AD 致力于成为中文区命中率最高的广告过滤列表，实现精确的广告屏蔽和隐私保护。现已支持 AdGuardHome，dnsmasq， Surge，Pi-Hole 等优秀的网络组件。</p><p>使用 anti-AD 能够屏蔽广告域名，能屏蔽电视盒子广告，屏蔽 app 内置广告，同时屏蔽了一些日志收集、大数据统计等涉及个人隐私信息的站点，能够保护个人隐私不被偷偷上传。</p><p>本工具是通过域名解析层（DNS 服务）来屏蔽广告和保护隐私的，其将各大著名的 hosts，ad filter lists，adblock list 等的列表进行合并去重，再进行一系列的抽象化，例如主动剔除失效域名、easylist 优化模糊匹配、增强的黑白名单机制等措施，最终生成期望的高命中率列表。</p><p>不同格式的 <strong> 过滤列表文件 </strong> 会定期自动更新，其分别用于不同服务中的广告过滤规则:</p><ul><li><a href="https://anti-ad.net/anti-ad-for-dnsmasq.conf" target="_blank" rel="noopener">https://anti-ad.net/anti-ad-for-dnsmasq.conf</a></li><li><a href="https://anti-ad.net/easylist.txt" target="_blank" rel="noopener">https://anti-ad.net/easylist.txt</a></li><li><a href="https://anti-ad.net/domains.txt" target="_blank" rel="noopener">https://anti-ad.net/domains.txt</a></li><li><a href="https://anti-ad.net/surge.txt" target="_blank" rel="noopener">https://anti-ad.net/surge.txt</a></li><li><a href="https://anti-ad.net/surge2.txt" target="_blank" rel="noopener">https://anti-ad.net/surge2.txt</a>（据说更节省内存）</li><li><a href="https://anti-ad.net/anti-ad-for-smartdns.conf" target="_blank" rel="noopener">https://anti-ad.net/anti-ad-for-smartdns.conf</a></li><li><a href="https://anti-ad.net/adguard.txt" target="_blank" rel="noopener">https://anti-ad.net/adguard.txt</a>(adguard 专用规则)</li></ul><p>生成这些文件的脚本项目也已在 <strong><a href="https://github.com/privacy-protection-tools/anti-AD" target="_blank" rel="noopener">GitHub</a> 中开源 </strong>，欢迎 star！欢迎 fork！也欢迎 issue！</p><h2 id="AdGuardHome"><a href="#AdGuardHome" class="headerlink" title="AdGuardHome"></a>AdGuardHome</h2><blockquote><p>如果你动手能力比较强，可以考虑自己搭建开源免费的 AdGuardHome</p></blockquote><p>AdGuard Home is a network-wide software for blocking ads &amp; tracking. After you set it up, it’ll cover ALL your home devices, and you don’t need any client-side software for that.</p><p>It operates as a DNS server that re-routes tracking domains to a “black hole”, thus preventing your devices from connecting to those servers. It’s based on software we use for our public <a href="https://adguard-dns.io/" target="_blank" rel="noopener">AdGuard DNS</a> servers, and both share a lot of code.</p><p><a href="https://adguard.com/adguard-home.html" target="_blank" rel="noopener">https://adguard.com/adguard-home.html</a></p><p><a href="https://github.com/AdguardTeam/AdGuardHome" target="_blank" rel="noopener">https://github.com/AdguardTeam/AdGuardHome</a></p><p><a href="https://camo.githubusercontent.com/c6223645832b66d312f31eecbf833e23f95e363198d83de29438db55d01c8eca/68747470733a2f2f63646e2e6164746964792e6f72672f7075626c69632f416467756172642f436f6d6d6f6e2f616467756172645f686f6d652e676966" target="_blank" rel="noopener"></a></p><p>AdGuard 评测：可以说是 mac 上最好用的广告拦截器？iOS 上也是<br><a href="https://blog.zhheo.com/p/75ac3fd2.html" target="_blank" rel="noopener">https://blog.zhheo.com/p/75ac3fd2.html</a></p><p>Mac 搭建 DNS 服务器，电脑手机 iOS 去广告，AdGuardHome 本地搭建教程<br><a href="https://blog.zhheo.com/p/8e295a09.html" target="_blank" rel="noopener">https://blog.zhheo.com/p/8e295a09.html</a></p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://sspai.com/post/56617" target="_blank" rel="noopener">想获得「干净」的网页浏览体验？你需要这份全平台去广告指南</a></p><p><a href="https://wsgzao.github.io/post/chrome-extensions/">Google Chrome 浏览器插件和油猴脚本推荐</a></p><p><a href="https://filterlists.com/" target="_blank" rel="noopener">FilterLists</a></p>]]></content>
    
    <summary type="html">
    
      AdGuard过滤规则分享
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>SRE 介绍和学习面试资料分享</title>
    <link href="https://wsgzao.github.io/post/sre/"/>
    <id>https://wsgzao.github.io/post/sre/</id>
    <published>2022-07-28T08:31:24.000Z</published>
    <updated>2022-08-07T18:54:05.110Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前分享过 DevOps 但一直忘记补 SRE 相关的信息，其实两者本质没有太多区别，都是运维。</p><ul><li>按运维阶段划分<ul><li>人肉运维 -&gt; 脚本运维 -&gt; 平台运维 -&gt; 智能运维</li></ul></li><li>按技术栈来划分<ul><li>物理机堆硬件 -&gt; x86 虚拟化 -&gt; 私有云 + 公有云 -&gt; 云原生</li></ul></li></ul><p>本文主要记录一些 SRE 的背景和学习面试资料，方便需要时串起来。</p><hr><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 07 月 28 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/sre/">https://wsgzao.github.io/post/sre/</a></p><hr><h2 id="SRE-简介"><a href="#SRE-简介" class="headerlink" title="SRE 简介"></a>SRE 简介</h2><p>SRE 从字面意义来看是 Google 技术 VP <a href="https://www.crunchbase.com/person/benjamin-treynor-sloss" target="_blank" rel="noopener">Ben Treynor Sloss</a> 定义的一个岗位，全名叫 Site Reliability Engineering，翻译过来就是网站可靠性工程 (师)。然而在我看来他不仅仅是一份工作，反而是一套服务保障体系。</p><h2 id="为什么要有-SRE？"><a href="#为什么要有-SRE？" class="headerlink" title="为什么要有 SRE？"></a>为什么要有 SRE？</h2><p>为什么会出现 SRE 这个岗位呢？这就要从大名鼎鼎的 <a href="https://en.wikipedia.org/wiki/DevOps" target="_blank" rel="noopener">DevOps</a> 说起了，这个是 Google 高级研发总监 Melody Meckfessel 在 2017 年提出的理论体系，这套体系是通过构建一些列 DevOps 工具链和标准把研发过程中的各个角色高效整合在一起，高效的产出稳定的交付结果。这个体系打破了研发与运维的边界，使研发期望的构建更多特性而运维期望的不要引入太多的不稳定性的目标合二为一。</p><p>DevOps 解决了高效生产稳定服务的流程，使服务的生产迭代周期进一步的缩短。但是随着各个服务的搭建，越来越多的服务都在持续演进着，然而运维维护服务的工作也就越来越多，线上的不稳定状态也就越来越多。那么如何解决这个问题呢？是由开发人员时刻关注着自己的服务么？那整体架构的稳定性又如何保证呢？</p><p>由此就产生了 SRE。SRE 的职责就是负责整体站点（服务）的稳定性。然而保证稳定性一定不是在出现问题是解决问题，而是体系化的方式观测与避免问题。这就是我所理解的 SRE 体系。</p><p><a href="https://sre.google/" target="_blank" rel="noopener">https://sre.google/</a><br><a href="https://www.googblogs.com/sre-vs-devops-competing-standards-or-close-friends/" target="_blank" rel="noopener">https://www.googblogs.com/sre-vs-devops-competing-standards-or-close-friends/</a><br><a href="https://sre.google/sre-book/table-of-contents/" target="_blank" rel="noopener">https://sre.google/sre-book/table-of-contents/</a><br><a href="https://linkedin.github.io/school-of-sre/" target="_blank" rel="noopener">https://linkedin.github.io/school-of-sre/</a></p><h2 id="DevOps-Roadmap"><a href="#DevOps-Roadmap" class="headerlink" title="DevOps Roadmap"></a>DevOps Roadmap</h2><p>关于 DevOps Roadmap 之前也分享过，保持终身学习的态度吧</p><p><a href="https://roadmap.sh/" target="_blank" rel="noopener">https://roadmap.sh/</a><br><a href="https://roadmap.sh/devops" target="_blank" rel="noopener">https://roadmap.sh/devops</a></p><p><img src="https://roadmap.sh/roadmaps/devops.png" alt></p><h2 id="Agile-and-Scrum"><a href="#Agile-and-Scrum" class="headerlink" title="Agile and Scrum"></a>Agile and Scrum</h2><p>Agile Product Ownership in a nutshell<br><a href="https://blog.crisp.se/2012/10/25/henrikkniberg/agile-product-ownership-in-a-nutshell" target="_blank" rel="noopener">https://blog.crisp.se/2012/10/25/henrikkniberg/agile-product-ownership-in-a-nutshell</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202207281617861.png" alt></p><p>Introduction to Scrum - 7 Minutes<br><a href="https://www.youtube.com/watch?v=9TycLR0TqFA" target="_blank" rel="noopener">https://www.youtube.com/watch?v=9TycLR0TqFA</a></p><p>凤凰项目 - The Phoenix Project<br><a href="https://m.douban.com/book/subject/26644070/" target="_blank" rel="noopener">https://m.douban.com/book/subject/26644070/</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202207281618938.png" alt></p><h2 id="Network-TCP-IP-and-OSI"><a href="#Network-TCP-IP-and-OSI" class="headerlink" title="Network TCP/IP and OSI"></a>Network TCP/IP and OSI</h2><p><a href="https://community.fs.com/blog/tcpip-vs-osi-whats-the-difference-between-the-two-models.html" target="_blank" rel="noopener">https://community.fs.com/blog/tcpip-vs-osi-whats-the-difference-between-the-two-models.html</a></p><p><a href="http://www.52im.net/thread-180-1-1.html" target="_blank" rel="noopener">http://www.52im.net/thread-180-1-1.html</a></p><p><a href="https://zqlxtt.cn/2020/09/23/tcpip-overview/" target="_blank" rel="noopener">https://zqlxtt.cn/2020/09/23/tcpip-overview/</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202207281615158.png" alt><br><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202207281615561.png" alt><br><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202207281614362.png" alt></p><h2 id="System-Design"><a href="#System-Design" class="headerlink" title="System Design"></a>System Design</h2><p>The System Design Primer<br><a href="https://github.com/donnemartin/system-design-primer" target="_blank" rel="noopener">https://github.com/donnemartin/system-design-primer</a></p><p><img src="https://github.com/donnemartin/system-design-primer/blob/master/images/jj3A5N8.png" alt></p><p>What happens when you type google.com into your browser’s address box and press enter?<br><a href="https://github.com/alex/what-happens-when" target="_blank" rel="noopener">https://github.com/alex/what-happens-when</a><br><a href="https://4ark.me/post/b6c7c0a2.html" target="_blank" rel="noopener">https://4ark.me/post/b6c7c0a2.html</a></p><h2 id="Coding"><a href="#Coding" class="headerlink" title="Coding"></a>Coding</h2><p>LeetCode<br><a href="https://leetcode.com/" target="_blank" rel="noopener">https://leetcode.com/</a><br><a href="https://leetcode.com/discuss/interview-question" target="_blank" rel="noopener">https://leetcode.com/discuss/interview-question</a></p><p>LeetCode solutions in any programming language | 多种编程语言实现 LeetCode、《剑指 Offer（第 2 版）》、《程序员面试金典（第 6 版）》题解<br><a href="https://leetcode.cn/" target="_blank" rel="noopener">https://leetcode.cn/</a><br><a href="https://github.com/doocs/leetcode" target="_blank" rel="noopener">https://github.com/doocs/leetcode</a></p><p>labuladong 算法小抄<br><a href="https://github.com/labuladong/fucking-algorithm" target="_blank" rel="noopener">https://github.com/labuladong/fucking-algorithm</a></p><p>代码随想录<br><a href="https://www.programmercarl.com/" target="_blank" rel="noopener">https://www.programmercarl.com/</a></p><p>小浩算法<br><a href="https://github.com/geekxh/hello-algorithm" target="_blank" rel="noopener">https://github.com/geekxh/hello-algorithm</a></p><h2 id="八股文"><a href="#八股文" class="headerlink" title="八股文"></a>八股文</h2><blockquote><p>什么是八股文？八股文不是死东西，八股文本应该指计算机基础知识，考验的是面试者基础能力、广度以及深度，大厂面试不会很重视死八股，往往是很灵活的分析。</p></blockquote><p>计算机网络常见知识点 &amp; 面试题<br><a href="https://javaguide.cn/cs-basics/network/other-network-questions.html" target="_blank" rel="noopener">https://javaguide.cn/cs-basics/network/other-network-questions.html</a></p><p>操作系统常见面试题总结<br><a href="https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-01.html" target="_blank" rel="noopener">https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-01.html</a></p><p>Linux 基础知识总结<br><a href="https://javaguide.cn/cs-basics/operating-system/linux-intro.html" target="_blank" rel="noopener">https://javaguide.cn/cs-basics/operating-system/linux-intro.html</a></p><h2 id="职级和薪资范围评估"><a href="#职级和薪资范围评估" class="headerlink" title="职级和薪资范围评估"></a>职级和薪资范围评估</h2><p><a href="https://www.levels.fyi/" target="_blank" rel="noopener">https://www.levels.fyi/</a></p>]]></content>
    
    <summary type="html">
    
      SRE介绍和学习面试资料分享
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>kubeconfig 多配置文件切换工具推荐</title>
    <link href="https://wsgzao.github.io/post/kubeconfig/"/>
    <id>https://wsgzao.github.io/post/kubeconfig/</id>
    <published>2022-05-18T02:59:49.000Z</published>
    <updated>2022-05-19T03:19:40.588Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着 Kubernetes 越来越流行，不管大公司还是小公司都往 Kubernetes 迁移，每个公司最少有两套集群（测试和生产），但是多个集群就有多个 Kubeconfig 用户授权文件。虽然官方文档中有介绍多个 Kubeconfig 文件合并成一个 Kubeconfig，但是对于一些新手来说，看得不是很明白。如果需要从本地计算机连接访问 Kubernetes 集群，需要下载 kubectl 和获取集群访问凭证，但如果有多个 k8s 集群通过 2 个神器就可以做到轻松切换不同的 kubeconfig 环境，这里推荐 <code>kubecm</code> 和 <code>k8slens</code></p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 05 月 18 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/kubeconfig/">https://wsgzao.github.io/post/kubeconfig/</a></p><hr><h2 id="安装-kubectl"><a href="#安装-kubectl" class="headerlink" title="安装 kubectl"></a>安装 kubectl</h2><p><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener">https://kubernetes.io/docs/tasks/tools/</a></p><p><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/" target="_blank" rel="noopener">https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl -LO <span class="string">"https://dl.k8s.io/<span class="variable">$(curl -L -s https://dl.k8s.io/release/stable.txt)</span>/bin/linux/amd64/kubectl.sha256"</span></span><br><span class="line">sudo install -o root -g root -m 0755 kubectl /usr/<span class="built_in">local</span>/bin/kubectl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># If you do not have root access on the target system, you can still install kubectl to the ~/.local/bin directory:</span></span><br><span class="line">chmod +x kubectl</span><br><span class="line">mkdir -p ~/.<span class="built_in">local</span>/bin</span><br><span class="line">mv ./kubectl ~/.<span class="built_in">local</span>/bin/kubectl</span><br><span class="line"><span class="comment"># and then append (or prepend) ~/.local/bin to $PATH</span></span><br></pre></td></tr></table></figure><h2 id="kubeconfig"><a href="#kubeconfig" class="headerlink" title="kubeconfig"></a>kubeconfig</h2><p><a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/</a></p><p>Kubeconfig 用途</p><p>kubectl 命令行工具通过 kubeconfig 文件的配置来选择集群以及集群 API Server 通信的所有信息。kubeconfig 文件用来保存关于集群用户、命名空间和身份验证机制的信息。默认情况下 kubectl 读取 $HOME/.kube/config 文件，也可以通过设置环境变量 KUBECONFIG 或者 –kubeconfig 指定其他的配置文件。</p><p>Kubeconfig 文件结构</p><p>kubeconfig 文件主要由下面几部分构成：</p><ul><li>集群参数</li><li>用户参数</li><li>上下文参数</li><li>当前上下文</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Config</span><br><span class="line">preferences: &#123;&#125;</span><br><span class="line"></span><br><span class="line">clusters: # 集群参数 </span><br><span class="line">- cluster:</span><br><span class="line">  name: &#123;cluster-name&#125;</span><br><span class="line"></span><br><span class="line">users: # 用户参数 </span><br><span class="line">- name: &#123;user-name&#125;</span><br><span class="line"></span><br><span class="line">contexts: # 上下文参数 </span><br><span class="line">- context:</span><br><span class="line">    cluster: &#123;cluster-name&#125;</span><br><span class="line">    user: &#123;user-name&#125;</span><br><span class="line">  name: kubernetes # 集群上下文名称 </span><br><span class="line">current-context: kubernetes # 当前上下文 </span><br></pre></td></tr></table></figure><h2 id="kubecm"><a href="#kubecm" class="headerlink" title="kubecm"></a>kubecm</h2><p><a href="https://github.com/sunny0826/kubecm" target="_blank" rel="noopener">https://github.com/sunny0826/kubecm</a><br><a href="https://kubecm.cloud/#/zh-cn/install" target="_blank" rel="noopener">https://kubecm.cloud/#/zh-cn/install</a></p><p>通过 kubecm 工具合并多个 kubeconfig 文件</p><p>kubecm 安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install kubecm</span></span><br><span class="line"><span class="comment"># https://github.com/sunny0826/kubecm/releases</span></span><br><span class="line"><span class="built_in">export</span> VERSION=<span class="string">"0.16.4"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># linux x86_64</span></span><br><span class="line">curl -Lo kubecm.tar.gz https://github.com/sunny0826/kubecm/releases/download/v<span class="variable">$&#123;VERSION&#125;</span>/kubecm_<span class="variable">$&#123;VERSION&#125;</span>_Linux_x86_64.tar.gz</span><br><span class="line"><span class="comment"># macos</span></span><br><span class="line">curl -Lo kubecm.tar.gz https://github.com/sunny0826/kubecm/releases/download/v<span class="variable">$&#123;VERSION&#125;</span>/kubecm_<span class="variable">$&#123;VERSION&#125;</span>_Darwin_x86_64.tar.gz</span><br><span class="line">brew install kubecm</span><br><span class="line"></span><br><span class="line"><span class="comment"># windows</span></span><br><span class="line">curl -Lo kubecm.tar.gz https://github.com/sunny0826/kubecm/releases/download/v<span class="variable">$&#123;VERSION&#125;</span>/kubecm_<span class="variable">$&#123;VERSION&#125;</span>_Windows_x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># linux &amp; macos</span></span><br><span class="line">tar -zxvf kubecm.tar.gz kubecm</span><br><span class="line"><span class="built_in">cd</span> kubecm</span><br><span class="line">sudo mv kubecm /usr/<span class="built_in">local</span>/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment"># merge and generate kubeconfig</span></span><br><span class="line"><span class="comment"># https://kubecm.cloud/#/en-us/cli/kubecm_add</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把需要合并的 Kubeconfig 文件放到 kubeconfig 目录下，执行命令后会在当前路径下产生一个新的 kubeconfig 文件 </span></span><br><span class="line">kubecm merge -f kubeconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># replace $HOME/.kube/config</span></span><br><span class="line">kubecm merge -f kubeconfig -c</span><br><span class="line"></span><br><span class="line"><span class="comment"># switch k8s cluster</span></span><br><span class="line">kubecm switch</span><br><span class="line"></span><br><span class="line"><span class="comment"># list kubeconfig</span></span><br><span class="line">kubecm list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Manage your kubeconfig more easily.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">██   ██ ██    ██ ██████  ███████  ██████ ███    ███</span><br><span class="line">██  ██  ██    ██ ██   ██ ██      ██      ████  ████</span><br><span class="line">█████   ██    ██ ██████  █████   ██      ██ ████ ██</span><br><span class="line">██  ██  ██    ██ ██   ██ ██      ██      ██  ██  ██</span><br><span class="line">██   ██  ██████  ██████  ███████  ██████ ██      ██</span><br><span class="line"></span><br><span class="line"> Tips  Find more information at: https://kubecm.cloud</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  kubecm [<span class="built_in">command</span>]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  add         Add KubeConfig to <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  <span class="built_in">alias</span>       Generate <span class="built_in">alias</span> <span class="keyword">for</span> all contexts</span><br><span class="line">  clear       Clear lapsed context, cluster and user</span><br><span class="line">  completion  Generates bash/zsh completion scripts</span><br><span class="line">  create      Create new KubeConfig(experiment)</span><br><span class="line">  delete      Delete the specified context from the kubeconfig</span><br><span class="line">  <span class="built_in">help</span>        Help about any <span class="built_in">command</span></span><br><span class="line">  list        List KubeConfig</span><br><span class="line">  merge       Merge the KubeConfig files <span class="keyword">in</span> the specified directory</span><br><span class="line">  namespace   Switch or change namespace interactively</span><br><span class="line">  rename      Rename the contexts of kubeconfig</span><br><span class="line">  switch      Switch Kube Context interactively</span><br><span class="line">  version     Print version info</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">      --config string   path of kubeconfig (default <span class="string">"<span class="variable">$HOME</span>/.kube/config"</span>)</span><br><span class="line">  -h, --<span class="built_in">help</span>            <span class="built_in">help</span> <span class="keyword">for</span> kubecm</span><br><span class="line"></span><br><span class="line">Use <span class="string">"kubecm [command] --help"</span> <span class="keyword">for</span> more information about a <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure><p><img src="https://asciinema.org/a/389595.svg" alt></p><h2 id="k8slens"><a href="#k8slens" class="headerlink" title="k8slens"></a>k8slens</h2><p>GUI 界面切换 kubeconfig 就更强大了，自己探索吧</p><p><a href="https://k8slens.dev/" target="_blank" rel="noopener">https://k8slens.dev/</a><br><a href="https://docs.k8slens.dev/main/" target="_blank" rel="noopener">https://docs.k8slens.dev/main/</a></p><blockquote><p>Lens - The Kubernetes IDE</p></blockquote><p>Lens - The Kubernetes IDE (“Lens IDE”) is a distribution of the OpenLens repository with Team Lens specific customizations released under a traditional <a href="https://k8slens.dev/licenses/eula" target="_blank" rel="noopener">EULA</a>.</p><p>Lens IDE provides the full situational awareness for everything that runs in Kubernetes. It’s lowering the barrier of entry for people just getting started and radically improving productivity for people with more experience.</p><p>Lens IDE a standalone application for MacOS, Windows and Linux operating systems. You can download it free of charge for Windows, MacOS, and Linux from <a href="https://k8slens.dev" target="_blank" rel="noopener">Lens IDE website</a>.</p><p><img src="https://github.com/lensapp/lens/raw/master/.github/screenshot.png" alt></p>]]></content>
    
    <summary type="html">
    
      kubeconfig多配置文件切换工具推荐
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Docker 从入门到实践</title>
    <link href="https://wsgzao.github.io/post/docker/"/>
    <id>https://wsgzao.github.io/post/docker/</id>
    <published>2022-05-13T06:59:49.000Z</published>
    <updated>2022-05-13T09:10:42.365Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>把 docker-ce 安装和使用部分先独立抽取出来，关于 Docker 更加深入的理解可以参考文章开头推荐的文章</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 05 月 13 日 - 增加 Docker 离线部署<br>2018 年 10 月 25 日 - 更新大量 Docker 实践操作和精选的 Docker 入门文章<br>2018 年 05 月 21 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/docker/">https://wsgzao.github.io/post/docker/</a></p><p><strong> 扩展阅读 </strong></p><p>Docker - <a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com/</a></p><hr><h2 id="Docker-入门"><a href="#Docker-入门" class="headerlink" title="Docker 入门"></a>Docker 入门</h2><p><a href="https://betacat.online/posts/2019-04-20/docker-in-one-day/" target="_blank" rel="noopener">Docker 一篇通</a></p><p>Docker 入门教程<br><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</a></p><p>Docker 微服务教程<br><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html</a></p><p>Nginx 容器教程<br><a href="http://www.ruanyifeng.com/blog/2018/02/nginx-docker.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/02/nginx-docker.html</a></p><p>DOCKER 从入门到实践<br><a href="https://imnerd.org/docker-in-action.html" target="_blank" rel="noopener">https://imnerd.org/docker-in-action.html</a></p><p>Docker — 从入门到实践<br><a href="https://github.com/yeasy/docker_practice" target="_blank" rel="noopener">https://github.com/yeasy/docker_practice</a></p><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 操作系统版本 </span></span><br><span class="line">cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line"><span class="comment"># 操作系统内核 </span></span><br><span class="line">uname -r</span><br><span class="line">3.10.0-693.21.1.el7.x86_64</span><br><span class="line"><span class="comment"># 硬件架构 </span></span><br><span class="line">uname -m</span><br><span class="line">x86_64</span><br><span class="line"><span class="comment"># docker 版本 </span></span><br><span class="line">docker version</span><br><span class="line"></span><br><span class="line">Client:</span><br><span class="line"> Version:18.03.0-ce</span><br><span class="line"> API version:1.37</span><br><span class="line"> Go version:go1.9.4</span><br><span class="line"> Git commit:0520e24</span><br><span class="line"> Built:Wed Mar 21 23:09:15 2018</span><br><span class="line"> OS/Arch:linux/amd64</span><br><span class="line"> Experimental:<span class="literal">false</span></span><br><span class="line"> Orchestrator:swarm</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:18.03.0-ce</span><br><span class="line">  API version:1.37 (minimum version 1.12)</span><br><span class="line">  Go version:go1.9.4</span><br><span class="line">  Git commit:0520e24</span><br><span class="line">  Built:Wed Mar 21 23:13:03 2018</span><br><span class="line">  OS/Arch:linux/amd64</span><br><span class="line">  Experimental:<span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="部署-Docker"><a href="#部署-Docker" class="headerlink" title="部署 Docker"></a>部署 Docker</h2><h3 id="使用阿里云加速器加快获取-docker-官方的镜像"><a href="#使用阿里云加速器加快获取-docker-官方的镜像" class="headerlink" title="使用阿里云加速器加快获取 docker 官方的镜像"></a>使用阿里云加速器加快获取 docker 官方的镜像</h3><p>步骤一：如果没有阿里云账号，需要注册阿里云开发账号</p><p><a href="https://dev.aliyun.com/" target="_blank" rel="noopener">https://dev.aliyun.com/</a></p><p>步骤二：进入加速器页面获取加速信息</p><p><a href="https://cr.console.aliyun.com/#/accelerator" target="_blank" rel="noopener">https://cr.console.aliyun.com/#/accelerator</a></p><h3 id="安装／升级你的-Docker-客户端"><a href="#安装／升级你的-Docker-客户端" class="headerlink" title="安装／升级你的 Docker 客户端"></a>安装／升级你的 Docker 客户端</h3><p>推荐安装 1.10.0 以上版本的 Docker 客户端，参考文档 docker-ce<br><a href="https://yq.aliyun.com/articles/110806?spm=5176.8351553.0.0.6a721991ZTvV8S" target="_blank" rel="noopener">https://yq.aliyun.com/articles/110806?spm=5176.8351553.0.0.6a721991ZTvV8S</a></p><blockquote><p>Docker CE 镜像源站</p></blockquote><p>使用官方安装脚本自动安装</p><pre><code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</code></pre><p>CentOS 7 (使用 yum 进行安装)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step 1: 安装必要的一些系统工具 </span></span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="comment"># Step 2: 添加软件源信息 </span></span><br><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># Step 3: 更新并安装 Docker-CE</span></span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum -y install docker-ce</span><br><span class="line"><span class="comment"># Step 4: 开启 Docker 服务 </span></span><br><span class="line">sudo service docker start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：</span></span><br><span class="line"><span class="comment"># 官方软件源默认启用了最新的软件，您可以通过编辑软件源的方式获取各个版本的软件包。例如官方并没有将测试版本的软件源置为可用，你可以通过以下方式开启。同理可以开启各种测试版本等。</span></span><br><span class="line"><span class="comment"># vim /etc/yum.repos.d/docker-ce.repo</span></span><br><span class="line"><span class="comment">#   将 [docker-ce-test] 下方的 enabled=0 修改为 enabled=1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 安装指定版本的 Docker-CE:</span></span><br><span class="line"><span class="comment"># Step 1: 查找 Docker-CE 的版本:</span></span><br><span class="line"><span class="comment"># yum list docker-ce.x86_64 --showduplicates | sort -r</span></span><br><span class="line"><span class="comment">#   Loading mirror speeds from cached hostfile</span></span><br><span class="line"><span class="comment">#   Loaded plugins: branch, fastestmirror, langpacks</span></span><br><span class="line"><span class="comment">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span></span><br><span class="line"><span class="comment">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span></span><br><span class="line"><span class="comment">#   docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span></span><br><span class="line"><span class="comment">#   Available Packages</span></span><br><span class="line"><span class="comment"># Step2 : 安装指定版本的 Docker-CE: (VERSION 例如上面的 17.03.0.ce.1-1.el7.centos)</span></span><br><span class="line"><span class="comment"># sudo yum -y install docker-ce-[VERSION]</span></span><br></pre></td></tr></table></figure><h3 id="如何配置镜像加速器"><a href="#如何配置镜像加速器" class="headerlink" title="如何配置镜像加速器"></a>如何配置镜像加速器</h3><p>针对 Docker 客户端版本大于 1.10.0 的用户</p><p>您可以通过修改 daemon 配置文件 / etc/docker/daemon.json 来使用加速器：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://ffia7t7n.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></p><h3 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用阿里云作加速 </span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/ &amp;&amp; rm -f *.repo</span><br><span class="line">wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">yum remove -y docker docker-common docker-selinux docker-engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 docker 官方源，国内下载较慢建议切换为阿里云加速 </span></span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> docker-ce-edge</span><br><span class="line">yum list docker-ce --showduplicates | sort -r |grep stable</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 docker，可以选择制定版本 </span></span><br><span class="line">yum install -y docker-ce</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">mkdir -p /etc/docker</span><br><span class="line">tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://ffia7t7n.mirror.aliyuncs.com"</span>]                <span class="comment"># 为了后期方便添加阿里云的加速镜像站 </span></span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="测试-Docker-服务正常"><a href="#测试-Docker-服务正常" class="headerlink" title="测试 Docker 服务正常"></a>测试 Docker 服务正常</h3><p>例行跑个 hello world 测试下 Docker 服务是否正常</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试 docker</span></span><br><span class="line">docker run hello-world</span><br><span class="line">Unable to find image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">ca4f61b1923c: Pull complete </span><br><span class="line">Digest: sha256:97ce6fa4b6cdc0790cda65fe7290b74cfebd9fa0c9b8c38e979330d547d22ce1</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://cloud.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/engine/userguide/</span><br></pre></td></tr></table></figure><h3 id="安装-docker-compose"><a href="#安装-docker-compose" class="headerlink" title="安装 docker-compose"></a>安装 docker-compose</h3><pre><code>yum install -y docker-compose</code></pre><h2 id="离线安装-Docker"><a href="#离线安装-Docker" class="headerlink" title="离线安装 Docker"></a>离线安装 Docker</h2><p>先在一台可以联网的相同操作系统环境下下载离线安装包，然后内网服务器构建本地 yum 源，最后安装 docker</p><h3 id="下载离线安装包"><a href="#下载离线安装包" class="headerlink" title="下载离线安装包"></a>下载离线安装包</h3><blockquote><p>在可以联网的机器上下载 rpm 包</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 yum-plugin-downloadonly 插件 </span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载 createrepo 相关 rpm 到指定目录，构建本地源之前需要在本地安装 createrepo，用于构建本地源 </span></span><br><span class="line">mkdir -p /tmp/repo/createrepo/</span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/repo/createrepo/ createrepo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载 docker 相关 rpm 到指定目录 </span></span><br><span class="line">mkdir -p /tmp/repo/docker-ce/</span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/repo/docker-ce/ docker-ce</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载 docker-compose 相关 rpm 到指定目录 </span></span><br><span class="line">mkdir -p /tmp/repo/docker-compose/</span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/repo/docker-compose/ docker-compose</span><br></pre></td></tr></table></figure><h3 id="构建本地-yum-源"><a href="#构建本地-yum-源" class="headerlink" title="构建本地 yum 源"></a>构建本地 yum 源</h3><p>将 docker 的 rpm 包拷贝到需要安装 docker 的局域网集群上面，例如：<br>/tmp/repo/docker-ce/</p><p>将 docker 的 rpm 包拷贝到需要安装 docker 的局域网集群上面，例如：<br>/tmp/repo/createrepo/</p><p>构建本地 yum 源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 createrepo</span></span><br><span class="line">rpm -ivh /tmp/repo/createrepo/*.rpm</span><br><span class="line"><span class="comment"># 备份 / etc/yum.repos.d 目录下文件 </span></span><br><span class="line">ls /etc/yum.repos.d | xargs -I&#123;&#125; mv /etc/yum.repos.d/&#123;&#125; /etc/yum.repos.d/&#123;&#125;.bk</span><br><span class="line"><span class="comment"># 创建新的 *.repo 文件，如：docker.repo，进行配置 </span></span><br><span class="line">vim docker.repo</span><br><span class="line">[<span class="built_in">local</span>-yum]</span><br><span class="line">name=<span class="built_in">local</span>-yum</span><br><span class="line">baseurl=file:////tmp/repo/docker-ce/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"><span class="comment"># 设置本地源 </span></span><br><span class="line">createrepo -d /tmp/repo/docker-ce/</span><br><span class="line"><span class="comment"># 查看看是否能看到自己构建的本地源 </span></span><br><span class="line">yum repolist</span><br><span class="line"><span class="comment"># 清除缓存 </span></span><br><span class="line">yum clean all</span><br><span class="line"><span class="comment"># 创建缓存 </span></span><br><span class="line">yum makecache</span><br><span class="line"><span class="comment"># 看本地源是否配置成功，通过 yum list 看是否输出了新的 rpm 包，如果能查询到，证明配置成功 </span></span><br><span class="line">yum list | grep docker</span><br><span class="line"><span class="comment"># 离线安装 docker</span></span><br><span class="line">yum install docker -y</span><br></pre></td></tr></table></figure><h2 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker 常用命令"></a>Docker 常用命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动 docker 服务 </span></span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前系统 Docker 信息 </span></span><br><span class="line">docker info</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取 docker 镜像 </span></span><br><span class="line">docker pull image_name</span><br><span class="line"><span class="comment"># 从 Docker hub 上下载某个镜像 </span></span><br><span class="line">docker pull centos:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看宿主机上的镜像，Docker 镜像保存在 / var/lib/docker 目录下:</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">REPOSITORY                      TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mysql                           5.7                 1b30b36ae96a        8 days ago          372MB</span><br><span class="line">zabbix/zabbix-web-nginx-mysql   centos-4.0-latest   8be5f91b2fa1        3 weeks ago         415MB</span><br><span class="line">zabbix/zabbix-server-mysql      centos-4.0-latest   8e5becf45c4e        3 weeks ago         326MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除镜像 </span></span><br><span class="line">docker rmi image_name/image_id</span><br><span class="line">docker rmi zabbix/zabbix-web-nginx-mysql:centos-4.0-latest 或者 docker rmi 8be5f91b2fa1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前有哪些容器正在运行 </span></span><br><span class="line">docker ps</span><br><span class="line"><span class="comment"># 查看所有容器 </span></span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">CONTAINER ID        IMAGE                                             COMMAND                  CREATED             STATUS                       PORTS                           NAMES</span><br><span class="line">b30307ad65be        zabbix/zabbix-web-nginx-mysql:centos-4.0-latest   <span class="string">"docker-entrypoint.sh"</span>   7 days ago          Exited (255) 8 minutes ago   443/tcp, 0.0.0.0:8080-&gt;80/tcp   zabbix-web-nginx-mysql</span><br><span class="line">0ad822cd52b7        zabbix/zabbix-server-mysql:centos-4.0-latest      <span class="string">"docker-entrypoint.sh"</span>   7 days ago          Exited (255) 8 minutes ago   0.0.0.0:10051-&gt;10051/tcp        zabbix-server-mysql</span><br><span class="line">d01c89a112f7        mysql:5.7                                         <span class="string">"docker-entrypoint.s…"</span>   7 days ago          Exited (255) 8 minutes ago   3306/tcp, 33060/tcp             mysql-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动、停止、重启容器命令：</span></span><br><span class="line">docker start container_name/container_id</span><br><span class="line">docker stop container_name/container_id</span><br><span class="line">docker restart container_name/container_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 后台启动一个容器后，如果想进入到这个容器，可以使用 attach</span></span><br><span class="line">docker attach container_name/container_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除容器 </span></span><br><span class="line">docker rm container_name/container_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器日志 </span></span><br><span class="line">docker logs -f container_name/container_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器 IP 地址 </span></span><br><span class="line">docker inspect container_name/container_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入容器 </span></span><br><span class="line">docker <span class="built_in">exec</span> -it container_name/container_id bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 Docker 容器与宿主机相互传输文件 </span></span><br><span class="line">[root@localhost tmp]<span class="comment"># docker cp --help</span></span><br><span class="line"></span><br><span class="line">Usage:docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</span><br><span class="line">docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span><br><span class="line"></span><br><span class="line">Copy files/folders between a container and the <span class="built_in">local</span> filesystem</span><br><span class="line"></span><br><span class="line">docker cp zabbix_config.sql mysql-server:/tmp</span><br><span class="line">docker cp mysql-server:/tmp/zabbix_config.sql /tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量删除所有已经退出的容器 </span></span><br><span class="line">docker rm -v $(docker ps -aq -f status=exited)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># docker help</span></span><br><span class="line">[root@centos7lined1 wangao]<span class="comment"># docker help</span></span><br><span class="line"></span><br><span class="line">Usage:docker [OPTIONS] COMMAND</span><br><span class="line"></span><br><span class="line">A self-sufficient runtime <span class="keyword">for</span> containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --config string      Location of client config files (default <span class="string">"/root/.docker"</span>)</span><br><span class="line">  -D, --debug              Enable debug mode</span><br><span class="line">  -H, --host list          Daemon socket(s) to connect to</span><br><span class="line">  -l, --<span class="built_in">log</span>-level string   Set the logging level (<span class="string">"debug"</span>|<span class="string">"info"</span>|<span class="string">"warn"</span>|<span class="string">"error"</span>|<span class="string">"fatal"</span>) (default <span class="string">"info"</span>)</span><br><span class="line">      --tls                Use TLS; implied by --tlsverify</span><br><span class="line">      --tlscacert string   Trust certs signed only by this CA (default <span class="string">"/root/.docker/ca.pem"</span>)</span><br><span class="line">      --tlscert string     Path to TLS certificate file (default <span class="string">"/root/.docker/cert.pem"</span>)</span><br><span class="line">      --tlskey string      Path to TLS key file (default <span class="string">"/root/.docker/key.pem"</span>)</span><br><span class="line">      --tlsverify          Use TLS and verify the remote</span><br><span class="line">  -v, --version            Print version information and quit</span><br><span class="line"></span><br><span class="line">Management Commands:</span><br><span class="line">  config      Manage Docker configs</span><br><span class="line">  container   Manage containers</span><br><span class="line">  image       Manage images</span><br><span class="line">  network     Manage networks</span><br><span class="line">  node        Manage Swarm nodes</span><br><span class="line">  plugin      Manage plugins</span><br><span class="line">  secret      Manage Docker secrets</span><br><span class="line">  service     Manage services</span><br><span class="line">  stack       Manage Docker stacks</span><br><span class="line">  swarm       Manage Swarm</span><br><span class="line">  system      Manage Docker</span><br><span class="line">  trust       Manage trust on Docker images</span><br><span class="line">  volume      Manage volumes</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  attach      Attach <span class="built_in">local</span> standard input, output, and error streams to a running container</span><br><span class="line">  build       Build an image from a Dockerfile</span><br><span class="line">  commit      Create a new image from a container<span class="string">'s changes</span></span><br><span class="line"><span class="string">  cp          Copy files/folders between a container and the local filesystem</span></span><br><span class="line"><span class="string">  create      Create a new container</span></span><br><span class="line"><span class="string">  diff        Inspect changes to files or directories on a container'</span>s filesystem</span><br><span class="line">  events      Get real time events from the server</span><br><span class="line">  <span class="built_in">exec</span>        Run a <span class="built_in">command</span> <span class="keyword">in</span> a running container</span><br><span class="line">  <span class="built_in">export</span>      Export a container<span class="string">'s filesystem as a tar archive</span></span><br><span class="line"><span class="string">  history     Show the history of an image</span></span><br><span class="line"><span class="string">  images      List images</span></span><br><span class="line"><span class="string">  import      Import the contents from a tarball to create a filesystem image</span></span><br><span class="line"><span class="string">  info        Display system-wide information</span></span><br><span class="line"><span class="string">  inspect     Return low-level information on Docker objects</span></span><br><span class="line"><span class="string">  kill        Kill one or more running containers</span></span><br><span class="line"><span class="string">  load        Load an image from a tar archive or STDIN</span></span><br><span class="line"><span class="string">  login       Log in to a Docker registry</span></span><br><span class="line"><span class="string">  logout      Log out from a Docker registry</span></span><br><span class="line"><span class="string">  logs        Fetch the logs of a container</span></span><br><span class="line"><span class="string">  pause       Pause all processes within one or more containers</span></span><br><span class="line"><span class="string">  port        List port mappings or a specific mapping for the container</span></span><br><span class="line"><span class="string">  ps          List containers</span></span><br><span class="line"><span class="string">  pull        Pull an image or a repository from a registry</span></span><br><span class="line"><span class="string">  push        Push an image or a repository to a registry</span></span><br><span class="line"><span class="string">  rename      Rename a container</span></span><br><span class="line"><span class="string">  restart     Restart one or more containers</span></span><br><span class="line"><span class="string">  rm          Remove one or more containers</span></span><br><span class="line"><span class="string">  rmi         Remove one or more images</span></span><br><span class="line"><span class="string">  run         Run a command in a new container</span></span><br><span class="line"><span class="string">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span></span><br><span class="line"><span class="string">  search      Search the Docker Hub for images</span></span><br><span class="line"><span class="string">  start       Start one or more stopped containers</span></span><br><span class="line"><span class="string">  stats       Display a live stream of container(s) resource usage statistics</span></span><br><span class="line"><span class="string">  stop        Stop one or more running containers</span></span><br><span class="line"><span class="string">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span></span><br><span class="line"><span class="string">  top         Display the running processes of a container</span></span><br><span class="line"><span class="string">  unpause     Unpause all processes within one or more containers</span></span><br><span class="line"><span class="string">  update      Update configuration of one or more containers</span></span><br><span class="line"><span class="string">  version     Show the Docker version information</span></span><br><span class="line"><span class="string">  wait        Block until one or more containers stop, then print their exit codes</span></span><br></pre></td></tr></table></figure><h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><p>Compose 是 Docker 公司推出的一个工具软件，可以管理多个 Docker 容器组成一个应用。你需要定义一个 YAML 格式的配置文件 docker-compose.yml，写好多个容器之间的调用关系。然后，只要一个命令，就能同时启动 / 关闭这些容器。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查看版本 </span><br><span class="line">docker-compose --version</span><br><span class="line"># 启动所有服务 </span><br><span class="line">docker-compose up</span><br><span class="line"># 关闭所有服务 </span><br><span class="line">docker-compose stop</span><br></pre></td></tr></table></figure><h2 id="Docker-离线环境部署"><a href="#Docker-离线环境部署" class="headerlink" title="Docker 离线环境部署"></a>Docker 离线环境部署</h2><p><a href="https://docs.cyberwatch.fr/deploy/en/2_deploy_cyberwatch/offline/swarm/install_docker.html" target="_blank" rel="noopener">https://docs.cyberwatch.fr/deploy/en/2_deploy_cyberwatch/offline/swarm/install_docker.html</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># install</span><br><span class="line">dpkg -i *.deb</span><br><span class="line">dpkg -i containerd.io_*_amd64.deb</span><br><span class="line">dpkg -i docker-ce-cli_*_amd64.deb</span><br><span class="line">dpkg -i docker-ce_*_amd64.deb</span><br><span class="line"></span><br><span class="line"># check</span><br><span class="line">docker info</span><br><span class="line">docker run --rm hello-world</span><br><span class="line"></span><br><span class="line"># check error log if start failed</span><br><span class="line">journalctl -xeu docker.service</span><br><span class="line"></span><br><span class="line"># remove</span><br><span class="line">apt-get purge docker-ce</span><br><span class="line">apt-get purge docker-ce-cli</span><br><span class="line">apt-get purge containerd.io</span><br><span class="line"></span><br><span class="line"># check</span><br><span class="line">apt list --installed | grep docker</span><br><span class="line">apt list --installed | grep containerd.io</span><br><span class="line"></span><br><span class="line"># clean file</span><br><span class="line">rm -rf /var/lib/docker</span><br><span class="line">rm -rf /var/run/docker</span><br><span class="line">rm -rf /etc/docker</span><br><span class="line">rm -rf /run/docker.sock</span><br><span class="line">rm -rf /var/lib/containerd</span><br><span class="line">rm -rf /run/containerd</span><br><span class="line">rm -rf /opt/containerd</span><br></pre></td></tr></table></figure><h2 id="参考阅读"><a href="#参考阅读" class="headerlink" title="参考阅读"></a>参考阅读</h2><p>docker 命令详解 - <a href="https://github.com/KeKe-Li/docker-directive" target="_blank" rel="noopener">https://github.com/KeKe-Li/docker-directive</a></p><p><a href="https://github.com/yeasy/docker_practice" target="_blank" rel="noopener">Docker — 从入门到实践</a></p>]]></content>
    
    <summary type="html">
    
      Docker从入门到实践
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>CoreDNS 使用指北</title>
    <link href="https://wsgzao.github.io/post/coredns/"/>
    <id>https://wsgzao.github.io/post/coredns/</id>
    <published>2022-05-06T06:59:49.000Z</published>
    <updated>2022-05-06T07:55:36.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CoreDNS 是一个从 Caddy 中 Fork 出来的项目（同时继承了它的链式中间件风格），作为 CNCF 项目中的一员，它的目标是提供一个快速且灵活的 DNS 服务。</p><blockquote><p>CoreDNS - DNS and Service Discovery</p></blockquote><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 05 月 06 日 - 增加 CoreDNS Deployment<br>2018 年 07 月 10 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/coredns/">https://wsgzao.github.io/post/coredns/</a></p><p><strong> 扩展阅读 </strong></p><p>CoreDNS - <a href="https://coredns.io/" target="_blank" rel="noopener">https://coredns.io/</a></p><hr><h2 id="CoreDNS-简介"><a href="#CoreDNS-简介" class="headerlink" title="CoreDNS 简介"></a>CoreDNS 简介</h2><blockquote><p>In Kubernetes 1.11, CoreDNS is the default DNS server.</p></blockquote><p>CoreDNS is a DNS server. It is written in Go. It can be used in a multitude of environments because of its flexibility. CoreDNS is licensed under the Apache License Version 2, and completely open source.<br>Development takes place on Github. Most devs hang out on Slack on the #coredns channel.</p><h2 id="CoreDNS-安装"><a href="#CoreDNS-安装" class="headerlink" title="CoreDNS 安装"></a>CoreDNS 安装</h2><p>直接在 Github 上下载对应执行文件压缩包<br><a href="https://github.com/coredns/coredns/releases" target="_blank" rel="noopener">https://github.com/coredns/coredns/releases</a></p><p>Linux 上下载安装（以官方新版本为基准）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/coredns/coredns/releases/download/v1.1.4/coredns_1.1.4_linux_amd64.tgz</span><br><span class="line">tar xzf coredns_1.1.4_linux_amd64.tgz</span><br><span class="line">mv coredns /usr/<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure><h2 id="CoreDNS-配置"><a href="#CoreDNS-配置" class="headerlink" title="CoreDNS 配置"></a>CoreDNS 配置</h2><p>参考 QuickStart 中的配置<br><a href="https://coredns.io/2017/07/24/quick-start/" target="_blank" rel="noopener">https://coredns.io/2017/07/24/quick-start/</a></p><p>配置文件 Corefile 示例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">. &#123;</span><br><span class="line">    proxy . 223.5.5.5:53 &#123;</span><br><span class="line">        except example.org</span><br><span class="line">        protocol dns</span><br><span class="line">    &#125;</span><br><span class="line">    prometheus     <span class="comment"># enable metrics</span></span><br><span class="line">    errors stdout  <span class="comment"># show errors</span></span><br><span class="line">    <span class="built_in">log</span> stdout     <span class="comment"># show query logs</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">example.org &#123;</span><br><span class="line">    file /etc/coredns/zones/example.org</span><br><span class="line">    prometheus     <span class="comment"># enable metrics</span></span><br><span class="line">    errors stdout  <span class="comment"># show errors</span></span><br><span class="line">    <span class="built_in">log</span> stdout     <span class="comment"># show query logs</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体 Corefile 配置说明请参考文档<br><a href="https://coredns.io/2017/07/23/corefile-explained/" target="_blank" rel="noopener">https://coredns.io/2017/07/23/corefile-explained/</a></p><p>而 / etc/coredns/zones/example.org 的配置文件示例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ORIGIN</span> example.org.</span><br><span class="line">@3600 INSOA sns.dns.icann.org. noc.dns.icann.org. (</span><br><span class="line">2017042745 ; serial</span><br><span class="line">7200       ; refresh (2 hours)</span><br><span class="line">3600       ; retry (1 hour)</span><br><span class="line">1209600    ; expire (2 weeks)</span><br><span class="line">3600       ; minimum (1 hour)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">    3600 IN NS a.iana-servers.net.</span><br><span class="line">3600 IN NS b.iana-servers.net.</span><br><span class="line"></span><br><span class="line">www     IN A     127.0.0.1</span><br><span class="line">        IN AAAA  ::1</span><br><span class="line"></span><br><span class="line">tt      IN A     192.168.2.4</span><br><span class="line">        IN AAAA  ::1</span><br><span class="line">        IN TXT   HelloExampleTest</span><br></pre></td></tr></table></figure><h2 id="CoreDNS-测试"><a href="#CoreDNS-测试" class="headerlink" title="CoreDNS 测试"></a>CoreDNS 测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑本地 nameserver</span></span><br><span class="line">vi /etc/resolv.conf</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑 corefile 文件 </span></span><br><span class="line">vi /etc/coredns/corefile</span><br><span class="line"></span><br><span class="line">coredns:53 &#123;</span><br><span class="line">    errors         <span class="comment"># show errors</span></span><br><span class="line">    <span class="built_in">log</span>            <span class="comment"># enable query logs</span></span><br><span class="line">    zookeeper up_timeout=5 zk_timeout=10 zk_ttl=5 zk_addrs=10.65.200.36:2181,10.65.200.37:2181,10.65.200.138:2181 zk_znode=/dns</span><br><span class="line">    loadbalance round_robin</span><br><span class="line">    cache 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.:53 &#123;</span><br><span class="line">    errors         <span class="comment"># show errors</span></span><br><span class="line">    <span class="built_in">log</span>            <span class="comment"># enable query logs</span></span><br><span class="line">    proxy . /etc/resolv.conf</span><br><span class="line">    loadbalance round_robin</span><br><span class="line">    cache 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 CoreDNS 很简单，命令如下 </span></span><br><span class="line">coredns -conf /etc/coredns/Corefile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 dig 命令测试 </span></span><br><span class="line">https://www.diggui.com/</span><br><span class="line"></span><br><span class="line">dig +short @10.65.200.105 google.com</span><br><span class="line">dig google.com</span><br></pre></td></tr></table></figure><h2 id="CoreDNS-Deployment"><a href="#CoreDNS-Deployment" class="headerlink" title="CoreDNS Deployment"></a>CoreDNS Deployment</h2><p><a href="https://github.com/coredns/deployment" target="_blank" rel="noopener">https://github.com/coredns/deployment</a></p><p>建议使用 systemd 方式部署，方便后续管理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建 coredns.deb 安装包 </span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/coredns/deployment</span><br><span class="line"><span class="built_in">cd</span> deployment</span><br><span class="line">dpkg-buildpackage -us -uc -b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 coredns</span></span><br><span class="line">dpkg -i coredns_1.9.1-0~100_amd64.deb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 / etc/coredns/Corefile 改为以下内容 </span></span><br><span class="line">byted.org:53 &#123;</span><br><span class="line">    errors</span><br><span class="line">    forward . 10.8.8.8</span><br><span class="line">    cache 30</span><br><span class="line">    <span class="built_in">log</span></span><br><span class="line">&#125;</span><br><span class="line">.:53 &#123;</span><br><span class="line">    errors</span><br><span class="line">    forward . /etc/resolv.conf</span><br><span class="line">    cache 30</span><br><span class="line">    <span class="built_in">log</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务 </span></span><br><span class="line">systemctl restart coredns</span><br><span class="line"></span><br><span class="line"><span class="comment"># coredns 日志 </span></span><br><span class="line">tail -f /var/<span class="built_in">log</span>/syslog</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><blockquote><p>CoreDNS Manual</p></blockquote><p><a href="https://coredns.io/manual/toc/" target="_blank" rel="noopener">https://coredns.io/manual/toc/</a></p>]]></content>
    
    <summary type="html">
    
      CoreDNS - DNS and Service Discovery
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>使用 ssh config 作为 ssh 代理轻松管理内网服务器</title>
    <link href="https://wsgzao.github.io/post/ssh-config/"/>
    <id>https://wsgzao.github.io/post/ssh-config/</id>
    <published>2022-04-28T03:18:44.000Z</published>
    <updated>2022-04-28T08:42:59.715Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>企业内部大部分服务器都只有内网，一般可以使用 NAT 方式正向代理访问公网资源。对于 Linux 来说一般通过 ssh 登录服务器，在没有公网 IP 的情况下可以修改 ssh config 配置文件，利用一台可以接入内网并具有公网 IP 的服务器作为代理或者称为 Tunnel 跳板机来管理，可以灵活定制访问规则并优化 ssh 参数让管理更加轻松。</p><blockquote><p>使用 ssh config 作为 ssh 代理轻松管理内网服务器</p></blockquote><hr><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 04 月 27 日 - 增加 SSH 使用小技巧<br>2019 年 01 月 31 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/ssh-config/">https://wsgzao.github.io/post/ssh-config/</a></p><p><strong> 扩展阅读 </strong></p><p>SSH CONFIG FILE -  <a href="https://www.ssh.com/ssh/config/" target="_blank" rel="noopener">https://www.ssh.com/ssh/config/</a></p><hr><h2 id="ssh-config-的配置文件来源"><a href="#ssh-config-的配置文件来源" class="headerlink" title="ssh_config 的配置文件来源"></a>ssh_config 的配置文件来源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">man ssh_config</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">     ssh_config -- OpenSSH SSH client configuration files</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">     ssh(1) obtains configuration data from the following sources <span class="keyword">in</span> the following order:</span><br><span class="line"></span><br><span class="line">           1.   <span class="built_in">command</span>-line options</span><br><span class="line">           2.   user<span class="string">'s configuration file (~/.ssh/config)</span></span><br><span class="line"><span class="string">           3.   system-wide configuration file (/etc/ssh/ssh_config)</span></span><br></pre></td></tr></table></figure><p>ssh 程序可以从三个途径获取配置参数：</p><ol><li>命令行选型，比如 -F configfile</li><li>用户配置文件，放置在 ~/.ssh/config</li><li>系统配置文件，放置在 /etc/ssh/ssh_config（区别于 /etc/ssh/sshd_config）</li></ol><p>上面三个途径，前面的途径传入的参数可以覆盖后面的途径传入的参数（与 linux 里的大部分应用类似）。因为 / etc/ssh/ssh_config 会影响 ssh 全局的配置，因此如果想对多主机进行管理（不影响别人的情况下），可以考虑修改自己家目录下的~/.ssh/config 文件（~ 字符表示当前登录用户的家目录）。</p><h2 id="ssh-config-配置文件实例"><a href="#ssh-config-配置文件实例" class="headerlink" title="ssh_config 配置文件实例"></a>ssh_config 配置文件实例</h2><p>首先看一个配置文件的 demo，假设 8.8.8.8 是你可以直接登录的 Tunnel 公网跳板机，10.65.32.0 是需要管理的内网地址段，前提是 8.8.8.8 和内网服务器的防火墙策略均已配置正确，这里就不再赘述。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat ~/.ssh/config</span></span><br><span class="line"></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">CheckHostIP no</span><br><span class="line"></span><br><span class="line">Host 10.65.32.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line">Host bastion_GOP_SG_NC_MAIN</span><br><span class="line">  HostName 8.8.8.8</span><br><span class="line">  port 22</span><br><span class="line">  User wangao</span><br><span class="line"></span><br><span class="line">Host 10.65.200.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_MH_MAIN -W %h:%p</span><br><span class="line">Host bastion_GOP_SG_MH_MAIN</span><br><span class="line">  HostName 9.9.9.9</span><br><span class="line">  port 22</span><br><span class="line">  User wangao</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">StrictHostKeyChecking no</span><br><span class="line">CheckHostIP no</span><br><span class="line"></span><br><span class="line">Host 10.71.12.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host 10.71.13.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host 10.71.14.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host 10.71.15.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host bastion_GOP_SG_NC_MAIN</span><br><span class="line">  HostName 8.8.8.8</span><br><span class="line">  port 22</span><br><span class="line">  User wangao</span><br></pre></td></tr></table></figure><p>CheckHostIP no，禁用 known_hosts 检查<br>Directs ssh to additionally check the host IP address in the known_hosts file.</p><p>StrictHostKeyChecking no，跳过 known_hosts 写入<br>Specifies if ssh should never automatically add host keys to the ~/.ssh/known_hosts file, and refuses to connect to hosts whose host key has changed.</p><p>Host 字段<br>Host 字段配置了登录别名，这里需要注意的是，Host 是支持通配符的， * 代表 0～n 个非空白字符，? 代表一个非空白字符，! 表示例外通配</p><p>HostName 字段<br>指定远程主机名，可以直接使用 IP 地址。如果这个字段中包含 ‘%h’ ，则实际使用时会被命令行中的主机名替换</p><p>User 字段<br>指定登录用户名</p><p>IdentityFile 字段<br>指定密钥认证使用的私钥文件路径。默认为 ~/.ssh/id_rsa。这个字段可以指定多个密钥文件（以 , 分开），在连接的过程中会依次尝试这些密钥文件。和 HostName 字段一样，值也可以直接指定参数代替：</p><p>Port 字段<br>指定远程主机端口号，默认为 22 。</p><p>%h，远程主机名<br>%p，远程端口</p><h2 id="SSH-使用小技巧"><a href="#SSH-使用小技巧" class="headerlink" title="SSH 使用小技巧"></a>SSH 使用小技巧</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为跳板机配置 ssh 公钥 </span></span><br><span class="line">ssh-keygen</span><br><span class="line">ssh-copy-id root@10.249.69.128</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 ssh config</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh/</span><br><span class="line">vim config</span><br><span class="line"></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">CheckHostIP no</span><br><span class="line"></span><br><span class="line">Host 192.168.*</span><br><span class="line">  HostName 10.249.69.128</span><br><span class="line">  User root</span><br><span class="line">  Port 22</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接跳转登录 </span></span><br><span class="line">ssh root@192.168.8.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 ProxyCommand 或者 ProxyJump</span></span><br><span class="line">vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># ProxyCommand</span></span><br><span class="line">Host X</span><br><span class="line">    HostName 10.251.252.53</span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">Host xfljump</span><br><span class="line">    HostName 10.249.69.128</span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line">    ProxyCommand ssh X -W %h:%p</span><br><span class="line"></span><br><span class="line"><span class="comment"># ProxyJump</span></span><br><span class="line">Host xfljump</span><br><span class="line">    HostName 10.249.69.128</span><br><span class="line">    User root</span><br><span class="line">    ProxyJump root@10.251.252.53</span><br></pre></td></tr></table></figure><p><a href="https://liwanggui.com/posts/ssh-tips/" target="_blank" rel="noopener">https://liwanggui.com/posts/ssh-tips/</a><br><a href="https://bugwz.com/2019/10/09/ssh-proxycommand/" target="_blank" rel="noopener">https://bugwz.com/2019/10/09/ssh-proxycommand/</a><br><a href="https://blog.nediiii.com/ssh-note/" target="_blank" rel="noopener">https://blog.nediiii.com/ssh-note/</a><br><a href="https://www.xiebruce.top/650.html" target="_blank" rel="noopener">https://www.xiebruce.top/650.html</a><br><a href="https://deepzz.com/post/how-to-setup-ssh-config.html" target="_blank" rel="noopener">https://deepzz.com/post/how-to-setup-ssh-config.html</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p>如果你还不了解 ssh 或者对 ssh 端口转发感兴趣，可以参考以下内容</p></blockquote><p>SSH 使用密钥登录并禁止口令登录实践 - <a href="https://wsgzao.github.io/post/ssh/">https://wsgzao.github.io/post/ssh/</a></p><p>玩转 SSH 端口转发 - <a href="https://blog.fundebug.com/2017/04/24/ssh-port-forwarding/" target="_blank" rel="noopener">https://blog.fundebug.com/2017/04/24/ssh-port-forwarding/</a></p>]]></content>
    
    <summary type="html">
    
      使用ssh config作为ssh代理轻松管理内网服务器
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>SSH 使用密钥登录并禁止口令登录实践</title>
    <link href="https://wsgzao.github.io/post/ssh/"/>
    <id>https://wsgzao.github.io/post/ssh/</id>
    <published>2022-04-27T02:18:44.000Z</published>
    <updated>2022-05-06T07:58:14.356Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/zv9SM4PO.png" alt></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>无论是个人的 VPS 还是企业允许公网访问的服务器，如果开放 22 端口的 SSH 密码登录验证方式，被众多黑客暴力猜解捅破菊花也可能是经常发生的惨剧。企业可以通过防火墙来做限制，普通用户也可能借助修改 22 端口和强化弱口令等方式防护，但目前相对安全和简单的方案则是让 SSH 使用密钥登录并禁止口令登录。</p><blockquote><p>ssh 密钥登录是相对安全的登录管理方式</p></blockquote><hr><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 04 月 27 日 - 增加 SSH 使用小技巧<br>2019 年 01 月 31 日 - 更新 ssh 基础知识讲解和 ansible authorized_key 示例<br>2015 年 08 月 13 日 - 增加 Bash Shell 自动修改脚本<br>2015 年 07 月 07 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/ssh/">https://wsgzao.github.io/post/ssh/</a></p><p><strong> 扩展阅读 </strong></p><p>SSH 原理与运用 -  <a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html</a><br>Linode - <a href="https://www.linode.com/docs/networking/ssh/use-public-key-authentication-with-ssh" target="_blank" rel="noopener">https://www.linode.com/docs/networking/ssh/use-public-key-authentication-with-ssh</a></p><hr><h2 id="ssh-登录服务器的两种方式"><a href="#ssh-登录服务器的两种方式" class="headerlink" title="ssh 登录服务器的两种方式"></a>ssh 登录服务器的两种方式</h2><p>如果是一个比较喜欢折腾的人，在某个云平台购买了一台云主机，除了通过云平台提供的 web 页面上的命令行工具，其实也可以在本地电脑上面通过 ssh 进行登录。具体地又可以分成两种：</p><ol><li>ssh 用户名密码登录</li><li>ssh 证书（免密码）登录</li></ol><p>需要说明一下，后者的安全性高于前者，因此一般会默认不启用第一种登录方式，只允许第二种登录方式。</p><p>SSH 为 Secure Shell 的缩写，是建立在应用层基础上的安全协议，利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。ssh 分成服务端与客户端，其中服务端运行在被登录的机器上面，客户端运行在操作的机器上面。</p><h3 id="用户名密码登录"><a href="#用户名密码登录" class="headerlink" title="用户名密码登录"></a>用户名密码登录</h3><p>通常 openssh-server 默认允许用户名密码登录，但是不排除为了安全考虑云上的服务器上禁止开启 ssh 的这种登录方式，毕竟用户名加密码的方式很容易被爆力破解。如果大家理解其中的厉害关系，可以检查修改 /etc/ssh/sshd_config（sshd 的配置文件）中 PasswordAuthentication 这一项配置为 yes（一般默认是 yes ）。修改完配置重启 sshd 服务就可以使用用户名和密码登录了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -l 指定用户名为 wangao</span></span><br><span class="line"><span class="comment"># -p 指定端口为 2222，默认为 22</span></span><br><span class="line"><span class="comment"># 输入下面的命令后根据提示输入密码就可以登录到对应的服务器了 </span></span><br><span class="line">ssh -l wangao -p 2222 192.168.56.101</span><br></pre></td></tr></table></figure><h3 id="ssh-免密登录"><a href="#ssh-免密登录" class="headerlink" title="ssh 免密登录"></a>ssh 免密登录</h3><p>所谓免密登录，也就是说不需要人工再输入用户名和密码了，但这并不意味着没有了鉴权的动作，服务器毕竟是自己的，不能随便允许别人登录到上面去搞破坏。ssh 免密登录通过证书进行鉴权。</p><p>这里的证书分为公钥与私钥，我们可以简单地理解为：公钥 = 锁；私钥 = 钥匙。</p><p>流程基本是这样的：如果我们想要从 A 免密登录到 B，就需要把公钥（锁）放到 B 的特定位置，而 A 拥有私钥（钥匙）的完整副本。当 A 拿着私钥去访问 B 的时候，B 发现自己身上有一把锁（B 可能有很多公钥）可以被 A 的私钥打开，于是给 A 放行，A 就成功登录到 B 了。</p><blockquote><p>如何得到证书（公钥与私钥）<br>上面提到的证书可以通过两种方式获取得到。<br>第一种是向服务器管理员索取，一般索取得到的是私钥，这样就可以免密登录到任何存放了公钥的服务器了。<br>第二种是自己生成证书（比如使用 ssh-keygen），然后把公钥放到对应的服务器的特定位置，就可以免密登录到对应的服务器了。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过 ssh-keygen 可以生成需要的证书 </span></span><br><span class="line"><span class="comment"># 根据提示一路按 RETURN(ENTER) 即可 </span></span><br><span class="line"><span class="comment"># 默认情况下会生成 id_rsa 和 id_rsa.pub </span></span><br><span class="line"><span class="comment"># id_rsa 为私钥，id_rsa.pub 为公钥 </span></span><br><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><blockquote><p>公钥放置位置</p></blockquote><p>linux 系统允许多用户登录同一台服务器，一般情况下 /home 目录会有非常多的用户目录。可以把公钥放置在任何一个用户目录的 $HOME/.ssh/authorized_keys 文件中，比如 cat id_rsa.pub &gt;&gt; /home/wangao/.ssh/authorized_keys ，这样就可以使用私钥以 wangao 的名义登录对应的服务器了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -i 指定私钥，默认条件下使用 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="comment"># -l 指定用户名 </span></span><br><span class="line"><span class="comment"># -p 指定端口，默认为 22</span></span><br><span class="line">ssh -i ~/.ssh/id_rsa -p 2222 -l wangao 192.168.56.101</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面的命令等同于 </span></span><br><span class="line">ssh -p 2222 wangao@192.168.56.101</span><br></pre></td></tr></table></figure><h2 id="ssh-免密码登录一般流程"><a href="#ssh-免密码登录一般流程" class="headerlink" title="ssh 免密码登录一般流程"></a>ssh 免密码登录一般流程</h2><h3 id="生成-PublicKey"><a href="#生成-PublicKey" class="headerlink" title="生成 PublicKey"></a>生成 PublicKey</h3><blockquote><p>建议设置并牢记 passphrase 密码短语，以 Linux 生成为例</p></blockquote><p>Linux：ssh-keygen -t rsa<br>[私钥 (id_rsa) 与公钥 (id_rsa.pub)]<br>Windows：SecurCRT/Xshell/PuTTY<br>[SSH-2 RSA 2048]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 生成 SSH 密钥对 </span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line"><span class="comment"># 建议直接回车使用默认路径 </span></span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line"><span class="comment"># 输入密码短语（留空则直接回车）</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line"><span class="comment"># 重复密码短语 </span></span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">aa:8b:61:13:38:ad:b5:49:ca:51:45:b9:77:e1:97:e1 root@localhost.localdomain</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+--[ RSA 2048]----+</span></span><br><span class="line"><span class="string">|    .o.          |</span></span><br><span class="line"><span class="string">|    ..   . .     |</span></span><br><span class="line"><span class="string">|   .  . . o o    |</span></span><br><span class="line"><span class="string">| o.  . . o E     |</span></span><br><span class="line"><span class="string">|o.=   . S .      |</span></span><br><span class="line"><span class="string">|.*.+   .         |</span></span><br><span class="line"><span class="string">|o.*   .          |</span></span><br><span class="line"><span class="string">| . + .           |</span></span><br><span class="line"><span class="string">|  . o.           |</span></span><br><span class="line"><span class="string">+-----------------+</span></span><br></pre></td></tr></table></figure><h3 id="复制密钥对"><a href="#复制密钥对" class="headerlink" title="复制密钥对"></a>复制密钥对</h3><blockquote><p>也可以手动在客户端建立目录和 authorized_keys，注意修改权限</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 复制公钥到无密码登录的服务器上, 22 端口改变可以使用下面的命令 </span></span><br><span class="line"><span class="comment">#ssh-copy-id -i ~/.ssh/id_rsa.pub "-p 10022 user@server"</span></span><br><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.15.241</span><br></pre></td></tr></table></figure><h3 id="修改-SSH-配置文件"><a href="#修改-SSH-配置文件" class="headerlink" title="修改 SSH 配置文件"></a>修改 SSH 配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑 sshd_config 文件 </span></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用密码验证 </span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line"><span class="comment"># 启用密钥验证 </span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"><span class="comment"># 指定公钥数据库文件 </span></span><br><span class="line">AuthorsizedKeysFile .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/^PasswordAuthentication.*/PasswordAuthentication no/g"</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">"s/^#RSAAuthentication.*/RSAAuthentication yes/g"</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">"s/^#PubkeyAuthentication.*/PubkeyAuthentication yes/g"</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">"s/^#AuthorizedKeysFile.*/AuthorizedKeysFile .ssh\/authorized_keys/g"</span> /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><blockquote><p>重启 SSH 服务前建议多保留一个会话以防不测</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RHEL/CentOS 系统 </span></span><br><span class="line">service sshd restart</span><br><span class="line"><span class="comment"># Ubuntu 系统 </span></span><br><span class="line">service ssh restart</span><br><span class="line"><span class="comment"># Debian 系统 </span></span><br><span class="line">/etc/init.d/ssh restart</span><br></pre></td></tr></table></figure><h3 id="手动增加管理用户"><a href="#手动增加管理用户" class="headerlink" title="手动增加管理用户"></a>手动增加管理用户</h3><blockquote><p>可以在 == 后加入用户注释标识方便管理</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'ssh-rsa XXXX'</span> &gt;&gt;/root/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复查 </span></span><br><span class="line">cat /root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><h2 id="使用-Ansible-添加-ssh-信任关系"><a href="#使用-Ansible-添加-ssh-信任关系" class="headerlink" title="使用 Ansible 添加 ssh 信任关系"></a>使用 Ansible 添加 ssh 信任关系</h2><blockquote><p>使用 ansible authorized_key module 即可</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">gather_facts:</span> <span class="literal">no</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">authorized</span> <span class="string">key</span> <span class="string">took</span> <span class="string">from</span> <span class="string">file</span></span><br><span class="line">      <span class="attr">authorized_key:</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">"<span class="template-variable">&#123;&#123; lookup('file','~/.ssh/id_rsa.pub') &#125;&#125;</span>"</span></span><br><span class="line">        <span class="attr">user:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">state:</span> <span class="string">present</span></span><br></pre></td></tr></table></figure><h2 id="grep-过滤井号查看配置"><a href="#grep-过滤井号查看配置" class="headerlink" title="grep 过滤井号查看配置"></a>grep 过滤井号查看配置</h2><p>grep 命令 - v 参数（反向选择）分别去掉所有以 #（井号）和;（分号）开头的注释信息行，对于剩余的空白行可以再用 ^$ 来表示并反选过滤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh 服务端 </span></span><br><span class="line">cat sshd_config | grep -v <span class="string">"#"</span> | grep -v <span class="string">";"</span> | grep -v <span class="string">"^$"</span></span><br><span class="line"></span><br><span class="line">Port 22</span><br><span class="line">Protocol 2</span><br><span class="line">LogLevel INFO</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">HostbasedAuthentication no</span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line">ChallengeResponseAuthentication no</span><br><span class="line">UsePAM yes</span><br><span class="line">X11Forwarding yes</span><br><span class="line">PrintMotd no</span><br><span class="line">AcceptEnv LANG LC_*</span><br><span class="line">Subsystem sftp/usr/lib/openssh/sftp-server</span><br><span class="line">MaxAuthTries 4</span><br><span class="line">ClientAliveInterval 300</span><br><span class="line">ClientAliveCountMax 0</span><br><span class="line">PasswordAuthentication yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># ssh 客户端 </span></span><br><span class="line">cat ssh_config | grep -v <span class="string">"#"</span> | grep -v <span class="string">";"</span> | grep -v <span class="string">"^$"</span></span><br><span class="line"></span><br><span class="line">Host *</span><br><span class="line">    SendEnv LANG LC_*</span><br><span class="line">    HashKnownHosts yes</span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">    GSSAPIAuthentication yes</span><br></pre></td></tr></table></figure><h2 id="保持-ssh-服务连接不断开的方法"><a href="#保持-ssh-服务连接不断开的方法" class="headerlink" title="保持 ssh 服务连接不断开的方法"></a>保持 ssh 服务连接不断开的方法</h2><p>修改客户端配置<br>/etc/ssh/ssh_config<br>~/.ssh/config</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line">ServerAliveInterval  10</span><br><span class="line">ServerAliveCountMax  5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用命令行参数 </span></span><br><span class="line">ssh -o ServerAliveInterval=60 root@xx.xx.xx.xx</span><br></pre></td></tr></table></figure><h2 id="SSH-使用小技巧"><a href="#SSH-使用小技巧" class="headerlink" title="SSH 使用小技巧"></a>SSH 使用小技巧</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为跳板机配置 ssh 公钥 </span></span><br><span class="line">ssh-keygen</span><br><span class="line">ssh-copy-id root@10.249.69.128</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 ssh config</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh/</span><br><span class="line">vim config</span><br><span class="line"></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">CheckHostIP no</span><br><span class="line"></span><br><span class="line">Host 192.168.*</span><br><span class="line">  HostName 10.249.69.128</span><br><span class="line">  User root</span><br><span class="line">  Port 22</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接跳转登录 </span></span><br><span class="line">ssh root@192.168.8.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 ProxyCommand 或者 ProxyJump</span></span><br><span class="line">vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># ProxyCommand</span></span><br><span class="line">Host X</span><br><span class="line">    HostName 10.251.252.53</span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">Host xfljump</span><br><span class="line">    HostName 10.249.69.128</span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line">    ProxyCommand ssh X -W %h:%p</span><br><span class="line"></span><br><span class="line"><span class="comment"># ProxyJump</span></span><br><span class="line">Host xfljump</span><br><span class="line">    HostName 10.249.69.128</span><br><span class="line">    User root</span><br><span class="line">    ProxyJump root@10.251.252.53</span><br></pre></td></tr></table></figure><p><a href="https://liwanggui.com/posts/ssh-tips/" target="_blank" rel="noopener">https://liwanggui.com/posts/ssh-tips/</a><br><a href="https://bugwz.com/2019/10/09/ssh-proxycommand/" target="_blank" rel="noopener">https://bugwz.com/2019/10/09/ssh-proxycommand/</a><br><a href="https://blog.nediiii.com/ssh-note/" target="_blank" rel="noopener">https://blog.nediiii.com/ssh-note/</a><br><a href="https://www.xiebruce.top/650.html" target="_blank" rel="noopener">https://www.xiebruce.top/650.html</a><br><a href="https://deepzz.com/post/how-to-setup-ssh-config.html" target="_blank" rel="noopener">https://deepzz.com/post/how-to-setup-ssh-config.html</a></p>]]></content>
    
    <summary type="html">
    
      ssh密钥登录是相对安全的登录管理方式
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>新加坡阳台安装 Ziptrack 和 Invisible Grille 使用经历分享</title>
    <link href="https://wsgzao.github.io/post/ziptrack/"/>
    <id>https://wsgzao.github.io/post/ziptrack/</id>
    <published>2022-04-07T06:59:49.000Z</published>
    <updated>2022-04-08T03:16:16.290Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>新加坡大部分 HDB 没有阳台的，当然新的组屋有部分户型也开始增加阳台，通常 Condo 会配置相对更大一些的阳台，可是有效使用面积就更少了，原因是开放式阳台是不允许自作主张请装修商封闭起来的，但是可以安装政府批准的设备巧妙利用好阳台，也就说封闭阳台得通过小区物业和政府相关部门的批准，流程比较麻烦。但是如果不封闭新加坡的天气基本就是国内 8 月份的黄梅天，经常下雨而且风力一旦加大那么阳台基本都会被打湿甚至会连累客厅，所以在新加坡可以看到大部分人都会选择安装 Ziptrack，不过标准一些的称呼其实应该是 Zip Blind，只是作为品牌的 Ziptrack 用的人太多大家基本就这样称呼了，类似于席梦思</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 04 月 07 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/ziptrack/">https://wsgzao.github.io/post/ziptrack/</a></p><hr><h2 id="新加坡为什么很少看到全封闭阳台"><a href="#新加坡为什么很少看到全封闭阳台" class="headerlink" title="新加坡为什么很少看到全封闭阳台"></a>新加坡为什么很少看到全封闭阳台</h2><p>按法律说，房子内的装修其实都要经过公寓管理层的批准。房子外的（包裹阳台）只要会影响外观，除了公寓管理层，还需要 BCA（Building &amp; Construction Authority) 的批准。</p><blockquote><p>一段和阳台有关的小历史</p></blockquote><p>以前抱怨房子大多数没有阳台，后来发展商拼命的弄阳台，客厅有，主人房有，common room 有的也有。<br>这也就算了，连 A/C ledge 也是超级宽敞的，花花草草也没有忘记，planter 也是必需的，baywindow 也是必需的，连卫生间都有</p><p>BAYWINDOW 和 PLANTER BOX 原来是不计算在总建筑面积（GFA) 但发展商可以以套内面积原价卖给买家，发展商因此大力植入这两个东西，终致民怨，于是 URA 在 2009 年修改了条规，将 BAYWINDOW 和 PLANTER BOX 纳入总建筑面积（GFA) 计算中，条规修改以后的住宅设计，BAYWINDOW 和 PLANTER BOX 这两者无法使发展商获益，因此大为减少。</p><p>这两个不行了，所以现在改搞 a/c ledge 和阳台，大家观察下 2010 年前后的 Condo 差异就理解了，BAYWINDOW 中文其实就是对应了中文的飘窗，我个人肯定倾向于落地窗</p><h2 id="Ziptrack-和-Invisible-Grille-的区别"><a href="#Ziptrack-和-Invisible-Grille-的区别" class="headerlink" title="Ziptrack 和 Invisible Grille 的区别"></a>Ziptrack 和 Invisible Grille 的区别</h2><p>Invisible Grille 中文是隐形网栅，我个人觉得作用主要有 3 点</p><ol><li>核心是作为护栏功能防止小孩跌落窗外</li><li>价格是 Ziptrack 的一半，略微影响视觉外观</li><li>根据不同家庭使用场景安装灵活，打理简单耐用性好</li></ol><p><a href="https://mc2.com.sg/invisible-grilles/" target="_blank" rel="noopener">https://mc2.com.sg/invisible-grilles/</a></p><p>Ziptrack 是一个澳大利亚品牌，口口相传后就变成了一个统称就像席梦思一样</p><ol><li>我的选择是 mc2 SecureZip，因为一口价全包，新加坡自有设计专利和制造工厂，France SOMFY Motor 支持手机远程控制，质保 5 年</li><li>目前使用大半年下来很不错，小区也有挺多人使用，免费上门改造阳台电路提供遥控，半天就装好了，售后咨询服务也很好</li><li>价格肯定是比 Invisible Grille 高，但核心功能防雨，半开状态增加安全性和隐私性</li><li>新加坡 Ziptrack 基本都是代理商，报价水分挺多，如果你认准 Ziptrack 品牌，我也没办法说服你</li></ol><p><a href="https://www.ziptrak.com.au/" target="_blank" rel="noopener">https://www.ziptrak.com.au/</a><br><a href="https://mc2.com.sg/zip-blinds/" target="_blank" rel="noopener">https://mc2.com.sg/zip-blinds/</a></p><h2 id="MC2-购买经历和安装流程"><a href="#MC2-购买经历和安装流程" class="headerlink" title="MC2 购买经历和安装流程"></a>MC2 购买经历和安装流程</h2><p>MC2 Pte Ltd (Singapore)<br>Address: 33 Ubi Ave 3, #01-28, Singapore 408868</p><p>Curtains and Blinds Singapore<br>mc.2 is the leading supplier of high-quality curtains and blinds in Singapore, whether for indoor or outdoor requirements. We have a wide array of window covering solutions, including the first homegrown smart zip blind, roller blinds, venetian blinds, rainbow blinds, day curtains and night curtains. To give you options, we also have an extensive selection of fabrics, colours and designs for you to choose from. You will find something to aesthetically complement your kitchen, bedroom or living room design with the added practical and functional benefits – all competitively priced.</p><p>mc.2 has a team of friendly in-house specialists, who are ready to help you choose your ideal design and craft them made-to-measure to perfectly fit your needs and requirements. We guarantee complete satisfaction when you visit the mc.2 showroom because you will surely love what we can do for you.</p><ol><li>可以前往 MC2 实体店或者网上沟通都可以，重点咨询下是否在现有小区已经有人安装过 MC2，因为需要物业审批，主要是颜色，有经验的供应商是最好不过的了</li><li>确认购买意向后可以预约上门测量时间，通常等待安装时间需要 2-3 个月左右，期间可以和物业申请 1 周装修通知，防止被邻居投诉或意外延期</li><li>上门安装是一条龙服务，快的话半天就搞定了，还包括改造电路，指导开关和手机远程控制</li><li>平时我基本都是半开模式，不是很大的雨基本没有影响，同时兼顾透气和隐私</li></ol>]]></content>
    
    <summary type="html">
    
      新加坡阳台安装Ziptrack和Invisible Grille使用经历分享
    
    </summary>
    
      <category term="生活 | Life" scheme="https://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
    
  </entry>
  
  <entry>
    <title>从国内跳槽至新加坡工作的经验分享</title>
    <link href="https://wsgzao.github.io/post/singapore/"/>
    <id>https://wsgzao.github.io/post/singapore/</id>
    <published>2022-04-06T02:59:49.000Z</published>
    <updated>2022-04-07T09:31:17.020Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20191007154135.png" alt></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>为什么会写这样一篇长文记录和分享自己在新加坡的工作生活，主要是我在 2018 年 6 月 9 日前需要了解新加坡的时候网上的参考信息屈指可数，出于这个原因我决定顺手记录来新加坡的经历方便自己回顾也方便他人参考。非常感谢在 2019 年出现的<a href="https://996.icu" target="_blank" rel="noopener">996.icu</a>，让更多人看到了一个不一样的世界，里面也有很多朋友分享了新加坡的生活经历。不管你现在的生活是 996 还是 669，我都希望大家可以从电视剧《都挺好》里发现那个最真实的自己。如果你只想了解我是如何来到新加坡的可以直接跳到最后一章。</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 xx 月 xx 日 - 计划水平拆分文章的章节为独立的文章，本文仅保留新加坡 2 年的工作生活，PR 申请，换工作，买房和上学等请浏览分支<br>2020 年 09 月 09 日 - 跳槽离职，租房搬家，保险补充，新加坡买房准备<br>2020 年 03 月 03 日 - 增加新加坡金融理财以及信用卡申请心得<br>2019 年 12 月 31 日 - 增加新加坡保险购买经历的思考和新加坡 2020 年各行业工资数据<br>2019 年 10 月 16 日 - 更新 EP 申请 PR 材料细节，增加新加坡婚礼红包份子钱的礼仪<br>2019 年 06 月 09 日 - 更新新加坡一周年经历<br>2019 年 02 月 14 日 - 更新半年的经历以及 PR 申请流程<br>2018 年 09 月 09 日 - 增加新加坡 3 个月工作生活感受<br>2018 年 08 月 01 日 - 更新个人经验<br>2018 年 05 月 15 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/singapore/">https://wsgzao.github.io/post/singapore/</a></p><p><strong> 扩展阅读 </strong></p><p><a href="https://github.com/623637646/996.Leave" target="_blank" rel="noopener">逃离 996</a></p><p><a href="https://zhuanlan.zhihu.com/p/65226485" target="_blank" rel="noopener">算法工程师肉身翻墙新加坡经验分享（踩坑记）</a></p><p><a href="https://mp.weixin.qq.com/s/1EOA7MpTpmR-fg6b0nvMXg" target="_blank" rel="noopener">坡县生存指北 V1.0</a></p><p><a href="https://www.zhihu.com/question/357534411/answer/963038239" target="_blank" rel="noopener">有什么是你到过新加坡才知道的？</a></p><p><a href="https://www.kuact.com/post/" target="_blank" rel="noopener">飘过新加坡的日子</a></p><hr><h2 id="我的新加坡之旅时间轴"><a href="#我的新加坡之旅时间轴" class="headerlink" title="我的新加坡之旅时间轴"></a>我的新加坡之旅时间轴</h2><blockquote><p>时间轴不再描述细节，如果需要了解详细信息可以阅读后面的内容</p></blockquote><p><strong>2018-04</strong></p><ul><li>LinkedIn 收到 100offer 猎头来自 Sea 的工作邀请机会</li><li>经历 3 轮远程 Skype 视频面试，时间约为 3 周</li><li>提出辞职由 Sea HR 帮忙开始申请 EP，时间约为 3 周</li></ul><p><strong>2018-05</strong></p><ul><li>完成离职流程，时间约为 1 个月</li><li>收到 EP 的 IPA，由 Sea HR 帮忙开始申请 DP，时间约为 1 周(申请 DP 请提前准备好结婚证公正)</li><li>完成新加坡机票，住宿，货币，各种材料纸质化和电子扫描化的准备(可选为申请 PR 准备国内学历学位公证和出生证公证)</li></ul><blockquote><p>再强调一下出国前的建议</p></blockquote><ol><li>随身携带好护照和相关入境材料，非常重要，非常重要，非常重要</li><li>证件，学历和结婚证公正翻译等材料可以通过扫描全能王 (CamScanner) 录入为电子版，水印是可以很方便去除的，这里就不多说了。如果觉得好用请购买正版服务支持下总部位于上海的合合信息，名片全能王 (CamCard) 也是他们家的产品</li><li>提前规划好到达新加坡后的住宿(新加坡 Airbnb 违法请慎重考虑)，交通出行，手机应用，SIM 卡，入职流程</li><li>准备好足够的新币现金建议 4k+，因为银行卡和租房都是大头，有条件至少准备一张以上的 Visa/Mastercard 信用卡</li><li>出国前检查下国内的银行，手机，社保，人事档案是否安排妥当，身份证和护照离过期更换时间是否可控</li><li>如果有条件出国前做下全面的体检至少对自己身体有一个清晰的认识，把牙齿之类的小毛小病尽可能提前扫除隐患</li><li>现在的网络通信都很发达，记得和家人保持联系，减少他们的担心，自己照顾好自己</li></ol><p><strong>2018-06</strong></p><ul><li>20180609 星期六晚上 20 点第一次来到新加坡</li><li>完成住宿，EZ-Link 交通卡和 Singtel Prepaid 手机卡，时间约为 1 天</li><li>入职一周左右由 HR 协助申请 EP，需要本人预约 MOM 现场办理 EP，收到 EP 实体卡时间约为 1 周内</li><li>收到 EP 实体卡使用 SGWorkPass 扫描获取有效期并保存照片，注册 SingPass，约 1 周左右收到密码信封然后激活</li><li>办理 Zero1.sg 的无合约限制，无限流量的 Postpaid 手机卡，背后运营商为 Singtel 质量靠谱</li><li>携带相关证明办理银行卡，我选择 UOB 但是推荐各位选择 DBS，如需转账回国可以再额外开通工商银行</li></ul><p><strong>2019-03</strong></p><ul><li>全年在新加坡工作满 183 天以上需要报税，新加坡阶梯税率较低，普通人平均缴税额度大概年收入 5%-8%，对外国人来说可以理解为税前≈税后或者到手收入</li><li>工作满半年可以开始申请 PR，但一般建议等满 2 年，可以提前准备各种材料，国内学历学位和出生证公证在新加坡本地认证机构都可以代办</li><li>在半年时间中根据自身状况可选办理信用卡，健身卡，推荐补充个人住院医疗，重疾人寿意外为可选项，保障自己的身体健康很重要</li><li>基本熟悉新加坡的生活节奏，明白新加坡的优缺点，规划自己下一个阶段目标</li></ul><p><strong>2019-12</strong></p><ul><li>新加坡保险的思考和决策</li><li>我购买的是 AIA 储蓄 + 终生人寿重疾险 30 万新币保障额度</li></ul><p>我身边很多购买过保险的人基本是 AIA 和 Prudential，我为什么会买 AIA 因为一直在房产投资群潜水，偶然冒泡后误打误撞结识了 AIA 团队排名第一的 (真) 学霸，大佬开玩笑邀请我去他们团队私人会所检验其专业性，我拖了半年觉得自己对保险的认知仅停留在皮毛阶段，最后选择在年末去了解下，对方因为私人原因跨行业横向切入保险的经历挺不容易的，我简单说下我理解的新加坡保险，不正确的地方也欢迎补充，毕竟这对每个人来说都息息相关：</p><ol><li>公司配置的一般是团体险，覆盖门诊 + 住院医疗，福利好可以不用担心看不起病。如果额度不高就建议单独购买住院医疗，大家应该清楚新加坡住院的费用是很贵的，保险费用在 1000 新币 / 年左右不算贵，选择哪家保险都差不多，这也是大多数人在新加坡自费购买的第一个保险。如果是 PR/SC 可以升级政府 CPF 中的私人医疗保险。</li><li>新加坡的寿险分定期和终生，保额高费用低，单独购买每年 800 新币即可配置 100w 保额，这也是很多人从国内飞来新加坡购买寿险的原因。</li><li>新加坡的重疾险和国内一样都是最贵的险种，但核心优势是新加坡保险协会制定的保障范围覆盖初期 + 中期 + 重疾种类市场最多，而且购买和赔付流程合理清晰。需要根据家庭收入分配，年龄，保额，初期，倍数等仔细评估</li><li>新加坡的意外险比较简单，注意并理解赔付规则为意外的含义</li><li>新加坡投资类保险收益没有香港的乐观</li></ol><p>如果买保险只需要找同类型最便宜的，那我们也就不用这么累去仔细比较。保险中存在很多影响价格的关键参数，不少细节也需要你和保险代理一一沟通确认清楚，无论你选择哪一家保险公司一个专业且靠谱的保险代理会让你省心不少，如果你在国内买过保险或者房子应该能感同身受。</p><p>对于买保险这个事情千万不能像父母那一代认为是骗子或者买成了人情险，要对自己的家庭生活品质和风险管理负责，新加坡保险代理相对国内比较靠谱，购买保险前多和已经买过的朋友或者不同的保险公司对比咨询如何合理搭配，在不同阶段买适合的保险产品，不要等到大病意外或被拒绝赔付后才意识到为什么没有提前配置正确的保险产品。微信朋友圈中你也许已经看到过大量真实的水滴筹大病求助信息，我希望你或者你的家人朋友能通过保险的来应对生活的挑战。</p><p>我也相信国内以蚂蚁金服和微信为首的互联网渠道会让大家更透明放心的购买保险，总有一天会实现没有中间商赚差价。</p><p><a href="http://m.opinion.caixin.com/zknews/2017-01-22/101047816.html" target="_blank" rel="noopener">我为什么要去新加坡买定期寿险 - 财新网专栏作家 - 明宏义</a></p><p><strong>2020-03</strong></p><ul><li>关于新加坡银行储蓄利率和信用卡申请选择</li></ul><p>DBS: Debit Card, DBS Multiplier Account, POSB Everyday Card, PAssion POSB Debit Card<br>UOB: Debit Card, UOB One Account, UOB ONE CARD<br>OCBC: Debit Card, OCBC 360 Account, OCBC 365 Credit Card<br>ICBC: Debit Card, Credit Card<br>Gray: GrayPay Card</p><ol><li>新加坡银行首选 DBS，因为我是 UOB，我老婆是 DBS，略微复杂的阶梯储蓄利率奖励额度上限一般 10w 新币超出部分按基础利率计算，整体来看新加坡本地银行基本都维持在年化利率 2%，选任何一家收益差别并不大，没有特殊情怀自然是推荐用户体验更好本土实力更强的 DBS</li><li>新加坡信用卡在你没有决定是否长期留在新加坡前属于可有可无，如果需要办理信用卡可以参考知乎 @<a href="https://www.zhihu.com/question/336365196" target="_blank" rel="noopener">中国工商银行股份有限公司新加坡分行 信用卡部主管 邢起超</a>的客观回答，<a href="https://www.moneysmart.sg/" target="_blank" rel="noopener">MoneySmart.sg</a>有更多详细的评测报告</li><li>单从投资收益和风险来说我希望各位可以多关注下 REITs，ETF，美股或者港股，以学习的心态了解整个世界的金融体系大概如何运作的，如果各位对金融理财了解不多，推荐先阅读一本书《小狗钱钱》，微信读书可以免费看。</li></ol><p><strong>2020-09</strong></p><ul><li>关于跳槽离职</li><li>关于租房搬家</li><li>关于保险补充</li><li>关于新加坡买房准备</li></ul><p>如果你想找参照坐标可以浏览<a href="http://sgprapp.com/listPage" target="_blank" rel="noopener">新加坡 PR,Citizen,EP,SP 统计查询</a></p><p>上面已经提到我在新加坡的第一份工作是在 Sea 也就是 Garena 和 Shopee 的母公司，也依次面试通过了 ByteDance，Grab，Tencent 等，每个公司的离职流程不完全一样记得多了解清楚和耐心沟通，新加坡华人圈子很小尤其是做技术的，以后说不定哪天就又成为同事了。</p><p>我也是第一次经历真正意义上的租房，靠近市中心地铁绿线上 1 房 Condo 2100-2500 新币左右，2 房 HDB 为 2500-3000，我比较幸运找到了锁房间的新 HDB，这样既满足整租私密性又兼顾地理位置和价格。PR 以及公民搬家后记得在 28 天内到移民与关卡局或警局办理更换身份证住址的手续。关于新加坡租房的细节也在后文中写了，这里也不再赘述了。</p><p>上文我提到在 2019-12 月办理了 AIA 30w 新币额度的终身重疾人寿，然后也是按照原计划在 2020-07 月办理了 AIA 100w 新币额度的 100 岁定期人寿，保险金字塔底层算是基本成型了。除了新加坡政府提供的 <a href="https://www.cpf.gov.sg/Members/Schemes/schemes/other-matters/dependants-protection-scheme" target="_blank" rel="noopener">Dependants’ Protection Scheme (DPS)</a> 小额人寿以外还有非常重要的住院医疗保险俗称终身健保<a href="https://www.moh.gov.sg/cost-financing/healthcare-schemes-subsidies/medishield-life" target="_blank" rel="noopener">MediShield Life</a>，之后我也会考虑升级至<a href="https://www.moh.gov.sg/cost-financing/healthcare-schemes-subsidies/medishield-life/comparison-of-integrated-shield-plans" target="_blank" rel="noopener">Integrated Shield Plans</a></p><p>关于新加坡买房的注意细节我也都更新到后文了，这里简单聊一下思路，如果愿意租房等 3 年或者提前至第 2 年转为新加坡国籍，那么选择 Resale HDB 组屋会合适些，好处主要是大，便宜以及选择多，2015 年的 5 房 HDB 才 100w 新币左右。如果是追求生活质量选择 Condo，常见的 2-3 房价格区间在 120w-200w 不等，从投资角度来看买热门预售新 Condo 然后等到 3 年后转售可以获得超过 15%-30% 乐观收益，购买建议是先以 1 个人名义或者按 99:1 的比例买第 1 套，这样等到有实力投资购买第 2 套时可以合法少缴纳 ABSD 额外印花税。</p><p>关于新加坡养娃和上学的问题我也提前更新了一些资料在后文中，有需要的可以继续往下阅读。我个人的理解是双 PR 家庭大概率至少有 1 人要带着娃转为新加坡公民参与好学校的竞争，不然得花高价钱走国际学校路线，如果选择散养教育那就是另一回事了。</p><p><strong> 回顾自己从 2018-06 到 2020-09 的新加坡经历，很多人会问为什么选择来新加坡，如何来新加坡，如何申请新加坡 PR 等问题。我依然无法回答所有的疑问，能够帮助到大家的就是尽可能多的分享自己的这份经历，虽然不能代替各位做选择，但真诚的希望可以辅助你做出决定。</strong></p><h2 id="认识狮城"><a href="#认识狮城" class="headerlink" title="认识狮城"></a>认识狮城</h2><p>姓名：新加坡</p><p>年龄：56 岁（成立于 1965 年，国庆日为每年的 8 月 9 日）</p><p>家庭住址：北半球赤道地区，位于马来半岛最南端 （北纬 1°22′，东经 103°48′）</p><p>住房面积：新加坡国土面积 710.3 平方公里 （新加坡面积是上海的 1/9，北京的 1/23）</p><p>家庭成员：人口约 520 万，密度达到每平方公里 7700 多人（排在世界前列）</p><p>相貌特征：新加坡多元种族和文化的相互融合是其极具魅力的原因之一，由华族（占全国人口约四分之三）、欧亚族、印度族、马来族、土生华人构成。</p><p>性格特征：新加坡以实行严格的法律和制度著称，无论是居民还是游客，都需要予以足够重视，否则可能会被课以重罚。当然，如果您遵循当地法律规章，也不必过分担心。</p><blockquote><p>所获荣誉：或许这些荣誉只属于过去，我们更需要关心的是现在和未来会怎样</p></blockquote><p>让人最想移民的国家全球排名第一<br>全球最具竞争力国家排名第一<br>最适应亚洲人士居住的地方全球排名第一<br>城市基础设施建设全球排名第一<br>全球化程度最高的城市排名第一</p><p>其他方面：<a href="http://www.visitsingapore.com.cn/travel-guide-tips/about-singapore/" target="_blank" rel="noopener">http://www.visitsingapore.com.cn/travel-guide-tips/about-singapore/</a></p><h2 id="旅游出入境"><a href="#旅游出入境" class="headerlink" title="旅游出入境"></a>旅游出入境</h2><blockquote><p>新加坡 5 件套</p></blockquote><ul><li>打疫苗</li><li>打 HPV</li><li>开账户</li><li>买保险</li><li>看学校</li></ul><blockquote><p>签证</p></blockquote><p>中国公民去新加坡须提前申请有效签证，不可以落地签。</p><p>中国公民申请的新加坡旅游 / 商务签证为电子签证（e-Visa），在获得签证后，建议上网打印多份有效签证以防遗失。签证费为每人 SG$30。</p><p>新加坡签证可多次入境，有效期分别有 35 天 / 62 天 / 2 年，由签证官根据申请人资料而定。逗留时间则由入境官决定，通常为 14-30 天。从 2015 年 6 月 1 日起新加坡将给予符合条件的中国公民有效期长达 10 年的多次入境签证。</p><p><a href="http://www.visitsingapore.com.cn/travel-guide-tips/travelling-to-singapore/" target="_blank" rel="noopener">http://www.visitsingapore.com.cn/travel-guide-tips/travelling-to-singapore/</a></p><blockquote><p>申请途径 How to Apply</p></blockquote><p>2014 年 12 月 8 日起大使馆及各领事馆停止接收签证申请，可登录新加坡外交部官网，查询中国国内官方指定的签证机构，办理新加坡签证。</p><blockquote><p>所需资料 Required Information</p></blockquote><ol><li>个人信息表（登录新加坡外交部官网下载表格，链接：<a href="http://www.mfa.gov.sg）" target="_blank" rel="noopener">www.mfa.gov.sg）</a></li><li>户口本（原件或扫描电子版，户主 + 个人页复印件）</li><li>身份证（原件或正反面扫描电子版，正反面复印件）</li><li>护照（原件或个人页扫描电子版，个人页复印件，有效期 6 个月以上）</li><li>2 张 2 寸白底免冠照片</li><li>在职证明原件或相关职业证书</li></ol><blockquote><p>出入境</p></blockquote><p>从 2018 年 10 月 4 日起，新加坡纸质入境卡（人称 “白卡”）即将走入历史！取而代之的是电子化入境卡。</p><p>访客可通过移民关卡局官方网站 <a href="https://www.ica.gov.sg/" target="_blank" rel="noopener">https://www.ica.gov.sg/</a> 或下载手机应用程序填写资料。通过手机填写资料还有自动储存功能，以方便下一次入境时使用。而与家人或小组团体同游新加坡的人，能够以团体方式提交入境资料。</p><p>离境前别忘了退税，在附有 “退税” 标志的场所消费满 100 新币以上，即可退回 7% 的商品及服务税，退税时需出示购物发票或收据。具体的退税要求，可咨询工作人员。</p><blockquote><p>其它注意事项</p></blockquote><p>电源插座：新加坡使用的标准电流是 220-240 伏特交流电（50 赫兹），在这里，您可以使用三眼电源插座。</p><p><a href="http://www.visitsingapore.com.cn/travel-guide-tips/" target="_blank" rel="noopener">http://www.visitsingapore.com.cn/travel-guide-tips/</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190802161219.png" alt></p><h2 id="新加坡工作准证"><a href="#新加坡工作准证" class="headerlink" title="新加坡工作准证"></a>新加坡工作准证</h2><blockquote><p>关于工作准证的最新信息请以新加坡人力部 (MOM) 发布的为准，比如 2020 年 EP 薪资要求就上升至 3900，未来金融 EP 直接上 5000</p></blockquote><p><a href="https://www.mom.gov.sg/" target="_blank" rel="noopener">https://www.mom.gov.sg/</a></p><p>在新加坡工作，新加坡人力部 Ministry Of Manpower (MOM) 是最常打交道的政府部门，工作准证不仅是由人力部批准和颁发所有文件提交最终也是到达人力部</p><p>注意：所有提交给 MOM 的资料原件，都需要在入境的时候随身携带。以便在去人力部办卡的时候，让长官核实和查阅。</p><ol><li>新版卡片上将不再印刷准证的到期日期，新版卡片会印上二维码（QR Code），下载 SGWorkPass 的手机 APP 后，可以扫码查看持卡人的职务、证件是否有效等信息</li><li>如果过海关或签合约等需要核对卡片截止日期时，不再可以只看卡面信息，还需要扫码或在线上核对截止日期等，建议保存 SGWorkPass 截图至手机中以防万一</li></ol><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190802161307.png" alt><br><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20200922115846.png" alt></p><p><a href="https://docs.qq.com/sheet/DeVh5ZEhKWnhCTldK" target="_blank" rel="noopener">如果发现表有错误请点击链接申请编辑更新，谢谢</a></p><h3 id="Work-Permit-WP"><a href="#Work-Permit-WP" class="headerlink" title="Work Permit (WP)"></a>Work Permit (WP)</h3><p>WP 是人力部设置的给外国低水准员工提供的工作准证。</p><p>对申请者的要求：薪水和学历：无要求<br>年龄：马来西亚人（18-58 周岁），非马来西亚人（18-50 周岁）；<br>对公司的要求：需要为其购买保额至少 15000 新币的保险；缴纳 5000 新币担保金<br>注意事项：<br>公司需要先为雇员申请好 WP 并办理保险，才可以持 WP 准证进入新加坡。在申请的状态中，本人不可以进入新加坡。</p><h3 id="S-PASS-SP"><a href="#S-PASS-SP" class="headerlink" title="S PASS (SP)"></a>S PASS (SP)</h3><p>SP 是人力部设置的给外国中级技术水准雇员提供的工作准证。</p><p>对申请者的要求：学历：大专，本科，或者技术资质认证（需要至少一年全职学习获得的技术认证）；<br>工作年限：虽然没有明文规定最少需要多少年的工作经验，但工作经验会作为一个审核标准；<br>对公司的要求：所付起薪 2200 新币；</p><p>注意事项：<br>也有公司人头配额限制：服务行业 SP 人数不可超过总员工的 15%，其它行业是 20%。<br>你在申请之前需要确保学历在 Dataflow，学信网及中国学位与研究生教育信息网上可以查到。另外，针对不同的行业，也有可能需要提交相关的专业证明。</p><h3 id="Employment-Pass（EP）"><a href="#Employment-Pass（EP）" class="headerlink" title="Employment Pass（EP）"></a>Employment Pass（EP）</h3><p>EP 是人力部设置的给外国专业人员（管理层，主管或专业职位）提供的工作准证. 是工作准证中级别最高的。</p><p>对申请者的要求：<br>年轻的申请者需拥有优秀院校的毕业证书，且达到 3600 的雇佣薪水以及拥有相关专业经验才可以申请。<br>至于年长的申请人，则必须拥有更高的薪水以及相应工作经验和工作质量。</p><p>对雇主的要求：<br>所付起薪 3600 新币</p><p>注意事项：<br>和申请 SP 一样，在申请之前需要确保学历在 Dataflow，学信网及中国学位与研究生教育信息网上可以查到。另外，针对不同的行业，也有可能需要提交相关的专业证明。<br>根据对应的准证类型，提交人力部 (MOM) 所要求的材料</p><ul><li>有效的护照信息</li><li>必要的技能证书</li><li>有效的毕业证</li></ul><p>2018 年 1 月 1 日起两件重要变化</p><ul><li>EP 准证持有人月薪至少 6000 新币以上可以给配偶和孩子申请相关准证(DP)</li><li>EP 准证持有人月薪至少 12000 新币以上可以申请父母长期探访准证（LTVP)</li></ul><h2 id="家庭成员准证"><a href="#家庭成员准证" class="headerlink" title="家庭成员准证"></a>家庭成员准证</h2><h3 id="Dependant‘s-Pass-家属准证（DP）"><a href="#Dependant‘s-Pass-家属准证（DP）" class="headerlink" title="Dependant‘s Pass 家属准证（DP）"></a>Dependant‘s Pass 家属准证（DP）</h3><p>家属准证，在新加坡工作或经商，并持有 EP SP 或 Enptrpass 的人士，可为自己的配偶及 21 岁以下小孩申请的一种准证。持家属准证的小孩，可直接入学新加坡政府中小学。</p><p>薪水：担保人固定月薪薪水需达到 5,000 新币以上。（2018 年 1 月 1 日起至少达到 6000 新币以上）。</p><p>工作：EP 或创业准证家属，可通过公司向人力部申请新加坡工作的凭证 LOC（Letter of consent），批准后，可直接工作（不占用公司配额）。SP 家属准证，需申请工作准证后才能工作。家属准证（DP）持有人申请到工作准证（EP 或 SP）后需取消 DP，SP 家属取得的工作准证有效期与 SP 持有人准证有效期相关。</p><h3 id="Long-Term-Visit-Pass-长期探访准证（LTVP）"><a href="#Long-Term-Visit-Pass-长期探访准证（LTVP）" class="headerlink" title="Long Term Visit Pass 长期探访准证（LTVP）"></a>Long Term Visit Pass 长期探访准证（LTVP）</h3><p>长期探访准证，是新加坡政府颁发的一种可以在新加坡长期居住的准证，期限从半年到十年不等。其中新加坡公民的配偶又可以申请获得 LTVP+。目前的审批部门有两个，一个是 ICA 移民厅，一个是 MOM 人力部。</p><p>需要去移民厅申请的：</p><ol><li>新加坡公民的配偶<br>2.PR 的配偶</li><li>新加坡公民 / PR 未满 21 周岁的小孩</li><li>新加坡公民 / 21 周岁以上 PR 的父母</li><li>寻求在新加坡工作的有关高校毕业生</li><li>小孩 / 孙辈在新加坡持学生准证读书的母亲或外祖母</li><li>寻求准许在新加坡分娩者</li></ol><p>新加坡移民局网址 - <a href="https://www.ica.gov.sg/" target="_blank" rel="noopener">https://www.ica.gov.sg/</a></p><p>需要去人力部申请的：</p><ol><li>EP/SP 准证持有者的配偶（2018 年 1 月 1 日起至少 6000 新币）</li><li>EP/SP 准证持有者未满 21 周岁的未婚残疾子女（2018 年 1 月 1 日起至少 6000 新币）</li><li>EP/SP 准证持有者未满 21 周岁的未婚继子女（2018 年 1 月 1 日起至少 6000 新币）</li><li>EP/SP 准证持有者的父母（2018 年 1 月 1 日起至少 12000 新币）</li><li>Entrepass（创业准证）的父母</li></ol><p>新加坡人力部网址 - <a href="https://www.mom.gov.sg/" target="_blank" rel="noopener">https://www.mom.gov.sg/</a></p><h2 id="新加坡手机通讯指南"><a href="#新加坡手机通讯指南" class="headerlink" title="新加坡手机通讯指南"></a>新加坡手机通讯指南</h2><p>国内的手机大部分都可以在新加坡直接换卡使用，除非你的手机是定制版本，由于网络制式的区别，无法使用新加坡网络。</p><blockquote><p>小贴士：建议使用全网通手机，去国外任何地方都可以直接换卡使用。</p></blockquote><p>运营商：新电信（Singtel）、星河（Starhub）和 M1（Mobile One）</p><p>在新加坡机场、邮局、7-11 便利店和代理商都可以购买和充值电话卡，记得一定要带上护照，新加坡的手机卡采用实名制。推荐大家下载所用运营商的 App，查询和购买话费、流量等。</p><blockquote><p>Zero1: Get Ready For Unlimited Data | Plans</p></blockquote><p>我自己办理的是 Zero1 的 9.9 新币 / 月无限流量套餐，背后合作运营商是 Singtel，质量靠谱</p><p>详情请参考官网：<a href="https://zero1.sg/" target="_blank" rel="noopener">https://zero1.sg/</a></p><ol><li>新加坡支持携号转网但仅限于 post-paid，pre-paid 是不支持的</li><li>不要过分追求价格便宜和大流量，信号稳定流量够用对工作和生活更加重要</li></ol><h2 id="新加坡交通指南"><a href="#新加坡交通指南" class="headerlink" title="新加坡交通指南"></a>新加坡交通指南</h2><p>新加坡主要交通出行方式：地铁（MRT）、轻轨（LRT）、巴士（Bus）和德士（Taxi）。</p><p>其中地铁（MRT）是新加坡最便捷的交通工具，也是日常最佳的出行方式。目前主要的运营线中，南北运营线以 “NS” 红线标明，东西运营线以 “EW” 绿线标明，东北运营线以 “NE” 紫线标明，环线以 “CC” 黄线标明，市区运营线以 “DT” 蓝线。</p><p><img src="https://www.lta.gov.sg/content/ltagov/en/getting_around/public_transport/rail_network/_jcr_content/par/textimage_967171583/image.img.png/1595500087101.png" alt></p><p>新加坡地铁图</p><p><a href="https://www.lta.gov.sg/content/ltagov/en/getting_around/public_transport/rail_network.html" target="_blank" rel="noopener">https://www.lta.gov.sg/content/ltagov/en/getting_around/public_transport/rail_network.html</a></p><p>新加坡地铁和巴士车 (站) 内规定</p><ol><li>不可吃喝、吸烟、携带榴莲、大声喧哗和带宠物 </li><li>Bus 不报站、上下车需要刷卡</li></ol><p>温馨提示</p><ol><li>地铁和巴士上冷气很足，建议携带薄外套</li><li>在 20 分钟内，地铁和巴士之间转换，车资有优惠</li><li>在地铁或者商场等使用扶梯时，左侧是站立侧，右侧是快速通道</li></ol><h2 id="新加坡房屋指南"><a href="#新加坡房屋指南" class="headerlink" title="新加坡房屋指南"></a>新加坡房屋指南</h2><blockquote><p>组屋(HDB)</p></blockquote><p>新加坡的“组屋”，全称为组合房屋。由新加坡建屋发展局（HDB）不以盈利为目的承担建筑的楼房，为大部分新加坡人（80%）的住所。</p><p>组屋一般分为三房式、四房式和五房式。三房式指一厅两房，使用面积约 60 平方米；四房式是一厅三房，使用面积约 90 平方米；五房式是两厅三房，使用面积大致在 110 平方米。</p><p>组屋的区分都是按照地区名 + 数字，例如：PasirRis Block 186（巴西立大牌 186）、YishunBlock 210（义顺大牌 210）等。</p><p>屋内客厅，厨房，卫生间都是公用设施，一般会配备冰箱，洗衣机，空调或者风扇。</p><blockquote><p>私人公寓(Condo)</p></blockquote><p>公寓，常见两房式或三房式，相当于国内的高档成熟社区，内有免费游泳池、健身房，BBQ 等公共设施，住宿环境相对较好，价格也相对高一些；大部分的 condo 房间都有主人房与非主人房之分，主人房有自己独立的洗手间和相对宽敞的卧室，当然价格也比非主人房高 200-300 / 月(非主人房平均价格<br>S$1,000-1,500 / 间 / 月)</p><blockquote><p>排屋(Terrace)</p></blockquote><p>独门不独栋的联排别墅，此类出租房源相对较少，住宿环境、价格与房子位置、条件有相当大的关系。</p><blockquote><p>独栋别墅(Landedproperty)</p></blockquote><p>少见于房间出租。</p><h2 id="新加坡租房"><a href="#新加坡租房" class="headerlink" title="新加坡租房"></a>新加坡租房</h2><blockquote><p>如果英语不是太差，不推荐狮城 BBS 或者微博租房，如果你有认识的新加坡房产中介自然是最佳选择</p></blockquote><p>PropertyGuru - <a href="http://www.propertyguru.com.sg/" target="_blank" rel="noopener">http://www.propertyguru.com.sg/</a></p><p>SRX - <a href="https://www.srx.com.sg/" target="_blank" rel="noopener">https://www.srx.com.sg/</a></p><p>新加坡本地发布平台，房源多。使用下来感觉 PropertyGuru 和 SRX 信息发布是最多的，信息筛选条件多，容易搜索到希望的房源。多为中介发布，有中介费。</p><p>我移除了 Nestia 和 99.co 因为根据新加坡房地产中介的建议他们只会在流量头部站点积极更新，其它站点基本疏于维护，租房房源一般 3 周以上就可能不用看已经租出去了。</p><p><strong> 租房费用 </strong></p><p>新型组屋 (近 10 年内建成的) 相对条件会好很多 (平均价格 S$1000-1200 / 间)</p><ul><li>单人单间：500-1000 新币</li><li>二人间：350-550 新币 / 人</li><li>四人间：270-350 新币 / 人</li></ul><p>如果是男女朋友或者夫妻家庭为单位，价格以新币计算就会比较高了</p><ul><li>租屋主人房: 1000-1500</li><li>组屋整租: 2500-3500</li><li>公寓 1 房整租: 2000-3000</li><li>公寓 2 房以上: 适合高收入家庭</li></ul><p><strong> 小贴士 </strong></p><ol><li>新加坡政府规定租住的房子必须要能在建屋局上注册。正常情况下，注册要求至少住 6 个月。如果不能注册，就是不合法的房屋。</li><li>如果退租，一定要提前一月声明，以防押金不退。</li><li>仔细看合同，仔细看合同，仔细看合同。</li></ol><blockquote><p>房间类型主要关注主卧和普通房，当然也可以直接整租</p></blockquote><p>主卧（Master Room）：房子里最大的那个房间，配有独立卫生间</p><p>普通房（Common Room)： 房间比主卧小，通常需要和别人合用洗手间</p><p>佣人房（Maid Room）：房间比较小，一般只能放一张单人床和一个衣柜，有些没有窗</p><p>避坑中介，可能是最全的新加坡租房合同条款解读 - <a href="https://www.shicheng.news/show/728651" target="_blank" rel="noopener">https://www.shicheng.news/show/728651</a></p><ul><li>“遇上黑心房东，上小额法庭”</li><li>“在新加坡租房，退房时房东让我赔偿 16,000 新币”</li><li>“新加坡租房，房东不退押金怎么办”</li><li>“房东扣 2 个月押金不退，我反被告上法庭赔偿”</li><li>“合约中途要求换房客，房东不同意怎么办”</li><li>“租约一年不能旅履行，可以提前终止么”</li></ul><p>地表最强新加坡水电网实用指南，get 一下 - <a href="https://www.shicheng.news/show/837984" target="_blank" rel="noopener">https://www.shicheng.news/show/837984</a></p><p>在新加坡租房，有哪些经验可以分享？ - <a href="https://www.zhihu.com/question/22430961" target="_blank" rel="noopener">https://www.zhihu.com/question/22430961</a></p><h2 id="新加坡水电网常见问题"><a href="#新加坡水电网常见问题" class="headerlink" title="新加坡水电网常见问题"></a>新加坡水电网常见问题</h2><p>水电费用估算，以 SP Utilities 为例</p><ul><li>租屋：平均每人每月 50 新币左右</li><li>公寓：平均每人每月 100 新币左右</li></ul><p><a href="https://www.spgroup.com.sg/wcm/connect/spgrp/54a21e82-4ab6-47b4-8dee-39ab6a746c13/%5BInfo%5D+Understanding+Your+Utilities+Bill.pdf?MOD=AJPERES" target="_blank" rel="noopener">Understanding Your Utilities Bill</a></p><p>网络：推荐 Singtel，更加稳定可靠</p><ol><li>主要 Singtel 和 StarHub，如果不想绑定 2 年合约限制可以考虑接手他人的转让合约</li><li>以 1Gbps 为例，合约价格基本在 45-50 新币每月左右</li></ol><p>银行缴费方法：以缴纳 Keppel Electric 为例，如果是 SP Services Limited 搜索 SP 关键词就可以看到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DBS：</span><br><span class="line">1a. Select “Pay” -&gt; “Pay Bills” from top ribbon</span><br><span class="line">1b. Select “Billing Organization not in my pre-arranged list” from “Select Payment Option”</span><br><span class="line">1c. Select “Keppel Electric (Residents)” under Billing Organization list</span><br><span class="line">Click Next</span><br><span class="line">2a. Input your 10-digits account number into the “Bill Reference” field</span><br><span class="line">2b. Input the payable amount in to the “Payment Amount” field</span><br><span class="line">Click Next</span><br><span class="line">3. Follow through your 2FA and complete the payment</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UOB：</span><br><span class="line">1a. Select “Pay and Transfer” -&gt; “Pay Bills” from left ribbon</span><br><span class="line">1b. Follow through your 2FA process</span><br><span class="line">1c. If “Keppel Electric (Residents)” is not found in Billing organization list, click “Add new payee here.”</span><br><span class="line">2a. Select “Keppel Electric (Residents)” under Billing Organization list</span><br><span class="line">2b. Input your 10-digits account number into the “Bill Reference Number” field</span><br><span class="line">2c. Click Submit</span><br><span class="line">3a. Follow through your 2FA and complete the payment</span><br><span class="line">3b. Select which bank account to be deducted from</span><br><span class="line">3c. Click Continue and Confirm</span><br></pre></td></tr></table></figure><h3 id="Singtel-路由器设置方法"><a href="#Singtel-路由器设置方法" class="headerlink" title="Singtel 路由器设置方法"></a>Singtel 路由器设置方法</h3><p>Singtel 路由器简介</p><ol><li>Huawei HG8240T5 Optical Network Router (ONR) ，就是文章里 feiy 提到的 Singtel 光纤 + 路由硬件<br><a href="https://www.singtel.com/personal/support/broadband/routers-ont" target="_blank" rel="noopener">https://www.singtel.com/personal/support/broadband/routers-ont</a></li><li>Singtel-issued AC Plus router，这个大家伙算是路由器，但真的登录上去又会发现有很多阉割限制<br><a href="https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide" target="_blank" rel="noopener">https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide</a></li><li>一般首次安装 Singtel 工作人员会上门配置，如果涉及 resale 转让或者搬家建议和 Singtel 官方客服确认清楚细节流程，这样可以有效减少不必要的麻烦</li></ol><p>Singtel 路由器常见问题</p><ol><li>路由器到底怎么登录进去？官网留了个坑就是 feiy 提到的需要移除网线断电重启才能真正进入路由器后台，无需密码，<a href="http://192.168.1.254/" target="_blank" rel="noopener">http://192.168.1.254/</a><br><a href="https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide/change-wireless-settings" target="_blank" rel="noopener">https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide/change-wireless-settings</a></li><li>Band Steering 自动频段切换要不要禁用，禁用的好处是可以分别独立开启 2.4G 和 5G 并重新命名不同名字的 SSID，但我还没有详细的评测数据，目前体验下来暂未发现问题，欢迎补充</li><li>如果是游戏用户或者对网速要求较高，老老实实用有线网络会比较合适，充分榨干 1Gbps</li></ol><p>Singtel 路由器配置过程小结</p><ol><li>我最初的需求是计划修改 SSID，默认密码，独立设置 2.4G 和 5G，交换机和路由器 192.168.1.1/24 网段分离避免 192.168.1.254 地址冲突导致无法进入路由器后台的尴尬</li><li>最后不做任何配置修改，感觉也没必要折腾，但如果我未来觉得有其它问题还是会再回来调优的</li></ol><p><a href="https://feiyang233.club/post/singtel/" target="_blank" rel="noopener">singtel 路由器踩坑经历</a></p><p><a href="https://www.pupboss.com/singtel-fibre-vs-starhub-fibre/" target="_blank" rel="noopener">新电信 Singtel vs 星和 StarHub 宽带对比</a></p><h2 id="在新加坡买房与中国有何不同？"><a href="#在新加坡买房与中国有何不同？" class="headerlink" title="在新加坡买房与中国有何不同？"></a>在新加坡买房与中国有何不同？</h2><blockquote><p>无论在中国还是新加坡买房前后都记得关注下政策上的变化，新加坡买房的流程很简单，首付 = 房屋价格 + 税 + 中介费 - 贷款额度。</p></blockquote><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20200109111339.png" alt></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190802162119.png" alt></p><p>① 面积</p><p>说到面积，首先让中国买家摸不着头脑的，就是面积单位的换算。中国买家习惯用平方米（也称平方公尺）计算面积，来新加坡选购房子时听到的都是平方英尺，往往脑子得转一圈才知道个大概。1 平方米约等于 10.8 平方英尺。100 平方米就是 1080 平方英尺。</p><p>除了计算单位不同，“面积”一词在两地公寓市场上的定义也不一样。在中国，面积指的是建筑面积；新加坡算的是实用面积。建筑面积的算法比较繁琐。简单来讲，是根据各套房屋的套内建筑面积，求得各套房屋分摊所得的共有建筑分摊面积，比如门口的面积、楼梯等，都按比例算进每一个单位的建筑面积。</p><p>所以，同一个公寓单位，其建筑面积一定会大于实用面积，通常后者比前者少 20％左右。在中国买一个 “100 平方米” 的单位，和在新加坡买一个“1080 平方英尺”（相当于 100 平方米）相比，后者明显感觉宽敞一点，就是这个道理。</p><p>② 地契</p><p>中国的房产地契通常是 70 年左右，而新加坡的则有 99 年、999 年和永久地契之分。新加坡的房产因为地契年限长，颇受外籍人士青睐。其中，永久地契的房产一般要比 99 年地契的贵 20％。尽管如此，永久地契一直很抢手，也深受中国买家欢迎，因为买家看准这块市场的保值与增值。</p><p>这其中很大程度上因为新加坡的地皮比较少，想要建新楼必须拆掉现有的建筑。不像中国地皮比较多，还有可开发的地段。新加坡永久地契的地段价值比较高，所以如果进行集体出售、或是被政府征用的话，永久地契房地产的房主会可得到较高的补偿。</p><p>物以稀为贵，永久地契房产越是少见，也就越炙手可热。此外，永久地契对中国买家还有另一大吸引力，那就是永久地契满足了 “总觉得要给后代留下点什么” 的传统华人心愿。所以说，新加坡房产能如此吸引外国买家，与地契久脱不了关系。</p><p>③ 贷款</p><p>在新加坡首次购房的买家，可向金融机构贷款的房贷比率顶限为 80％，外籍人士一般则最高 70％。在中国，外国人一般不能向本土中国银行贷款，只能通过外资银行或中国银行境外支行。</p><p>原本新加坡和中国在房贷比率顶限方面有很大差别。不过两国都不断调整房贷比率顶限，因此两国的房贷比率顶限差别已缩小。</p><p>④ 税收</p><p>在新加坡，如果在一定期限里卖掉公寓，卖家需要上缴印花税。在 2011 年 1 月 14 日过后买房的购屋者，只要在四年内卖房屋都需要支付卖方印花税，第一、二、三和四年卖掉房产的税率分别是 16％、12％、8％和 4％。此后就不必上缴卖家印花税。</p><p>在中国，除了印花税外，还需要上缴增值税。为了给中国房地产市场降温，中国政府在 2013 年实施 20％的房地产买卖增值税。所谓增值税，就是对卖家卖房所得的利润征收的税。譬如，150 万人民币买的房子在几年后以 200 万人民币卖掉，卖家所赚得的 50 万就将需要以一定的比率交税。</p><p>⑤ 车位</p><p>在中国购买中高档住宅，需要另外购买车位。而在新加坡，买家不需要另付车位费，发展商一般会为每个新单位赠送一个车位。可不能小瞧这个车位费。近年来，车位费在中国节节攀升，动辄十几、二十万人民币，是一笔不小的开销。</p><p>新加坡私人公寓不收车位费，而是将停车场的修建和维护等费用，包括在每月的项目管理费之中。管理费除了车库，还包括游泳池、健身房等设施，每月一般是几百元新元。如果每月的管理费是 300 元新元（约 1400 元人民币），一年就是 1 万 7000 元人民币，15 年刚好是 25 万 5000 元人民币。总体来讲，这要比中国的车位 “划算” 得多。</p><blockquote><p>一般来新加坡时间比较早比如本科前，然后工作半年能顺利拿到 PR，夫妻都是 PR 且满 3 年那么组屋 HDB 是一个非常高性价的首选，如果名下海外有房产或家庭月收入超过 14000 那么就只好选择私人公寓 Condo</p></blockquote><p>政府组屋 (Housing Development Board Flats 简称为 HDB)</p><p>执行共管公寓 (Executive Condominiums 简称为 EC) </p><p>私人公寓 (Private Condominium 简称 Condo)</p><p>购买私人住宅 vs 执行共管公寓 vs 政府组屋 - <a href="https://xinjiapoloupan.cn/sirengongyu-vs-zhuwu/" target="_blank" rel="noopener">https://xinjiapoloupan.cn/sirengongyu-vs-zhuwu/</a></p><p>新加坡买房必看：门道竟然这么多 - <a href="https://www.luobodianping.com/copy-of-1" target="_blank" rel="noopener">https://www.luobodianping.com/copy-of-1</a></p><h2 id="新加坡医疗指南"><a href="#新加坡医疗指南" class="headerlink" title="新加坡医疗指南"></a>新加坡医疗指南</h2><p>新加坡是一个热带国家，从国内刚过去有可能因水土不服引起的伤风、感冒、皮肤敏感或蚊虫叮咬等。出行之前可以带一些三九胃泰、牛黄解毒等日常药品之类的药品，防范于未然是最好的。</p><p>看医生：在新加坡持有工作签证，所在的公司会按照新加坡劳工部规定给每位员工会购买医疗保险或者费用报销。</p><p>医疗保险：一般是三种模式</p><ol><li>直接去合作门诊，提供公司信息，看病不用自己拿钱。</li><li>直接去合作门诊，提供公司信息，看病前给门诊 5 新币（每个公司不一样），其它的费用不用自己拿。</li><li>直接去合作门诊，自己先付产生的费用，然后去公司报销。意外伤害险等（视公司合同规定）。</li></ol><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20191219193504.png" alt></p><p><a href="https://toutiaosg.com/%E6%96%B0%E5%8A%A0%E5%9D%A1%E5%8C%BB%E7%96%97%E5%85%A8%E7%90%83%E7%AC%AC%E4%B8%89%EF%BC%8C%E5%87%AD%E4%BB%80%E4%B9%88%EF%BC%9F/" target="_blank" rel="noopener">新加坡医疗全球第三，凭什么？</a></p><h3 id="公立和私立医疗服务"><a href="#公立和私立医疗服务" class="headerlink" title="公立和私立医疗服务"></a>公立和私立医疗服务</h3><blockquote><p>中国人在新加坡看病就好比外国人在中国看病一样不是很方便，价格不便宜，小病也有可能看成大病</p></blockquote><p>新加坡的医疗服务体系以优质高效著称，选择面广, 综合医院，专科医院，私人诊所遍布全国, 随处可见；不仅为全新加坡的公民，永久居民，外籍工作人士提供服务，同时周边国家的高端人群, 包括东南亚、亚洲、欧洲、中东阿拉伯等国家的病患都会将新加坡的国际医疗服务作为他们的首选。</p><p>新加坡的公立医疗机构和私立医疗机构在整个医疗系统中扮演着不同的角色。基础医疗门诊 80% 由私立医疗机构 / 家庭医生诊所提供，另外 20% 则是由政府综合诊疗所提供；而综合医疗，包括各类科室的住院，专科和 24 小时急诊主要由公立医疗机构提供，占 80% 的比例，剩下的 20% 由私立医疗机构提供。由于政府的有效规划和管控，公立医院和私立医院相辅相成, 缺一不可。</p><p>在公立医疗机构就诊一般都需要提前预约, 候诊时间较长, 也不能自由选择医生。由于那里的医生要面对更多的患者, 为每个患者服务的时间相对较短；而私立医疗机构由于患者相对较少, 不需要预约, 候诊时间较短，还可以自己选择医生，医生也能与患者作更多的交流, 提供更细致的服务，收费就相应高一些。</p><p>一些新加坡的公立医院也为自费病人提供高端医疗服务, 设有针对性的部门和项目, 如体检，会诊，专科治疗等。基础的检查和服务, 公立医院比私立医院收费较低；对于外籍人士和高端的服务项目, 公立和私立医院的收费差异不大。</p><p><a href="https://mp.weixin.qq.com/s?__biz=MzIwMTQxODUxNw==&amp;mid=2650871863&amp;idx=3&amp;sn=b9536c73a1b6a0e0ed02019598d75c35&amp;chksm=8d1b8a4dba6c035b898a133fdf30ec613eb6826a0f4a66d5befe6364a04e24fb6bde9a981ce7&amp;scene=21" target="_blank" rel="noopener">8 家新加坡著名的公立和私立医院</a></p><h2 id="货币兑换和汇款"><a href="#货币兑换和汇款" class="headerlink" title="货币兑换和汇款"></a>货币兑换和汇款</h2><blockquote><p>不要贪图小便宜走非正规渠道，得不偿失</p></blockquote><p>新加坡实行货币开放政策，货币兑换中心随处可见，尤其是在牛车水 (China Town) 附近。如有汇款需求到国内，新加坡老牌的有长城和汉生，互联网后起之秀有熊猫速汇 Pandaremit</p><p>小贴士：第一次汇钱到国内，当填写汇款单据的时候一定要知道对方银行卡是在 <strong> 省 </strong> 市 ** 银行支行开户的(很重要)。</p><h2 id="法律法规"><a href="#法律法规" class="headerlink" title="法律法规"></a>法律法规</h2><p>新加坡向来是给世人展示优美环境，井然秩序，舒适安全的名片，然而这些美好的展现离不开新加坡法律制度的约束和规范。Singaporeis a“fine”country 完整的诠释了这两方面。所以在新加坡生活，你需要注意以下细节：</p><ol><li>自动排队：公共场合最经常听到的一句话就是 please queue！</li><li>着装：不同场合穿不同衣服, 建议每天换衣服。</li><li>公共习惯：乘坐公共交通或者在公共场合用餐时, 切忌大声喧哗, 不然你一样会被当做异类奥! 而且记得再饿也要撑到下车再用餐。</li><li>言论：新加坡是多文化和宗教融合的国家, 公共场合不要发表敏感政治言论或者宗教话题, 这也体现互相尊重。</li><li>不当行为：竖中指可能会被当做种族歧视处理的</li><li>如厕：来也匆匆, 去也冲冲。如若不然请准备 500 新币吧。</li><li>口香糖：公共场所不允许嚼口香糖, 不可以随意买卖, 允许带少量入境, 正是这个奇葩的规定维护了公共环境的整洁。</li><li>吸烟：新加坡公共场所绝对禁烟。如若吸烟不幸被抓到, 恭喜你一个月的工资 (高达 2000 新币) 为国家做贡献了!</li><li>垃圾：乱丢垃圾初犯者将处高达 1000 新币罚款, 再犯者将罚款额提高至 2000 新币以及在劳改法令下受罚。</li><li>交通规则：闯红灯, 随便乱穿马路这些不多啰嗦。违反的是规则, 伤害的是人身安全, 因为小编也感觉马路上的车如同闪电般行驶。</li><li>不可非法聚会和使用暴力</li></ol><p>以上内容是提醒大家在生活细节方面应遵守的规则, 但有些行为未必就可以罚款结案的, 比如: 签证到期后逾期逗留、抢劫、公共场所涂鸦、纵火、携带毒品等这些可都是在鞭刑的定罪范围内的。</p><p><strong> 最后郑重的提醒各位：</strong> 在机场不要发扬助人为乐精神帮陌生人携带物品, 因为很有可能你同时把生命交给了别人(运输毒品和贩毒同罪)。</p><h2 id="常用证件遗失如何处理"><a href="#常用证件遗失如何处理" class="headerlink" title="常用证件遗失如何处理"></a>常用证件遗失如何处理</h2><h3 id="工作准证遗失如何处理"><a href="#工作准证遗失如何处理" class="headerlink" title="工作准证遗失如何处理"></a>工作准证遗失如何处理</h3><ol><li>发现丢失后立即携带护照或者工作准证的复印件到任何一间警察局报案，记得保存报案记录原件。</li><li>通知雇主公司 HR, 让其在 7 天之内在新加坡人力部网上提交补办工作准证的申请。</li><li>费用: 首次补办 100 新币, 第二次是 300 新币(一般在提交申请补办 4 个工作日可去新卡)</li></ol><h3 id="银行卡遗失如何处理"><a href="#银行卡遗失如何处理" class="headerlink" title="银行卡遗失如何处理"></a>银行卡遗失如何处理</h3><ol><li>发现遗失后立即拨打银行客户服务中心热线挂失</li><li>银行客户专员会核对护照和工作准证信息, 然后等待新卡邮寄到住处或者去支行直接领取。</li></ol><p>POSB 用户请拨打 18003396963<br>DBS 用户请拨打 18001111111<br>UOB 用户请拨打 18002222121<br>OCBC 用户请拨打 18003633333</p><h3 id="护照遗失如何处理"><a href="#护照遗失如何处理" class="headerlink" title="护照遗失如何处理"></a>护照遗失如何处理</h3><p>如护照遗失或被盗, 请立即到中国驻新加坡大使馆如实填写《护照遗失陈述表》，提供关于护照遗失或被盗的情况说明, 以及提供报警记录原件及复印件。如护照损毁, 请提交损毁的护照, 以及护照损毁的原因说明。</p><p>具体的更换护照和网上预约等等详细流程请参考大使馆的官网：<a href="http://www.chinaembassy.org.sg/chn/" target="_blank" rel="noopener">http://www.chinaembassy.org.sg/chn/</a></p><p>中国驻新加坡大使馆信息:</p><p>地址: 150 TANGLIN ROAD,SINGAPORE 247969</p><p>领事部：64712117；92971517(仅限紧急领保求助, 不接受证件咨询)</p><p>Email: <a href="mailto:chinaemb_sg@mfa.gov.cn" target="_blank" rel="noopener">chinaemb_sg@mfa.gov.cn</a></p><p>办公时间：周一至周五(节假日除外)</p><p>上午 9:00-11:30</p><h2 id="设定-GIRO-自动缴费"><a href="#设定-GIRO-自动缴费" class="headerlink" title="设定 GIRO 自动缴费"></a>设定 GIRO 自动缴费</h2><p>GIRO （General Interbank Recurring Order） 是一个自动缴款的机制，可以用来自动扣缴以下费用。</p><ul><li>水电费（SP Group）</li><li>三大电信商手机、网络费 SingTel， StarHub， M1 Limited。</li><li>银行信用卡费。</li><li>银行定期定额基金投资。</li><li>健身房会费。</li><li>等等… DBS 支持的完整列表在此： <a href="https://www.dbs.com.sg/personal/deposits/pay-with-ease/local-bill-payments/giro-payee-organisations.page" target="_blank" rel="noopener">GIRO Billing Organisation</a> 。</li></ul><p>DBS 设定的方法是。</p><ol><li>从 <a href="https://www.dbs.com.sg/personal/deposits/pay-with-ease/local-bill-payments/giro-payee-organisations.page" target="_blank" rel="noopener">GIRO Billing Organisation</a> 列表里找到你想使用的服务，确认他指定的参考编号规则。</li><li>从以前的账单或登入会员网站找到你的参考编号。</li><li>登录 iBanking 并根据 <a href="https://www.dbs.com.sg/personal/support/bank-payment-setup-giro-arrangement.html" target="_blank" rel="noopener">Set Up GIRO Arrangement</a> 新增 GIRO。</li></ol><p>其他主要银行的相关说明。</p><ul><li><a href="http://www.ocbc.com/personal-banking/help-and-support/payments-giro.html" target="_blank" rel="noopener">OCBC</a></li><li><a href="https://www.uob.com.sg/corporate/transaction-banking/payables-solutions/interbank-giro.page" target="_blank" rel="noopener">UOB</a></li></ul><p>申请方式应该大同小异，如果没有或不会使用线上申请接口，也可以临柜办理。</p><h2 id="新加坡日常-App-推荐"><a href="#新加坡日常-App-推荐" class="headerlink" title="新加坡日常 App 推荐"></a>新加坡日常 App 推荐</h2><blockquote><p>如果是 Android 记得安装 Google 框架，如果是 iOS 记得调整更改 Apple ID 国家或地区</p></blockquote><p>交通: Grab(类似国内滴滴)、Google Map(谷歌地图)、SG Buses(公交时刻表)</p><p>社交: Facebook、WhatsApp、Twitter、Instagram</p><p>购物: Shopee、Lazada、eBay、Amazon、淘宝国际、京东国际、网易严选、小米有品、拼多多</p><p>娱乐: Youtube(视频必备)、 Golden Village(电影院)、CATHAY (电影院)</p><p>快递: ezShip，小坡岛集运，淘宝直送 / 集运</p><p>微信公众号: </p><ul><li>新加坡眼</li><li>新加坡狮城椰子</li></ul><p>视频 / 音频播客:</p><ul><li><a href="https://www.youtube.com/channel/UClL3IBde8AhRSqGXioa3FiA" target="_blank" rel="noopener">AbbieLu 新加坡</a></li><li><a href="https://www.ximalaya.com/toutiao/5218657/" target="_blank" rel="noopener">俊玮谈新</a></li></ul><p>特别推荐: </p><ul><li><a href="https://zero1.sg/" target="_blank" rel="noopener">Zero1</a>: 9.9 每月无限流量手机卡</li><li><a href="https://originallyus.sg/products/" target="_blank" rel="noopener">SG BusLeh</a>: 个人认为是比 SG Buses 更好用的公交时刻表</li><li><a href="http://refer.eatigo.com/eati17aqf-1v9" target="_blank" rel="noopener">eatigo</a>: 开启新加坡美食 5 折之旅</li><li><a href="https://app.shopback.com/sgp?raf=kxg2ZG" target="_blank" rel="noopener">ShopBack</a>: 类似于国内的购物返现平台</li><li><a href="https://ezbuy.sg/ezShip" target="_blank" rel="noopener">ezShip</a>: 我使用 ezShip 代替小坡岛运送来自中国和美国的产品，价格更优惠</li><li><a href="https://mall.ebuymart.sg/#/pages/invitation-share/invitation-share?_id=5f37cc34031f52034554122c" target="_blank" rel="noopener">EBuyMart</a>: 终于在新加坡有人做了国内盒马 + 百果园的结合体，不再依赖新加坡线下本地超市做到买菜自由</li></ul><p>推荐信息聚合平台:</p><ul><li><a href="https://toutiaosg.com/" target="_blank" rel="noopener">新加坡头条</a>: 聚合了主流的新加坡本地中文站点，用来搜索历史记录比较合适</li><li><a href="https://blog.seedly.sg/" target="_blank" rel="noopener">Seedly</a>: 熟悉新加坡本地的银行金融，保险，买房投资规则</li><li><a href="https://www.moneysmart.sg/" target="_blank" rel="noopener">MONEYSMART</a>: 详细的金融类评测对比报告</li><li><a href="https://www.singsaver.com.sg/" target="_blank" rel="noopener">SingSaver</a>: Personal Finance Comparison Site</li><li><a href="https://bestinsingapore.com/" target="_blank" rel="noopener">bestinsingapore</a>: 针对不同需求给出行业内的商户一些排名，方便做选择和比较</li><li><a href="https://expatliving.sg/expat-living-readers-choice-awards-winners-results-for-2021/" target="_blank" rel="noopener">READERS’ CHOICE AWARDS</a>: 道理同上</li></ul><h2 id="新加坡至其他国家旅游"><a href="#新加坡至其他国家旅游" class="headerlink" title="新加坡至其他国家旅游"></a>新加坡至其他国家旅游</h2><blockquote><p>旅游可以具体向专业旅行社咨询，以政策变化为准</p></blockquote><p><a href="http://cs.mfa.gov.cn/wgrlh/lhqz/cjwdn_660600/t1175681.shtml" target="_blank" rel="noopener">境外中国公民赴香港特区怎么办理？</a></p><ol><li>持中华人民共和国护照，在海外过境香港特区前往中国内地或其他国家（或地区），凭有效护照和联程机票，可免办进入许可并在港停留 7 天。持中华人民共和国护照，自内地经香港特区前往其他国家（或地区），出示联程机票和前往国家或地区的签证，或合法居留证件 (如 “绿卡”) 后，可免办进入许可并在香港特区停留 7 天。 </li><li>如预计在香港特区停留超过 7 天，应事先申请进入许可。中国驻外使领馆可根据申请人情况签发 3 个月一次或两次有效，每次停留不超过 30 天的进入许可。持有外国永久居留证件，并在海外居住不少于 1 年者，可申请两年多次有效进入许可。</li></ol><p><a href="https://mp.weixin.qq.com/s?__biz=MzAxMjA4NzQzNA==&amp;mid=503621899&amp;idx=1&amp;sn=62d66af2463312f4d66adf0a272e71f8&amp;chksm=004730ee3730b9f8b6a0ece62952493af344cce03f3a9fb8504a3e3a9a15777f6e351d285d26&amp;mpshare=1&amp;scene=23&amp;srcid=08022k223Jxs2MD7XXeHCXxT&amp;sharer_sharetime=1564734537933&amp;sharer_shareid=456ba82bbd1a1c9f32e5725824095308%23rd" target="_blank" rel="noopener">新加坡到各国签证办理条例</a></p><h2 id="新加坡父母签证"><a href="#新加坡父母签证" class="headerlink" title="新加坡父母签证"></a>新加坡父母签证</h2><blockquote><p>网上找到的，忘记出处了，如果有错误描述请及时指正</p></blockquote><p>本人 PR，老婆七月份预产期。打算让父母 6 月中旬来。计划步骤如下:<br>1, 先买往返机票（返程可更改的）。<br>=== 对的。<br>2,5 月份申请父母旅游签证。<br>=== 旅游签证可提前一个月内申请，有效期多数 63 天，也有一年，两年，非固定。有效期内入境即可。<br>3, 父母来新后申请延期至 89 天。<br>=== 对的。<br>4, 同时申请 LTVP。<br>=== 也没错。<br>5, 悲剧后申诉。<br>=== 步骤没错。<br>请指点一下按这样做有什么不拖吗？<br>=== 有什么不妥是吧？没什么不妥的，如果觉得自己条件还可以，就可以早点安排申请 LTVP，如果觉得条件比较牵强，可以晚一点入境，晚一点延期，晚一点申请 ltvp，争取在月子后多待一点时间帮你们带孩子。<br>可以现在就申请旅行签证吗?<br>=== 提前一个月内申请，一个月内，内。<br>旅行签证有效期多久? 一年多次吗？<br>=== 上面已经回答了。<br>申请 LTVP 必须人在新加坡吗？<br>=== 是的。必须入境后申请。</p><p><a href="https://www.ica.gov.sg/" target="_blank" rel="noopener">https://www.ica.gov.sg/</a></p><h2 id="新加坡婚礼红包份子钱"><a href="#新加坡婚礼红包份子钱" class="headerlink" title="新加坡婚礼红包份子钱"></a>新加坡婚礼红包份子钱</h2><blockquote><p>婚礼怎么随份子钱，是个讲究活儿。它不仅是人情的体现，也是婚礼平衡开支的一种方式</p></blockquote><p>切记要分清是 “午宴” 还是 “晚宴”，时间是在工作日还是周末。毕竟在不同时段，价格差异很大。</p><p>想知道新加坡各大酒店在工作日、周末或公共假期时的婚礼餐标，可以查看<a href="http://www.weddingangbao.com" target="_blank" rel="noopener">Wedding Ang Bao</a></p><p>这可以通过知道婚礼举办地每桌的费用来推算出最合适的红包金额。计算方式是，每桌的基本费用处以 10，就能得到最低应给红包金额。比如婚宴每桌需要 1000 新币（包括了消费税 7% 和服务税 10%）。每桌 10 位客人。将 1000 除以 10，平均每人需要送红包 100 新币。</p><p>另外，由于红包的价格通常是整数，最好包一些新加坡人认为是比较吉利的数字。礼金金额切忌有 1，3 或 4，因为它被认为是不吉利的。最常见的礼金金额是 100 新币、120 新币、128 新币、150 新币、160 新币。</p><ul><li>红包的行情，是在餐馆还是酒店举行，午宴或晚宴，平日或周末，都不相同<ul><li>CAPELLA，ST.REGIS 等这种超级高大上的酒店一般要给 200-250 新币 / 人</li><li>金沙，香格里拉等酒店则是 160-200 新币 / 人</li><li>希尔顿，圣淘沙的酒店则是 150-200 新币 / 人</li><li>凯悦，泛太平洋酒店则是 120-150 新币</li><li>非酒店的餐馆，一般 100-120 新币 / 人</li><li>如果是自助餐档次的呢，80-100 新币 / 人</li></ul></li><li>红包的数目其实就是按人头计算，常用的计算方式是每桌的基本费用处以 10</li><li>关系特别好的时候，有些朋友也会在最少红包数额的基础上加 100-200 新币哦</li></ul><h2 id="新加坡公民-永久居民-外国人的区别"><a href="#新加坡公民-永久居民-外国人的区别" class="headerlink" title="新加坡公民 / 永久居民 / 外国人的区别"></a>新加坡公民 / 永久居民 / 外国人的区别</h2><blockquote><p>我们大多数人的起点是外国人，这点与国内的户口制度类似，无论是中国还是新加坡始终绕不开买房和教育这两座大山</p></blockquote><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190802162244.png" alt></p><p><a href="https://docs.qq.com/sheet/B80RhZ2ZATLC0ge3Bi2bLYpr2iY5PC1nE3031LWRcK1rTcgj0Z2bvD00bDO63Ie3tz2ovOwW4" target="_blank" rel="noopener">如果发现表有错误请点击链接申请编辑更新，谢谢</a></p><h2 id="EP-申请-PR"><a href="#EP-申请-PR" class="headerlink" title="EP 申请 PR"></a>EP 申请 PR</h2><blockquote><p>在新加坡工作满半年即可申请 PR，不过大概率是被拒的，失败后等待半年继续申请挑战吧</p></blockquote><p>新加坡 PR 查询统计系统，可以查看 PR 申请登记成功或者失败的例子，做个参考</p><p><a href="http://sgprapp.com/listPage" target="_blank" rel="noopener">http://sgprapp.com/listPage</a></p><p>Becoming a Permanent Resident</p><p><a href="https://www.ica.gov.sg/apply/PR/apply_PR_who" target="_blank" rel="noopener">https://www.ica.gov.sg/apply/PR/apply_PR_who</a></p><blockquote><p>申请步骤均在网上完成，务必提前准备好申请材料，重点检查 4、6、7、9、10</p></blockquote><ol><li>有效的护照个人信息和官方备注页面，原件与复印件</li><li>EP 或 S Pass 准证原件及复印件</li><li>身份证（如有）</li><li>出生证明或者家庭户口（非英文需要公证书翻译）</li><li>更名证明文件（如有）</li><li>标准护照尺寸照片</li><li>最高学历（成绩单，资格证，会员资质等也可提供）(非英文需要公证书翻译)</li><li>以前雇主的推荐信，说明就业的性质，持续时间以及基本工资（如有）</li><li>过去六个月的工资单</li><li>现任雇主的信函，说明就业日期，过去六个月的每月工资，包括加班和津贴，可以找 HR 准备，要在申请前一个月内开具此信件</li><li>IRAS 同意书，表示同意 ICA 获取和核实与此相关的财务信息</li><li>对于自雇人士，需出示有效商业登记证明书并显示合伙人姓名</li><li>对于自雇人士，与工作有关的职业执照（例如小贩执照，营业执照， 物业代理牌照）</li></ol><blockquote><p>已婚人士还需要这些：</p></blockquote><ol><li>结婚证书（非英文需要公证书翻译）</li><li>关于之前婚姻的死亡证明或离婚证明（如有）</li><li>关于以前婚姻的子女的监护文件（如有）</li><li>配偶的最高教育证书（包括大专学历），成绩单，职业资格证等（非英文需要公证书翻译）</li></ol><blockquote><p>如果配偶一同申请：</p></blockquote><ol><li>配偶的有效旅行证件及有效的入境通行证，护照（资料页）</li><li>配偶的出生证明（非英文需要公证书翻译）</li><li>更名文件（如有）</li><li>配偶的身份证（如适用）</li><li>关于配偶以前的婚姻离婚证明以及孩子的监护文件，或者死亡证明（如有）</li></ol><blockquote><p>如果孩子一起申请：</p></blockquote><ol><li>孩子的护照资料页</li><li>孩子的出生证明，显示孩子和父母的姓名（非英文需要公证书翻译）</li><li>儿童收养文件（如适用）</li><li>儿童改名证明（如适用）</li></ol><p>关于其他的申请条件可以访问移民局网站，查询需要提交的资料。</p><blockquote><p>关于 PR 申请期间搬家修改住址需要更新信息，可以直接 Email ICA</p></blockquote><p>把需要更新的扫描件发给 <a href="mailto:ICA_PR@ica.gov.sg" target="_blank" rel="noopener">ICA_PR@ica.gov.sg</a>，邮件标题可以写”Updates documents for PR application EPR-20XX-PRE-XXXXX“（PR 申请记录号码）。通常会有人工回复的，说是收到了</p><p><a href="mailto:ICA_PR@ica.gov.sg" target="_blank" rel="noopener">ICA_PR@ica.gov.sg</a><br><a href="mailto:ICA_Feedback@ica.gov.sg" target="_blank" rel="noopener">ICA_Feedback@ica.gov.sg</a></p><p>A) Applicant / Sponsor’s full name:</p><p>B) Applicant /Sponsor’s NRIC/FIN :</p><p>C) Application Reference Number (if any):</p><p>D) Your contact number:</p><p>【最全注意事项】申请新加坡永久居民的常见问题</p><p><a href="https://mp.weixin.qq.com/s/wtoAEO13QE9ugLWqNwYoQQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/wtoAEO13QE9ugLWqNwYoQQ</a></p><h2 id="PR-申请之后"><a href="#PR-申请之后" class="headerlink" title="PR 申请之后"></a>PR 申请之后</h2><blockquote><p>感谢顺丰快递疫情期间只用了 3 个工作日就把分散在上海和四川的原件材料安全送达新加坡，真心帮了大忙</p></blockquote><p>如果收到了新加坡永久居民（PR）身份的批准信这封信，那么，恭喜你 ！离新加坡 PR 只差最后一步了！</p><p>现在你需要做的，是按照批准信里面的步骤完善 PR 手续：</p><ol><li>准备你所提交的申请材料的原版文件</li><li>在新加坡移民局网站 (ICA) 预约办理手续的时间</li><li>准时到达，并完成：资料审核（若需）；住址、电话、邮箱等基本信息录入；指纹、虹膜录入；费用支付。</li></ol><p>在 ICA 完善 PR 手续时，需要支付的费用包含：<br>– 单次入境许可证：20 新币<br>– 5 年有效 - 多次入境许可证（re-entry permit）：50 新币<br>– PR 卡工本费：50 新币<br>– 单次入境签证：30 新币（若需）</p><p>一旦完成了上述手续，你就是不折不扣的新加坡 PR 了！</p><p>After received the letter from ICA, you must to complete the PR formalities within 1 months. You need to book appointment again via ICA website and bring along the documents as below,</p><ol><li>IPA letter</li><li>Passport with work pass</li><li>Acknowledge letter from CPF  (online submit via CPF website with singpass)</li><li>Medical report.</li><li>2 colour passport size photos</li><li>EP152 form (Employment certification)</li><li>Form 6 (Permit to re-enter Singapore)</li><li>Form of IC registration</li></ol><p><a href="https://eservices.ica.gov.sg/ibook/index.do" target="_blank" rel="noopener">https://eservices.ica.gov.sg/ibook/index.do</a></p><p>新加坡 PR 可以享受许多福利，包括不受签证限制在新加坡生活和工作、孩子可优先进入公立教育系统、强制参与储蓄养老金的中央公积金（CPF）计划等。</p><p>当然，别忘了做两件事：</p><ol><li>通知自己的雇主；你的雇主会向你收取一份 PR 文件副本并更新人力资源的记录，之后每月会按比例为你缴纳公积金。</li><li>通知你的银行，并更新银行账户的个人资料。</li><li>其它个人资料如租房，保险等</li></ol><p><a href="https://www.kuact.com/post/2017-09-03-%E9%A3%98%E8%BF%87%E6%96%B0%E5%8A%A0%E5%9D%A1%E7%9A%84%E6%97%A5%E5%AD%90-%E7%94%B3%E8%AF%B7pr%E4%B9%8B%E5%90%8E/" target="_blank" rel="noopener">飘过新加坡的日子 – 申请 PR 之后</a></p><p><a href="https://toutiaosg.com/%E6%96%B0%E5%8A%A0%E5%9D%A1SINGPASS%E6%B3%A8%E5%86%8C%E4%BD%BF%E7%94%A8%E5%85%A8%E6%94%BB%E7%95%A5" target="_blank" rel="noopener">新加坡 SINGPASS 注册使用全攻略</a></p><h3 id="PR-或者公民更换住址"><a href="#PR-或者公民更换住址" class="headerlink" title="PR 或者公民更换住址"></a>PR 或者公民更换住址</h3><p>Under the National Registration Act, you must report a change of address within 28 days of moving. Participating government agencies and statutory boards will then be informed of your new address through the One-Stop Change of Address Reporting Service (OSCARS). For more details, please click here.</p><p>根据新加坡国民登记法令（National Registration Act），搬离旧址者须在 28 天内，到移民与关卡局或警局办理更换身份证住址的手续，违例者可判坐牢长达五年，或罚款高达 5000 元，或两者兼施。</p><p><a href="https://www.shicheng.news/show/913226" target="_blank" rel="noopener">新加坡搬家记得一定要去更新地址</a></p><p><a href="https://www.ica.gov.sg/documents/ic/update_residential_address" target="_blank" rel="noopener">Change of Residential Address for Identity Card</a></p><h3 id="PR-每隔-5-年后续期"><a href="#PR-每隔-5-年后续期" class="headerlink" title="PR 每隔 5 年后续期"></a>PR 每隔 5 年后续期</h3><p>拿到新加坡 PR 满 5 年后，你需要更新你的多次入境许可证（re-entry permit）。</p><p>很多人担心自己无法更新 PR 身份。这就是 <strong> 新加坡永居“不永久”</strong> 的原因。之前，也出现过更新申请被新加坡移民局拒绝的案例。</p><p>尽管新加坡移民局并没有明确这一更新申请的审核标准，但根据经验总结，主要与以下几点有关：</p><ol><li>你是否在新加坡工作，并在新加坡领薪；</li><li>你每年缴纳的个人所得税金额；</li><li>你每年在新加坡居留的天数。</li></ol><p>因此，基本你每年在新的时间超过一半，按时纳税，并有来自新加坡的收入，更新 PR 都不成问题。</p><p>在更新 PR 身份时，你需要这些材料：</p><p>情况 1：你是公司员工 则需提交下列任何一种文件：</p><ul><li>雇主信，内容包括：受雇日期、职位和月薪；</li><li>中央公积金局（CPF）报表，显示过去 12 个月的公积金缴款；</li><li>过去一年的个人所得税评估通知书。</li></ul><p>情况 2：你是公司董事、独资企业股东、企业合伙人则需要提交下列任何一种文件：</p><ul><li>过去一年的个人所得税评估通知书；</li><li>新加坡会计与企业管理局（ACRA）网站最新的 Bizfile(商业注册证书)。</li></ul><p>材料准备好后，登录你的 SingPass 账户，选择电子再入境许可系统（e-REP），提交线上申请即可。</p><h3 id="放弃新加坡-PR-身份"><a href="#放弃新加坡-PR-身份" class="headerlink" title="放弃新加坡 PR 身份"></a>放弃新加坡 PR 身份</h3><p>在入境许可证有效期内，你可以以任何理由放弃新加坡 PR 身份。</p><p>你只需要呈交下列文件：</p><ul><li>护照</li><li>新加坡 PR 卡</li><li>新加坡 PR 证书</li><li>给新加坡移民与关卡局（ICA）的信：说明你希望取消新加坡永久居留权</li></ul><p>如果本人在新加坡，可以直接携带材料到移民局办理。如果本人在国外，可以到离你最近的新加坡大使馆办理，或将所需文件以快递方式寄给大使馆。</p><p>PR 身份取消后，你可以从公积金户头（CPF）取出所有余额。</p><h2 id="PR-申请公民"><a href="#PR-申请公民" class="headerlink" title="PR 申请公民"></a>PR 申请公民</h2><blockquote><p>等 PR 满两年后再申请</p></blockquote><p><a href="https://www.ica.gov.sg/application/singapore-citizenship/becoming-a-singapore-citizen" target="_blank" rel="noopener">Becoming a Singapore Citizen</a></p><p><a href="https://toutiaosg.com/%E5%90%90%E8%A1%80%E6%95%B4%E7%90%86%EF%BC%81%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BD%91%E4%B8%8A%E7%94%B3%E8%AF%B7%E6%96%B0%E5%8A%A0%E5%9D%A1pr%E5%92%8C%E5%85%AC%E6%B0%91%E6%9C%80%E5%BC%BA%E6%94%BB%E7%95%A5/" target="_blank" rel="noopener">吐血整理！如何在网上申请新加坡 PR 和公民最强攻略！收藏~</a></p><h2 id="新加坡本地常用名词解释"><a href="#新加坡本地常用名词解释" class="headerlink" title="新加坡本地常用名词解释"></a>新加坡本地常用名词解释</h2><ul><li>MOM: Ministry of Manpower 新加坡人力部</li><li>IPA: In-Principle Approval 批准信</li><li>EP: Employment Pass 人才准证</li><li>DP: Dependant’s Pass 家属准证</li><li>PR: Singapore Permanent Resident 新加坡永久居民</li><li>SC: Singapore Citizen 新加坡公民</li><li>HDB: Housing &amp; Development 政府组屋</li><li>Condo: 私人公寓</li><li>Food Court: 食阁</li><li>CPF: 公积金</li><li>NUS: National University of Singapore 新加坡国立大学</li><li>NTU: Nanyang Technological University 新加坡南洋理工大学</li><li>NRIC: National Registration Identity Card 新加坡公民身份证</li><li>FIN: Foreign Identification Numbers 拥有长期工作准证的外国人身份证</li></ul><h2 id="新加坡-1-个月感想"><a href="#新加坡-1-个月感想" class="headerlink" title="新加坡 1 个月感想"></a>新加坡 1 个月感想</h2><blockquote><p>选择新加坡的理由：给自己多一种选择</p></blockquote><ol><li>原始坐标：上海，无留学经验也没有去过新加坡</li><li>猎头推荐新加坡的职位，想想自己那被遗忘的蹩脚英语抱着试一试的心态</li><li>一共 3 轮 Skype 远程视频面试，约 4 周时间到最后确认 offer</li><li>约 1 天时间思考，离职申请，签电子合同</li><li>检查护照有效期，下载学信网英文翻译认证，由 HR 帮助提交申请 EP，约 3 周内收到 IPA</li><li>在上海户口所在区公证处办理结婚证公证翻译，约 3 周时间完成，又慢又麻烦</li><li>完成 EP 后由 HR 帮助提交申请 DP，约 1 周内收到 IPA</li><li>购买机票，打印 IPA，带上护照，打包行李，兑换 4000 新币，确认人事档案存放地址，选择不缴纳每月养老保险和医疗保险约 1500 元人民币(可由父母代缴，中断非连续缴纳暂时不影响回国养老，以政策变化为准)</li><li>飞机上填写好新加坡入境卡，完成入境登记，无需录入指纹，开启华为天际通</li><li>抵达公司提前安排好的住址，熟悉新加坡环境</li><li>办理 EZ-Link 交通卡和 Singtel Prepaid 手机卡(如果没有强需求可以暂时不办理)</li><li>公司 HR 提交 EP 现场办理申请，收到邮件后预约 MOM 办理时间（我没有被要求体检，根据不同公司情况而定）</li><li>约 1 周后收到 EP 绿色实体卡，使用 SGWorkPass 扫描保存照片，注册 SingPass 后约 1 周左右收到密码信封</li><li>公司开具证明办理银行卡，新加坡本地我选择 UOB(保持 1000 新币存款)，另外强烈推荐再办理工商银行卡(持卡 0 门槛，转账回国 0 费用)</li><li>网上申请 Zero1 的无限流量手机卡，约 3 个工作日收到直接使用，弃用 Singtel Prepaid（浪费了 25 新币）</li><li>新加坡日常消费以现金为主，我本人习惯手机支付无奈降级至刷信用卡阶段(持有浦发 AE 白 / Visa/Master)，怀念下国内的支付宝和微信</li></ol><p>我刚来新加坡 1 个多月，不用担心语言不通，大部分人都会说华语。新加坡真的不算大，地铁和公交都很方便，空气质量很好至少我的鼻炎消失了，天气没有国内那么热，居然没有蚊子，没有蚊子，没有蚊子。在这段时间里我幸运了结识了交大和复旦的校友，跟随专业的中介实地考察了新加坡的租房和买房市场，走遍了几个重要的核心区域，顺便吃了几顿亲民的米其林一星。之后我应该还会继续更新自己在新加坡的经历，比如健身、快递、看病等日常生活，希望对大家有所帮助。</p><h3 id="新加坡-3-个月感想"><a href="#新加坡-3-个月感想" class="headerlink" title="新加坡 3 个月感想"></a>新加坡 3 个月感想</h3><blockquote><p>咋们就从最传统的衣食住行说起吧</p></blockquote><p><strong> 衣 </strong></p><p>因为新加坡全年都是夏季，平时的正常温度基本在 30° 上下，对于我来说已经把家里的夏装的家底全部带过来了，所以也没有什么特别需要单独购买，作为男生如果以后缺衣服的话在新加坡线下就是优衣库，线上还是优衣库。</p><p>女生的选择实在太多了，乌节路和 VivoCity 等都可以逛好久，这里就跳过吧</p><p>新加坡本地的 Outlet(奥特莱斯)是 IMM，如果你喜欢跑步运动，那么只卖 80 新币的 Adidas Ultraoost 和 Asics GEL-Kayano 会有一定吸引力</p><p>在新加坡网购，和国内激烈竞争的胜出者相比，还有很长一段路要走，当然也证明东南亚市场是一块巨大的蛋糕等待挖掘</p><p>新加坡室内空调冷气普遍开得比较足，建议怕冷的同学多备件长袖外套在公司，长时间逛商场时注意冷热交替避免生病</p><p>从中国快递至新加坡的方式已经快捷不少，淘宝直运和集运，ezShip 都是很方便的选择</p><p><strong> 食 </strong></p><p>新加坡最有特点的饮食文化莫过于食阁(Food Court)，其实有点类似于上海的大食代，但价格亲民而且还有米其林一星的神奇存在，平均一顿的价格区间在 3-7 新币，整体口味偏重。每个食阁上方都会标注 A/B/C 卫生评级，新加坡本地的习惯一般不在家做饭，大家都出去吃所以种类也还算多，不知道吃什么可以认准 Singapore Best Foods 红色标志，和国内相比关键是放心。</p><p>如果平时想吃顿大餐类似国内海底捞、小龙坎那种，平均每人大概 30-50 新币左右，评级更高的餐厅价格自然也水涨船高</p><p>自己在家做饭的成本其实和外面吃也差不了多少，如果居住的房子允许大炒和大煮当然可以选择自己动手丰衣足食</p><p>新加坡的菜市场比较少见可能是我没有刻意去寻找或者需求的缘故吧，买蔬菜和肉类基本都在 Sheng Siong(昇菘)，FairPrice(NTUC)，Cold Storage，喜欢日本食物还可以选择 DON DON DONKI，我个人很喜欢这只萌企鹅的魔性主题曲</p><p><a href="https://www.bilibili.com/video/av32078102" target="_blank" rel="noopener">https://www.bilibili.com/video/av32078102</a></p><p>新加坡的便利店清一色 7-Eleven，部分大一点的屈臣氏 (Watsons) 支持支付宝(Alipay)，上面提到的 Sheng Siong 已经全部支持 Alipay</p><p>外卖大家就不要指望 GrabFood 或 Foodpanda 有饿了么和美团外卖的速度了，老老实实去附近的食阁按时吃饭才是正道</p><p>我每个周末都会使用 <a href="http://refer.eatigo.com/eati17aqf-1v9" target="_blank" rel="noopener">eatigo</a> 开启 5 折美食之旅打打牙祭</p><p>图文介绍可以参考我同事更新的<a href="https://feiyang233.club/post/SG-food/" target="_blank" rel="noopener">那些年在新加坡吃过的店</a></p><p><strong> 住 </strong></p><p>(1) 租房</p><p>我在租房这个环节基本上算是跳过了，刚来时建议找好房源，这边的酒店居住成本很高的。因为目前是长租在公司提供的组屋 (HDB) 内，毕竟室友都是公司自己人很放心，合同限制不多每月会安排阿姨定期打扫和保养空调等，手机银行转账支付租金也方便。回想当时刚来的 1 个月每周都跟随专业的中介校友出去找房子都十分辛苦，更不要说自己联系中介一家一家看了，说多了都是泪。这边的房产中介需要考证，据说通过率只有 10-15%，每个中介都会展示唯一的证书编号，所以不用太担心被骗，不过每个中介的态度千差万别，找到靠谱的中介能够加快找房的速度。</p><blockquote><p>备注: 公司已经不再提供租房支持，可以联系 HR 询问中介联系方式提前沟通房源</p></blockquote><p>由于地理位置和房屋面积质量差异，下面的租房价格仅仅是一个参考区间，数字单位为新币 / 月<br>组屋(HBD)，普通房 600-800，主人房 1000-1200，整租 1000+<br>公寓(Condo)，普通房 800-1500，主人房 1200-2000，整租 1500+</p><p>房源信息可以来自于同事，也可以自己在线挑选，方法我都写在前面了，和同事咨询过新加坡租房的大致流程</p><ol><li>看准自己喜欢的房子</li><li>看清楚合同，看清楚合同，看清楚合同，签约</li><li>签 1 年一般押一付一，签 2 年押二付一</li><li>中介费是根据实际情况由房东或者租客来承担，一般根据合约长短支付 0.5 或 1 个月的房租作为中介费</li></ol><p>(2) 买房</p><p>虽然是否决定买房的话题为时尚早，但经历了魔都十几年房地产的上涨自然也不会错过对新加坡房地产的研究，如果你是冲着 30w 新币的组屋 (HDB) 那么找新加坡本地人结婚是最快的途径。新加坡在 2018 年 07 月 06 日 0 点开始调整了印花税，对于我们普通人来说 2-3 年内拿到永久居民 (PR) 已然不易。新加坡私人公寓 (Condo) 的价格和质量相对国内来说是有优势的，但是 1 室 80w，2 室 100w，3 室 120w 这样的价格加上印花税还是会让我们感到一丢丢肉疼，好在房地产市场涨幅长期平稳且退出机制清晰，租房市场也足够活跃，而且银行可以贷款 7 成 + 2% 左右的低利率还是足以让我们拥有奋力一搏的勇气，不用牺牲 6 个钱包。</p><blockquote><p>这里给未来的新加坡买房经历留个坑位吧</p></blockquote><p>HDB 政府租屋</p><ul><li>BTO 抽签期房</li><li>Resale 二手租屋</li></ul><p>Condo 公寓</p><ul><li>期房或新房</li><li>二手房</li></ul><blockquote><p>HDB 和新 Condo 购买流程待补充，我们具体看下购买二手公寓流程，主要分 4 个阶段</p></blockquote><p>以<a href="https://www.kanyangfang.com/projects/dchateau-shelford" target="_blank" rel="noopener">D’Chateau @ Shelford</a> 购买使用面积为 915 sqft<br>总价为 155 万新币的 3 房为真实案例，首套房首付金额大概在 33%-35%</p><p>特点</p><ol><li>永久地契</li><li>1 公里内双名校<br>南洋小学（Nanyang Primary School）<br>莱佛士女子小学（Raffles Girls’ Primary School）</li></ol><p>购房流程</p><ol><li>订金 1% 签下房源当天，$16500</li><li>执行购买权 4% =$66000</li><li>税金总金额：$133100，计算方法:（9%-$15400），14 天内缴纳，包含 4% 印花税（Buyer’s Stamp Duty）+ PR 首套为 5% 附加印花税（Additional Buyer‘s Stamp Duty），银行贷款 75%，审批约 3-7 天，利率 1.5%，月供 4300 新币（如果租 1 房目前成本不低于 2500 新币 / 月），律师楼办理手续，3000 左右新币，预约，1-3 小时流程</li><li>完成交易，支付 20% =$33 万，3 个月时间。其他费用：银行估价费 $600</li></ol><p><a href="https://www.yan.sg/rwirhwi/" target="_blank" rel="noopener">新加坡程序员亲历：如何在 1 个月内云淡风轻地买房卖房</a></p><p><a href="https://zhuanlan.zhihu.com/p/32493002" target="_blank" rel="noopener">新加坡买房小记</a></p><p><a href="https://mp.weixin.qq.com/s/04P6CamP1z2tRzCqb6ylOQ" target="_blank" rel="noopener">关于海外置业，我泼点冷水</a></p><p><strong> 行 </strong></p><p>现在无论在哪里手机的使用比重都是极高的，我自己来新加坡前把小米 6 替换为华为 P20 Pro，妻子还是用的小米 MIX2，在国内早已习惯电信乐享家 199 元全国无限流量，我们的老卡 1 个是移动，1 个是联通，来到新加坡之后选择了无合约限制价格为 9.9 新币无限流量的虚拟运营商 Zero1.sg，因为背后是 Singtel 所以质量有保障。在新加坡接收国内短信验证码之类不要钱，双卡双待都是没有问题的，不过我妻子还是很期待 iPhone 即将推出的双卡功能，毕竟她在美国时的 iPhone5s 也用了 4 年多，被我硬生生拖入 Android 阵营实属不易。 </p><p>新加坡公共交通发达，Google Map 在手说走就走。我的选择和国内类似，能坐地铁尽量就不会选择公交车，因为坐公交车有几点不爽，如果你不熟悉新加坡或者不会熟练使用 Google Map 建议不要轻易乘坐公交车。</p><blockquote><p>乘坐地铁切记不可吃喝、吸烟、携带榴莲、大声喧哗和带宠物，乘坐公交车的规定与地铁类似但有以下额外注意事项</p></blockquote><ol><li>公交车来之前一定要招手才会停</li><li>在到达下一站前一定要按 Stop 红色停车按钮，不然不会停</li><li>下车时还要再刷一次交通卡确认付款</li></ol><p>除了公交车和国内差异较大以外，平时过马路记得按一下身边的指示灯，你不按或者对面也没人按，那你就不用想着过去了</p><p>这边的公交卡称为 EZ-Link，想刷 NFC 不好意思没有小米和华为，请购买 NFC SIM card。虽然充值很方便支持国内双币信用卡，但我还是很想念上海二维码扫码进闸机。另外新加坡地铁站没有安检，没有安检，没有安检。</p><p>我丢过一次地铁卡，为了挽回里面 25 新币我第一次主动走进新加坡警察局开具丢失证明，他们做事确实负责而高效，不过我因为操作失误导致旧卡数据没有正常转移到新卡，超过 7 天申报时间我也没有办法无力回天，所以再一次怀念下国内的手机刷卡。</p><p>~~ 新加坡已经遍布 Mobike 和 ofo，摩拜的国内账户可以在这里直接使用，ofo 需要重新注册。~~ 单车市场基本倒闭</p><p>新加坡打车市场已经被 Grab 一统江湖，Uber 和滴滴出行都入股 Grab，另外 Grab 打车很安全而且支持支付宝(Alipay)，普通出租车都支持微信和支付宝。目前能看到的对手只有 Gojek，也许不久的将来也会合并。</p><p>关于机票从上海往返新加坡的航班很多，价格和飞行时间比较透明就不多说了，我这里还是推荐大家体验下新加坡航空 (Singapore Airlines) 的服务，今年航空公司评选又站回全球第一，即使乘坐经济舱也不要忘记品尝一下新加坡司令哈。</p><p>今年国庆节期间我和老婆买了新加坡至四川成都的 5 日往返机票，新加坡航空旗下的胜安航空(SilkAir)，令我感到惊喜的是 2 人机票往返价格总共才 1600 人民币，单人往返 800 人民币，可能是 bug 价格了。</p><p>新加坡和国内的走位不一样，行走避让和司机开车位置与国内正好相反。</p><p>新加坡拥车成本比较高，虽然公共交通发达，但是开车的梦想还是要有的，万一实现了呢？</p><blockquote><p>传统的四大金刚扯完了，我们再聊一些逆转未来的话题</p></blockquote><p><strong> 安全 </strong></p><p>新加坡的安全本质上是基于严格的法律加上遍布各地的摄像头，你如果想挑战下不如先了解下鞭刑的酸爽和罚款罚到你肉疼的数字。</p><p>吸烟，喝酒，乱扔垃圾在法律中都有明确要求，虽然不能百分百杜绝抽烟现象，但你走在马路上不会遇到随意吐痰也不需要提防狗屎。穿过十字路口车辆都会早早的自觉停下来等你先过去，新加坡随处可见的就是无障碍设施，地铁沿线基本都设置了棚顶，既可以防晒又可以躲雨，即便每天都能遇到短时暴雨由于出色的排水系统也从来不会看到有积水。</p><p>在国内随时会收到的垃圾短信和房产金融中介等骚扰电话，在新加坡基本是看不到的，不过 Email 和 WhatsApp 这种网络骚扰还是无法消灭的。这边的违法成本比较高只要被投诉就会收到法律的严格制裁，当然注意保护自己的隐私安全始终不能掉以轻心，毕竟再文明的社会偶尔也会遇上小人。</p><p>在新加坡你基本不用担心丢失物品，因为大概率都能找回来，包包也不用刻意放在前面，拉链忘记拉上也没关系，不用担心人口贩子和小孩走丢，更不用担心一个人走夜路会不会不安全，犯罪成本高促成的低犯罪率给你带来的不仅仅是安全感更是幸福感。</p><p>由于新加坡的地理位置极好，无论是过去还是未来基本是不会受到任何灾难气候影响，台风、海啸或者地震是不存在的</p><p>新加坡的人际关系相对简单，与人为善的过程中也不要忘记多留个心眼谨慎一些，在这边和他人发生误会大多数都会听到 Sorry 和 I am fine 而不是争吵，规规矩矩排队而很少有人随意插队，政府办事效率高以廉洁著称也是难能可贵，在新加坡未必有国内这么亲切有人情味，但你能感受到的是相对的公平和简单。</p><p><strong> 健康 </strong></p><p>我在上海的时候就饱受着变态反应性鼻炎的痛苦，每次体检医生都开玩笑要不住到外环去吧，没想到现在离家这么远。至少来新加坡后我的鼻子就彻底舒畅了，我原来对空气质量也不以为然，买个小米净化器放在家里，直到离开上海前看见基因检测报告提醒风险最高的是鼻咽癌，我才明白空气对于每个人的未来都是如此重要。</p><p>新加坡的温度常年保持在 30° 上下，不会像上海夏季烈日炎炎，但新加坡比较像“蓝天白云 晴空万里 突然暴风雨”，有云有风有遮雨棚，身体其实会觉得很舒服.</p><p>之前已经说过新加坡的饮食文化以食阁 (Food Court) 为主，这些小店很多都有几十年的历史，食物未必都符合你的胃口但至少足够安全，不用担心地沟油。合理的饮食搭配以及规律的生活节奏才是根本。</p><p>新加坡本地人都注重健身，如果不想花太多钱在健身房可以考虑在小区附近的体育馆免费跑步或者花费 1.3 新币游泳。私人公寓 (Condo) 一般自带小型游泳池和健身房，虽然小但有总比没有好。如果公司有补贴健身房的价格 (一般 150-200 新币每月) 其实也不算太贵，每月 99 新币可以选择像 Fitness First or Pure Fitness(Pure Yoga)等专业健身房。</p><p>关于看病，因为前段时间工作比较忙抵抗力突然下降导致出现额头皮肤红肿，在国内经历过不注意小病而酿成大病的惨痛教训，<a href="https://wsgzao.github.io/post/wisdom-tooth/">我是如何做到花 8000 元拔智齿的</a>，所以这次特地请 1 天病假去公司合作的 Raffles Medical 私人诊所看病，事后看诊断结果比较准确且看病过程十分高科技 + 高效率，病因是 <code>带状疱疹</code>，总共 99 新币，30 是问诊费其余都是买药钱。只不过第二天我发现未有起色且眼皮红肿都快睁不开了就先让昨天的医生开具的急症介绍信，然后直奔 Raffles Hospital，在了解基本无大碍和每位专科医生复查至少 300 新币起步的情况下果断申请放弃继续治疗赶紧溜回去休养生息，这一趟花了 199 新币，其中 130 为问诊费(节假日看病费用翻翻)。命固然重要，但人只要一生病真的可能失去一切甚至连累家人。</p><p>2019 年去了 2 次新加坡伊丽莎白医院 - Mount Elizabeth Hospital，还增加了人生中第一次坐救护车的经历，好软好舒服。首先是价格没有想象中那么贵，当然还是优先建议购买住院保险以防万一，其次是建议能选择私立医院就不要选择公立，看病的效率真让人着急。未来有机会再探索下新加坡鹰阁医院 - Gleneagles Hospital，2020 年春节期间去了 2 次鹰阁医院，如很多人所言名声在外但设施老化，如果选择生宝宝还是推荐伊丽莎白医院诺维娜分院 - Mount Elizabeth Hospital Novena</p><p>和同事回顾了他们看病的流程，作为外国人一般也是建议直接去附近的私人医院，价格其实差不多但不用排队。如果选择去政府医院比如 NUH 等可能存在排队现象，这个体验对于国内看病来说大家心里应该很明白有多痛苦，如果各位有足额的医疗保险在国内其实可以选择特需医疗(免排队 + 专家门诊)。关于新加坡医院的更多信息可以参考最上面的介绍。</p><p>印尼 “烧芭” 引发空气污染和马来西亚动不动就拿断水挑事也是新加坡需要持续努力解决的问题之一。</p><p>新加坡的蔬菜和水果算不上贵但也不会像国内一样便宜，除了猫山王榴莲和部分进口水果质量和价格有优势，也没有太多的种类可供选择，我自己会从网易考拉购买 Swisse 作为补充，话说新加坡的营养品真心贵，同样的 Swisse 一小瓶卖 56 新币，其它品牌价格也是高居不下。</p><p><strong> 娱乐消费 </strong></p><p>新加坡本身就很小，加上我和我妻子都倾向于工作，学习和健身。平时的娱乐活动也就停留在节假日出去寻找下亲民美食，慢慢游览新加坡仅有的几个景点，新加坡环球影城，S.E.A. 海洋馆，新加坡动物园，新加坡夜间动物园，滨海湾花园，金沙酒店附近的鱼尾狮和摩天轮，圣淘沙和赌场，其它像植物园，大学校园很多都是免费的，旅游一般 2 天可以快速结束，如果需要细细品味也就再多增加 1-2 天足够了。</p><p>新加坡娱乐设施真的不算很多，看电影还得去现场买票，网上购买需要多花钱。吃喝玩乐想看看附近的活动和评价都没有像美团点评类似的产品，毕竟需求不像国内这么大，但我觉得让国内的美团点评来进攻新加坡市场，相信分分钟钟可以拿下。</p><p>新加坡本地目前小额仍然以现金为主，商场一般支持刷卡，而主要的景点和购物中心区域全部覆盖支付宝(Alipay)</p><p><strong> 教育培训 </strong></p><p>虽然现在谈教育太早但是新加坡本地的教育资源始终都是偏向本国公民的，对我们来说永久居民 (PR) 只是万里长征的第一步，要不要买学区房，要不要做义工，也是留给自己的问题。感觉这又有上海户口，学区房，拼父母，何其相似？</p><p>新加坡和中国一样都很注重基础教育，对子女的教育支出都很高，新加坡第三方教育机构或者成人专业类培训机构的市场也很大。最近在微信朋友圈看到英国 BBC 邀请 3 名威尔士的优等生体验韩国鸡血教育的文章，除了深刻感受到教育的重要性，更加理解韩国快速崛起的因素，成熟而完整的教育产业链对孩子很重要，对国家来说更重要。</p><p><a href="https://zhuanlan.zhihu.com/p/46043323" target="_blank" rel="noopener">谈新加坡教育的分流制度</a></p><p><a href="https://mp.weixin.qq.com/s/GNvZcLg2U7baHfU2DMy_pg" target="_blank" rel="noopener">谈谈新加坡的教育和学区房</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20200109110126.png" alt></p><blockquote><p>关于新加坡学区房</p></blockquote><p><strong> 首先 </strong>，和中国的学区房，在报读小学、中学都用得上的情况不同，新加坡的学区房，只在小一报名阶段有效，在其它年级直至中学阶段，“学区房”就再不管用了；政府在中一阶段，是全岛收生；至于其它年级的转学，则主要取决于学校有没有学额，住得再近也无济于事，所以这在很大程度上就减少了好多对 “学区房” 的刚需。</p><p><a href="https://endeavourpri.moe.edu.sg/primary-one-registration-exercise-2020/" target="_blank" rel="noopener">Primary One Registration Exercise 2020</a></p><p>For more information regarding 2020 Primary One Registration Exercise, parents can refer to <a href="https://www.moe.gov.sg/" target="_blank" rel="noopener">Ministry of Education website</a>.</p><p>Please refer below for the infographics of the different Primary One Registration phases.</p><p><img src="https://endeavourpri.moe.edu.sg/wp-content/uploads/2020/07/P1-Registration-Exercise-2020.png" alt></p><p><strong>Balloting</strong></p><p>Balloting will be conducted if the number of registrants exceeds the school vacancies, which can happen in any phase from 2A (1) to 2C Supplementary. Computerized balloting will be conducted centrally by MOE. All registrants who are required to ballot are assured of an equal chance for admission into the school. Priority admission to a P1 place in a school will be given to children in this order:</p><ol><li>Singapore Citizens (SC) living within 1km of the school.</li><li>SC living between 1km and 2km of the school.</li><li>SC living outside 2km of the school.</li><li>Permanent Residents (PRs) living within 1km of the school.</li><li>PRs living between 1km and 2km of the school.</li><li>PR living outside 2km of the school.</li></ol><p><a href="https://www.kanyangfang.com/articles/blog/xiang-jie-yi-gong-shen-qing-xin-jia-po-hao-xiao-x.post" target="_blank" rel="noopener">详解义工 - 申请新加坡好小学的主流方案</a></p><p><a href="http://www.wangbo.com.sg/index.php/news/845-2020-04-28" target="_blank" rel="noopener">2021 年新加坡政府小学报名启动了！</a></p><p><strong> 其次 </strong>，在新加坡报读小学，首要硬指标并非学区房（或者换句话说，户口），而是看 <strong> 你和小学的关联有多大 **</strong>。** 按优先等级从大到小排序，新加坡的小一招生，说来总共分三个阶段，其实细分了 7 档：</p><blockquote><p>小一报名的阶段</p></blockquote><p>1）Phase1: 已经有哥哥姐姐正就读于该学校的，弟弟妹妹秒进！</p><p>2）Phase 2A1: 父母是校友联盟里的成员，孩子也可以比较早报读小学</p><p>3）Phase 2A2: 父母或者哥哥姐姐是校友</p><p>4）Phase 2B: 父母是学校大咖或者行政人员或者跟学校相关的机构成员</p><p>2B 是开放给 <strong> 学校义工 </strong>，<strong> 社区义工 </strong>，某些 <strong> 教堂教友 </strong> 或者某些 <strong> 会馆会员 </strong> 的孩子报名的。</p><p>除了个别教师家庭，新移民子女通常都无法享受校友红利，所以 <strong> 除了选个好学区房，做义工也是申请热门学校的重要工作。</strong></p><p>5）Phase 2C: 只要是公民或者永久居民，距离优先</p><p>6）Phase 2C Supplementary: 只要是公民或者永久居民，距离优先</p><p>7）Phase 3: 所有人开放，包括外国人</p><p>这样数一数，学区房一直要到第 5 和第 6 个阶段，才能真正发挥作用，还只是针对公民和永久居民而言的。换句话说，如果是个外国人，学区房对他们说基本上分文不值。那你觉得学区房的吸引力，还会有在中国那么大吗？</p><blockquote><p>关于租学区房</p></blockquote><p>新加坡的学区房，并不需要一定是自有房，只要符合一定的条件，就算是租的房子，也可以堂而皇之去报读学校。</p><p>1）期房<br>新加坡的小学 2020 年 7 月份开始报名，明年 2021 年 1 月份入学。期房建成前，可以提前 2 年用期房的地址，并出具买卖合同买报名。比如孩子现在 5 岁，那就要根据楼盘的交楼时间选 2022 年 7 月前交楼的房子。</p><p>2）二手房<br>报名时需要二手房买卖合同，也是必须在 2020 年 7 月报名前完成以上手续，入住要求是在明年 2021 年 1 月前入住。</p><p>3）租房<br>如果用租房地址报名，需要在 2020 年 6 月 30 日之前变更好身份证地址，住满 2 年半，如果要搬家也不能超过 1 公里之内。</p><p><strong> 工作生活 </strong></p><p>我目前在一家新加坡互联网公司 Sea 上班，旗下知名度比较高的是 Garena 和 Shopee。工作制度是弹性的，没有严格的打卡要求，正常时间为 09:30-19:00，周围以中国同事居多，大部分是在这边读书毕业工作，学校几乎清一色新加坡国立大学 (NUS) 和新加坡南洋理工大学(NTU)，工作语言为英文，核心生产力工具包括 Google Suite，顶配 MacBook Pro，Herman Miller，Dell 2417H，还有无限制的饮料，水果和零食。原以为只能在国内的创业公司和少数尊重技术的优质公司才能看到的办公环境，可能在国外是很常见的事情吧。新加坡互联网公司在 IT 方面的人才非常短缺，也许是因为本地人大都投身于金融行业，所以很多技术人才也是会考虑从中国引进，甚至直接在国内开设分公司。</p><p>因为我以 EP 身份把我老婆也带了过来，目前还是 DP。对她来说在新加坡找一份金融行业的工作真的非常不容易，花了 2 个多月时间扫光了 LinkedIn 在新加坡几乎所有公开招聘，遗憾的是很少有金融行业愿意招聘非新加坡公民 (SZ) 和永久居民 (PR) 以外的人群，得到的回复大多数都是 Sorry，毕竟新加坡政府在很多地方都会优先照顾本国人的利益，这个道理放在中国也很好理解。不过目前经历了 6 轮面试最终拿到了一个还不错的 offer，后续 DP 也要转成 EP，这是一件值得庆幸的事情。</p><p>新加坡月薪中位数是 4500 新币左右，新加坡人力部公布了 2018 年全国的工资中位数 4437 新币 / 月，如果你对各行业数据感兴趣可以参考<a href="https://www.michaelpage.com.sg/salary-guide" target="_blank" rel="noopener">Singapore Salary Benchmark 2020 Michael Page</a></p><p>很多人咨询薪资范围这个不同公司不同行业职位都不一样，建议大家看看 mycareersfuture.sg，每一个申请 EP 的工作都会在上面公开若干天，这是政府要求，上面基本有职位的薪资范围，这是最准确的数据，也可以看看其他公司的报价，然后就知道你的 offer 是低于还是高于市场价了。注意这上面过往的职位是不会显示的，所以如果碰到了淡季，数据很少。</p><p>在没有明显压缩新加坡生活成本，按 1 人每月估算为 1w 人民币，如果是 2 个人差不多是 1.5w 人民币</p><p>HDB 合租主人房: 1100<br>水电网: 50<br>移动套餐: 9.9<br>饭费: 20x30<br>交通: 2x30<br>健身: 99<br>理发: 12<br>其他: 100</p><p>≈2030.9 新币≈10000 人民币，如果你是单人还可以选择普通房大概 800 每月。不过我相信新加坡贵的部分体现在后期的看病和生娃教育上</p><p><a href="https://mp.weixin.qq.com/s?__biz=MzIwMTQxODUxNw==&amp;mid=2650896087&amp;idx=1&amp;sn=9eb1be6f3e8ff3a5acc908e2c983cb37&amp;chksm=8d1be4adba6c6dbbb26bb7a8f6e99cff210306f1f1f856297851bc10ed378f532081f08a298b&amp;mpshare=1&amp;scene=23&amp;srcid=0627SV9XjUJihYiNxW383bUB&amp;sharer_sharetime=1564742363597&amp;sharer_shareid=456ba82bbd1a1c9f32e5725824095308%23rd" target="_blank" rel="noopener">扒一扒新加坡的精英制度！月薪 14 万的人到底经历了什么？</a></p><p>中国 VS 新加坡，生娃养娃究竟要花多少钱？</p><p>中国：</p><ul><li>生娃：3000-1 万人民币</li><li>养娃：65 万元 - 130 万人民币</li><li>总计：约 65 万 - 131 万人民币</li></ul><p>新加坡：</p><ul><li>生娃：1003-18912 新币</li><li>养娃：至少 67 万新币</li><li>总计：约 69 万新币</li></ul><p>推荐下 Grammarly for Chrome，在写邮件和文档时可以快速发现并纠正语法错误，对提升英文书写能力非常有帮助。我自己也是第一次开始深度使用 MacBook，记录一些简单的入门过程在 Blog 中，也可以做下参考。</p><p><a href="https://wsgzao.github.io/post/macbook/">MacBook macOS 从小白到入门</a></p><p><strong> 养老政策 </strong></p><p>新加坡不养闲人，你在新加坡的食阁 (Food Court) 仔细观察过就会发现几乎所有打扫卫生的都是老年人，和中国相比新加坡的养老金 CPF 是交多少退多少，不会被平均，所以更多的本地人会提前了解基金股票保险和投资房地产等方式来为自己养老。新加坡、日本、韩国等国家的老龄化问题已经凸显，我们都可以看到未来国内严重的老龄化趋势，谁又能独善其身呢？</p><p>新加坡政府因为楼市过热而提高印花税的闪电行动，中国也吹响了全球征税的集结号，无论身在哪里我们始终躲不开政治不是吗？</p><h2 id="日用品推荐"><a href="#日用品推荐" class="headerlink" title="日用品推荐"></a>日用品推荐</h2><blockquote><p>回顾来新加坡前后的经历，我希望自己分享的一部分实用建议和商品可以帮助大家更好的适应新加坡生活。如果你不喜欢网易严选和网易考拉可以选择性跳过。</p></blockquote><p>我自己携带并且大家都能买到的产品分享：</p><ol><li>药品：我带的是泰诺和夫西地酸乳膏，这边初期看病成本还是比较高，建议最好带一些板蓝根、急用的抗生素、抗过敏药及自己习惯的常用药，如胃药、哮喘喷剂等等。</li><li>其他综合的日用品，我是分 3 批带过来的，这里按照重要性分成 2 部分来推荐，大部分来自网易严选和网易考拉工厂店，关于原因我也记录了自己的观点。</li></ol><p><a href="https://wsgzao.github.io/post/buy/">我的线上线下购物变迁史</a></p><h2 id="工作招聘"><a href="#工作招聘" class="headerlink" title="工作招聘"></a>工作招聘</h2><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20191226105334.png" alt></p><p><a href="https://www.liepin.com/company/7952664/" target="_blank" rel="noopener">中金所技术公司招聘</a></p><p><a href="https://docs.qq.com/doc/B80RhZ2ZATLC0DsTVf3kFjA01XR7Mg1x8BG42bVOrs1E5zYc01HWAZ0vDTku39xOdU3cS99t2" target="_blank" rel="noopener">Sea Job Openings</a></p><p>这是我第一次创建微信个人公众号，不会向大家推送文章，只是作为信息分享的渠道。我和上家公司以及现在公司的人力关系都还不错，在征得允许的前提下给大家分享上海和新加坡这两家公司目前的内部招聘动态，上海的职位真的的是进去的多出来的少，如果你希望相对稳定那这是很不错的机会。新加坡这边我会跟随公司内部招聘邮件每半个月左右更新，工作语言以英文为主，周围的中国同事还比较多，不用太担心在新加坡的语言关。这两家公司的介绍都可以在互联网上轻松获取，如果你相信自己的能力可以直接投递简历至文章内的联系方式。努力奋斗未必都能达到预想的结果，但至少你做出了自己的选择。</p><p><a href="https://osjobs.net/interview/posts/%E8%B0%B7%E6%AD%8Chr%E7%9A%84%E6%96%B0%E5%8A%A0%E5%9D%A1%E5%8D%81%E5%B9%B4/" target="_blank" rel="noopener">谷歌 HR 的新加坡十年</a></p><blockquote><p>如果收到新加坡 offer 但不确定薪资是否合理，可以通过新加坡政府网站 mycareersfuture 的公开数据作为参考</p></blockquote><p><a href="https://www.mycareersfuture.sg/" target="_blank" rel="noopener">https://www.mycareersfuture.sg/</a></p><p><a href="https://www.levels.fyi/" target="_blank" rel="noopener">https://www.levels.fyi/</a></p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><blockquote><p>如果你无法访问原文可以查看其他国内镜像如知乎，如果你只想了解我前往新加坡的求职过程可以看微信公众号的提炼内容</p></blockquote><p>从国内跳槽至新加坡工作的经验分享<br><a href="https://wsgzao.github.io/post/singapore">https://wsgzao.github.io/post/singapore</a></p><p><a href="https://zhuanlan.zhihu.com/p/44280335" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/44280335</a></p><p>从国内跳槽至新加坡的最初半年，我都经历了什么？</p><p><a href="https://mp.weixin.qq.com/s/gDntToVrvFoQbyfrNf7XqA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/gDntToVrvFoQbyfrNf7XqA</a></p><p>从小到大我都没有离开过父母的保护，感谢你们的理解和支持，也同样感谢老婆的付出和双方家庭的包容。</p><p>引用领结婚证那天分享在朋友圈的一句话作为结语: I never grew up, but I never stop growing.</p>]]></content>
    
    <summary type="html">
    
      从国内跳槽至新加坡工作的经验分享
    
    </summary>
    
      <category term="生活 | Life" scheme="https://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
    
  </entry>
  
  <entry>
    <title>新加坡本地网购以及使用 ezship 从中国网购代购运送至新加坡的经验分享</title>
    <link href="https://wsgzao.github.io/post/ezship/"/>
    <id>https://wsgzao.github.io/post/ezship/</id>
    <published>2022-04-04T06:59:49.000Z</published>
    <updated>2022-04-06T03:26:41.320Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我从 2018 年 6 月第一次来新加坡工作时需要购买生活用品，下意识打算网购时会发现淘宝和京东暂不支持海外配送，即使有官方直送和集运价格和服务也不一定符合自己的预期。新加坡本地电商如 Shopee、Lazada，新加坡本地超市 FairPrice、Sheng Siong(昇菘)等其实都可以满足大部分生活场景。我记得 2010 年开始中国还流行过海淘的创业狂潮，时至今日中国制 (质) 造已经赢得了越来越过国人的信赖，当我们知道可以从中国买到更多物美价廉的商品时，自然就会思考如何节约成本。</p><p>相信大部分在新加坡生活的小伙伴通过新加坡眼、新加坡椰子等自媒体看到过各种第三方空运和海运的广告，我也经历过小坡岛多人拼团，淘宝 299 人民币包邮直送，Amazon Prime 2.99 新币美国直邮，目前长期使用 ezbuy ezship，然后购买了 ezbuy prime 会员享受 2.99 新币不计体积重包邮服务(2021 年 12 月 ezbuy prime 会员政策变化后已取消会员)。因为我也能感受到新加坡电商市场也在不断增长(成长)，所以本文也会持续更新自己的认知，希望能够帮助你发现一些新东西。</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 04 月 04 日 - 更新中国新加坡双向物流<br>2021 年 12 月 24 日 - 取消 ezbuy prime 会员<br>2021 年 11 月 11 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/ezship/">https://wsgzao.github.io/post/ezship/</a></p><hr><h2 id="新加坡超市"><a href="#新加坡超市" class="headerlink" title="新加坡超市"></a>新加坡超市</h2><p>NTUC FairPrice - <a href="https://www.fairprice.com.sg/" target="_blank" rel="noopener">https://www.fairprice.com.sg/</a></p><p>NTUC Fairprice（职总平价超市）是隶属于是新加坡国家职工总会（NTUC），间接由政府控制管理，在门店数量，价格，种类，质量上都有着不错的综合表现，而门店有比较多分类走差异化服务，我个人比较喜欢 FairPrice Finest</p><ul><li>FairPrice Supermarkets</li><li>FairPrice Finest</li><li>FairPrice Xtra</li><li>FairPrice Xpress</li><li>FairPrice Shop</li></ul><p>Sheng Siong(昇菘) - <a href="https://shengsiong.com.sg/" target="_blank" rel="noopener">https://shengsiong.com.sg/</a></p><p>Sheng Siong 超市就属于价格比较亲民，重点是有非常多中国商品，包括蔬菜，水果，调料，零食等。疫情期间回馈员工 16 个月花红 (variable bonus，可理解为奖金) 的良心公司就是昇菘啦</p><p>Cold Storage - <a href="https://coldstorage.com.sg/" target="_blank" rel="noopener">https://coldstorage.com.sg/</a></p><p>Cold Storage 的价格略高，但肉类质量比其他超市好不少，市中心还可以看到其高端店 Market Place，不过最有意思的还是其母公司 Dairy Farm International Holdings Ltd，感兴趣的小伙伴可以 Google 搜索了解下，这里就简单列举几个牛奶公司在新加坡设立的兄弟品牌</p><ul><li>7-11 便利店</li><li>家宁(Guardian)</li><li>巨人(Giant)</li><li>冷藏公司(Cold Storage)</li></ul><p>DON DON DONKI - <a href="https://www.dondondonki.com/sg/" target="_blank" rel="noopener">https://www.dondondonki.com/sg/</a></p><p>在新加坡迅速扩张门店的日本超市，肉类选择比 Cold Storage 还多一些，有大量来自 Made in Japan 商品，当然价格也会比一般要贵很多，每家门店口都会设有烤红薯摊位，非常好吃。</p><p>思家客 - <a href="https://www.facebook.com/SiJiaKeisScarlett/" target="_blank" rel="noopener">https://www.facebook.com/SiJiaKeisScarlett/</a></p><p>自从思家客开张后裕华国货的生意就黯淡不少，新加坡平价的中国超市，你能买到大部分国内主流商品和零食，只是一认真对比中国价格你就又输啦</p><p><strong> 备注 </strong></p><ol><li>线下超市们也积极开始发力线上配送，只是用户体验有待改进</li><li>租房或者买房可以关注下周围走路 15 分钟内是否有 24 小时超市</li><li>新加坡还有很多特色商店，这里不一一做介绍了，大家也可以刷小红书慢慢了解</li></ol><h2 id="新加坡家电商场"><a href="#新加坡家电商场" class="headerlink" title="新加坡家电商场"></a>新加坡家电商场</h2><p>Harvey Norman - <a href="https://www.harveynorman.com.sg/" target="_blank" rel="noopener">https://www.harveynorman.com.sg/</a></p><p>Best Denki - <a href="https://www.bestdenki.com.sg/" target="_blank" rel="noopener">https://www.bestdenki.com.sg/</a></p><p>COURTS - <a href="https://www.courts.com.sg/" target="_blank" rel="noopener">https://www.courts.com.sg/</a></p><p><strong> 备注 </strong></p><ol><li>新加坡家电网购不方便，很多细节还是建议直接前往线下旗舰店 (Flagship) 沟通和落地，另外 Apple Store 和 Funan 也是很好玩的地方</li><li>关于比价，各位可以直接货比三家来压价，免运送、安装、换新等服务费，退换赠品，返购物券等都可以谈吧</li><li>Harvey Norman Millenia Walk Flagship Store 给我留下非常好的服务体验，这里实名点赞</li><li>要是京东来卷一下该有多好呀</li></ol><p>Address: 9 Raffles Boulevard #01-59 to 63, Millenia Walk, 039596</p><h2 id="新加坡外卖平台"><a href="#新加坡外卖平台" class="headerlink" title="新加坡外卖平台"></a>新加坡外卖平台</h2><p>Grab - <a href="https://www.grab.com/sg/food/" target="_blank" rel="noopener">https://www.grab.com/sg/food/</a></p><p>GrabFood 凭借着 Grab 打车市场垄断地位进一步延续了外卖市场的优势，不过和 ShopeeFood 迟早要正面硬碰硬</p><p>Foodpanda - <a href="https://www.foodpanda.sg/" target="_blank" rel="noopener">https://www.foodpanda.sg/</a></p><p>Deliveroo - <a href="https://deliveroo.com.sg/" target="_blank" rel="noopener">https://deliveroo.com.sg/</a></p><p><strong> 备注 </strong></p><ol><li>新加坡大部分外卖市场份额由 GrabFood、Foodpanda 和 Deliveroo 瓜分，其他平台短期通过高额补贴拉新但长期来看已经很难分一杯羹</li><li>运送费几家都差不多，Self Pick-up 自取可能会比正常价便宜些，谁有优惠就用谁</li><li>如果美团内卷内战结束，不知道杀到东南亚市场会是怎样一幅画面</li></ol><h2 id="新加坡电商平台"><a href="#新加坡电商平台" class="headerlink" title="新加坡电商平台"></a>新加坡电商平台</h2><p>Shopee - <a href="https://shopee.sg/" target="_blank" rel="noopener">https://shopee.sg/</a></p><p>伴随 Shopee 的魔性广告歌曲，从 2019 年开始逐渐发力，从 Sea 股价就可以看出资本市场的追捧，随处可见的营销广告 + 简单粗暴的包邮政策，虽然商品选择仍然不多但至少一直在进步，而 ShopeePay，SeaMoney, ShopeeFood 的快速发展最终演变为腾讯 + 阿里 + 美团的可能性又进了一步</p><p>Lazada - <a href="https://www.lazada.sg/" target="_blank" rel="noopener">https://www.lazada.sg/</a></p><p>Lazada 在 2019 年并入 RedMart 本以外更上一层楼，结果内部调整的空窗期给了 Shopee 进攻的时间，从领导者降级为追赶者</p><p>iShopChangi - <a href="https://www.ishopchangi.com/" target="_blank" rel="noopener">https://www.ishopchangi.com/</a></p><p>背靠樟宜机场集团，拥有大量免税或者独家资源，价格有时候很美丽</p><p>iHerb - <a href="https://iherb.com/" target="_blank" rel="noopener">https://iherb.com/</a></p><p>专注于保健品的电商平台，但品类却不止步于此，价格比新加坡本地划算很多</p><p>Amazon - <a href="https://www.amazon.sg/" target="_blank" rel="noopener">https://www.amazon.sg/</a></p><p>Amazon 之前在新加坡或者东南亚的投入不足，最近才开始重视加大本地化运营并招兵买马，办理 Amazon Prime 2.99 新币每月会员可以独享的 Moment 有</p><ul><li>Amazon Fresh</li><li>Amazon US 部分商品直邮</li><li>Amazon Prime Video</li><li>Amazon Prime Gaming</li></ul><p>IUIGA - <a href="https://www.iuiga.com/" target="_blank" rel="noopener">https://www.iuiga.com/</a></p><p>基本就像是网易严选的翻版，不同的是线下也开设了大量实体店，有活动时价格比国内还低</p><p>EBuyMart - <a href="https://www.ebuygroup.com.sg/" target="_blank" rel="noopener">https://www.ebuygroup.com.sg/</a></p><p>疫情开始后为数不多做的比较有特色的生鲜超市，像国产的爱媛橙 (28 号或 38 号) 和晴王葡萄 (阳光玫瑰或者香印葡萄) 我也是通过这个平台购买到，口感不输给日本原装进口但价格变实在了，中国引进的种植技术越来越强大了</p><p>Carousell - <a href="https://www.carousell.sg/" target="_blank" rel="noopener">https://www.carousell.sg/</a></p><p>可以理解为新加坡版的闲鱼</p><p><strong> 备注 </strong></p><ol><li>像 Qoo10，社区团购等有自己的受众群体，但随着 Shopee 的快速迭代优势也在慢慢消散</li><li>即使淘宝菜鸟物流有满 299 人民币包邮新加坡活动，但满足条件的商品依旧是少数，所以也催生了一批新加坡海淘集运产业链</li><li>不得不提一句的是国内崛起速度极快的极兔速递，其实就是 OPPO 印尼创始人李杰创建的印尼物流品牌 J&amp;T Express</li><li>疫情前我还经常会使用 ShopBack 和 Eatigo，现在最多定期看看 Shopback Fomo，类似什么值得买</li></ol><h2 id="新加坡代购方案之-ezship"><a href="#新加坡代购方案之-ezship" class="headerlink" title="新加坡代购方案之 ezship"></a>新加坡代购方案之 ezship</h2><p>文章开头我已经提过一些经历，我依次做下点评，没提到的各位也可以通过小红书搜索关键词看看反馈</p><ol><li>第三方空运和海运的广告，标榜低价服务好，大部分不靠谱</li><li>小坡岛新加坡集运多人拼团，就算是个人团通过小坡岛集运小程序，服务和配送流程也没有做到十分健全</li><li>淘宝 299 人民币包邮直送，可是选择受限呐，能选官方空运或者海运直送就不要选择集运，体积重价格不好评估而且容易丢包</li><li>Amazon Prime 2.99 新币每月，价格不贵但真没什么选择，新用户首月免费各位体验下就明白了，以后也许会改善吧</li></ol><blockquote><p>我主要会从中国和美国网购商品，我关心的更多是 CRM 系统是否做得足够标准化，服务是否经得住新加坡本地人的考验</p></blockquote><p>ezship 解决了我遇到的 3 大痛点</p><ol><li>流程和服务高度标准化，全程基本不需要和客服沟通，FAQ 文档相对清晰</li><li>不需要拼团价格透明，配送通过移动货车支持按预约时间免费自取，大件按重量计费支持直送到家</li><li>售后分类清晰，支持 Live Chat 和 Ticket 工单，我遇到的特殊问题目前都可以得到解答或解决</li></ol><p>我使用 ezbuy 的情况</p><ol><li>ezship 普通用户也是免费使用，我一般用于买体积重小的商品</li><li>prime wishlist 每月 3 个额度，用于代买体积重较大商品，2.99 新币包邮不包括税费和新加坡本地配送费用</li><li>ezbuy 自营定期购买纸和椰子水，其他商品并不感兴趣</li></ol><h3 id="关于-ezbuy"><a href="#关于-ezbuy" class="headerlink" title="关于 ezbuy"></a>关于 ezbuy</h3><p>ezbuy 成立于 2010 年，前身为 65daigou，是第一家本土公司，致力于将来自海外（中国，台湾，美国，韩国）的多种消费产品带给本地客户。 2016 年，我们更名为 ezbuy，成为一个全球购物平台，为客户提供无缝的全球购物体验。</p><p><a href="https://ezbuy.sg/Help/QuickGuide" target="_blank" rel="noopener">https://ezbuy.sg/Help/QuickGuide</a></p><p>2017 年被淘宝封杀的事件对 ezbuy 来说想必也是一个重要的转折点</p><p>纵有逆风起，人生不言弃 | ezbuy 活了下来？ - <a href="https://zhuanlan.zhihu.com/p/37405335" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/37405335</a></p><p>ezbuy<br>直接从我们的平台列表中购买数百万种全球产品 - 无需担心国际运输费用的不确定性。</p><p>Prime<br>在我们的平台列表中，有来自中国，美国和韩国的近四百万个 Prime 合格商品 - 您现在可通过订阅成为我们的会员，每次结帐只需支付 S$2.99 的国际运费。</p><p>ezShop<br>如果您想从中国，台湾或美国购买我们网站列表中找不到的商品，可以告诉我们您想要什么，我们可以为您购买。</p><p>ezShip<br>如果您想将包裹寄到我们的海外（中国，台湾，美国）仓库，我们可以比 DHL，Fedex，S.F Express，4PX 等普通物流公司低得多的运费运送包裹。</p><h3 id="转运基础知识"><a href="#转运基础知识" class="headerlink" title="转运基础知识"></a>转运基础知识</h3><p><strong> 禁运商品 </strong></p><p>不同的时期禁运的商品会有所不同，请参照新加坡海关网站查看最新的清单，所有代购平台都是以这个标准为主</p><p><a href="https://www.customs.gov.sg/businesses/importing-goods/controlled-and-prohibited-goods-for-import" target="_blank" rel="noopener">https://www.customs.gov.sg/businesses/importing-goods/controlled-and-prohibited-goods-for-import</a></p><p><strong> 空运和海运 </strong></p><p>空运 - 快速运送<br>空运可以在 4-5 天的工作日将包裹从中国送到用户的收货地址。如果货品需要在一个星期内收到，建议用户使用空运。</p><p>海运 - 价格实惠<br>海运可以在 21-27 天的工作日将包裹从中国送到用户的收货地址。不着急的商品基本都可以走海运慢慢送。</p><p><strong> 体积重和计费重 </strong></p><p>在国际运费中，包裹占用货舱的空间即（体积重量），和（实际重量）同样的重要。 体积较大的包裹，即使他们实际重量很轻，也会在运输过程中占用更多的空间。这就是为什么运费会按照体积重量和实际哪个大最为收费重量。实际重量 / 体积重量两者间将取较重者将来计算其包裹的计费重。</p><p><strong> 普通货和敏感货 </strong></p><p>常见的敏感货如食品，药品，液体等，靠谱的转运仓库会自动帮助筛查，但自己也要有一个心理预期和大致的认知，空运要求较高，无法空运的基本就是海运了</p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202111190016672.png" alt></p><p><strong> 容易拒绝运输商品 </strong></p><p>常见的如易碎品，食品，药品，液体 / 胶体等等，每个商家都有自己的评判标准，不确定的话建议转运前和客服沟通清楚</p><p>Shipping Limits (Volume Limit/Length Limit)</p><p><a href="https://ezbuy.sg/help/orderrelated/list?DOMid=faq_fddd772f-37b8-4d89-a5eb-9bb35c5461f7&amp;id=fddd772f-37b8-4d89-a5eb-9bb35c5461f7-81a7b073-e32a-4a22-a41c-d7995ef2fea4" target="_blank" rel="noopener">https://ezbuy.sg/help/orderrelated/list?DOMid=faq_fddd772f-37b8-4d89-a5eb-9bb35c5461f7&amp;id=fddd772f-37b8-4d89-a5eb-9bb35c5461f7-81a7b073-e32a-4a22-a41c-d7995ef2fea4</a></p><h3 id="ezship-转运"><a href="#ezship-转运" class="headerlink" title="ezship 转运"></a>ezship 转运</h3><p>就是简单的 3 步</p><ol><li>从中国 / 美国 / 台湾购物网站购买商品运到 ezbuy 的仓库</li><li>在 ezbuy 提交订单填写运单号</li><li>支付 ezShip 运费，愉快收货</li></ol><p><a href="https://ezbuy.sg/ezShip" target="_blank" rel="noopener">https://ezbuy.sg/ezShip</a></p><p><a href="https://ezbuy.sg/ezShip/Guide" target="_blank" rel="noopener">https://ezbuy.sg/ezShip/Guide</a></p><p><a href="https://ezbuy.sg/ezShip/Warehouse" target="_blank" rel="noopener">https://ezbuy.sg/ezShip/Warehouse</a></p><h3 id="ezship-本地取货送货"><a href="#ezship-本地取货送货" class="headerlink" title="ezship 本地取货送货"></a>ezship 本地取货送货</h3><p>我常用的为 2 种，其他方式大家可以自行尝试，比如地铁站取货</p><ol><li>邻里社区取货，25 公斤内免费，地点和时间都可以自己控制</li><li>直送到家，按重量阶梯收费</li></ol><p><a href="https://ezbuy.sg/Help/QuickGuide/Delivery" target="_blank" rel="noopener">https://ezbuy.sg/Help/QuickGuide/Delivery</a></p><h3 id="海外仓库和本地仓库存储时间"><a href="#海外仓库和本地仓库存储时间" class="headerlink" title="海外仓库和本地仓库存储时间"></a>海外仓库和本地仓库存储时间</h3><p>ezShip</p><p>中国及台湾：我们提供 20 天的免费仓储时间给少于 20 公斤的订单及 7 天免费仓储时间给超过 20 公斤的订单，超过这个时间，我们会按照每天每个少于 20 公斤的订单收取 1 新币的仓储费及每天每个超过 20 公斤的订单收取 3 新币的仓储费。</p><p>美国仓库：我们提供 30 天的免费仓储时间，您可以利用这段时间购买尽可能多的商品合并发货以节省国际运费。从您的第一个订单到达仓库的日期算起，在 30 天期限满的时候，会收取总订单重量，每天每 10 公斤 1 新币的仓储费。</p><p>本地仓库</p><p>在我们新加坡仓库，不论包裹重量，我们将提供 14 天的免费仓库，超过这个时间，会收取每天每 10 公斤 1 新币的仓储费。</p><p>包裹处置</p><p>对于超过 60 天仍未安排发货的订单，我们视为您选择放弃了此订单，ezbuy 有权直接销毁，不再做另行通知。</p><p><a href="https://ezbuy.sg/Help/QuickGuide/Policy#Policy" target="_blank" rel="noopener">https://ezbuy.sg/Help/QuickGuide/Policy#Policy</a></p><h3 id="ezbuy-客服支持"><a href="#ezbuy-客服支持" class="headerlink" title="ezbuy 客服支持"></a>ezbuy 客服支持</h3><ol><li>访问 ezbuy 任何页面都会有 Live Chat 界面，虽然功能简单但至少通过排队机制大部分情况下都可以联系到人工客服</li><li>Submit a Ticket 中文就是提交工单，客服会负责跟进，比如我申请 refund 就是走工单</li><li>其他情况就是直接打电话或者发邮件，我试过支持中文客服</li></ol><p>You may contact our hotline during our working hours</p><p> (65) 6567 8880</p><p>Mondays-Saturdays: 10:00am - 6:00pm<br>or email to us at <a href="mailto:service@ezbuy.com" target="_blank" rel="noopener">service@ezbuy.com</a></p><p>Please note that our hotlines is not available on Sundays &amp; Public holidays.</p><p><a href="https://ezbuy.sg/help/orderrelated" target="_blank" rel="noopener">https://ezbuy.sg/help/orderrelated</a></p><h2 id="中国新加坡双向物流备选"><a href="#中国新加坡双向物流备选" class="headerlink" title="中国新加坡双向物流备选"></a>中国新加坡双向物流备选</h2><blockquote><p>各位通过搜索引擎或者各种公众号广告应该看得比较多了，不了解的话可以通过小红书搜索看看口碑评价</p></blockquote><p>ESG 中新集运 - <a href="https://everlucky.com.sg/" target="_blank" rel="noopener">https://everlucky.com.sg/</a></p><p><a href="https://www.xiaohongshu.com/discovery/item/61ab1437000000000102581b?xhsshare=WeixinSession&amp;appuid=5c2b5248000000000700b6ad&amp;apptime=1643439074" target="_blank" rel="noopener">中国🇨🇳至新加坡（双向物流）客户真实反馈</a></p>]]></content>
    
    <summary type="html">
    
      新加坡本地网购以及使用ezship从中国网购代购运送至新加坡的经验分享
    
    </summary>
    
      <category term="生活 | Life" scheme="https://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
    
  </entry>
  
  <entry>
    <title>新加坡居民个人所得税呈报指南</title>
    <link href="https://wsgzao.github.io/post/singapore-iras/"/>
    <id>https://wsgzao.github.io/post/singapore-iras/</id>
    <published>2022-03-14T02:59:49.000Z</published>
    <updated>2022-04-06T03:16:54.417Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在新加坡工作每年 3 月都会收到 IRAS（Inland Revenue Authority of Singapore)报税的通知信息，对于大部分普通人来说其实我们一般没有需要特别关注的地方，查看账单确认无误缴税就完事了，IRAS 官方的报税文档应该介绍的已经比较详细了，以最新政策为准。文章最后记录一部分我觉得写的比较好的新加坡缴税以及合法减税避税方式，包括很多人关心的 SRS（Supplementary Retirement Scheme）退休辅助计划，股票、期权在新加坡缴税的说明等，</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 03 月 14 日 - 更新 2024 阶梯税率变化，补充 guide-to-form-b1 减税的细节<br>2021 年 09 月 16 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/singapore-iras/">https://wsgzao.github.io/post/singapore-iras/</a></p><hr><h2 id="新加坡报税基础知识"><a href="#新加坡报税基础知识" class="headerlink" title="新加坡报税基础知识"></a>新加坡报税基础知识</h2><p>首先，必须要知道的是，新加坡的税收分成两种：“居民”和“非居民”。</p><p><strong> 居民 </strong>（Residents）的定义：</p><ol><li>新加坡公民</li><li>新加坡永久居民</li><li>全年在新加坡居留或工作 <strong>183 天或以上 </strong> 的外界人士（作为公司董事的情况除外）</li></ol><p><strong> 非居民 </strong>（Non-residents）的定义：</p><ol><li>如果你在纳税年度的前一年，在新加坡境内 <strong> 居住超过 61 天，但不满 183 天 </strong>，需要按照 “非税收居民” 的税收规定，缴付 <strong>15%</strong> 个人所得税，但公司董事则需要缴付 <strong>22%</strong> 个人所得税。</li><li>如果你在新加坡境内 <strong> 居住不超过 61 天 </strong>，就不需要交税，而公司董事还是需要缴付 <strong>22%</strong> 个人所得税。</li></ol><p>这里的 “183 天” 指的是你在新加坡就业期间，逗留在新加坡的天数，包括周末和公共假日。就职期间因为合理理由出境新加坡，例如海外度假或出差，也算在逗留时间内。</p><p>注意！根据以上的定义，如果你在新加坡居住 <strong> 不超过 **</strong>61 天 <strong>，或已经住 </strong> 超过 1<strong>**83 天 </strong>，而公司还跟你说要付 <strong>15%</strong> 的税，那么 <strong> 公司很有可能是在骗你的钱 </strong>，请拨打 IRAS 电话寻求帮助：1800-356-8300。</p><h3 id="居民的多少收入需要报税？"><a href="#居民的多少收入需要报税？" class="headerlink" title="居民的多少收入需要报税？"></a>居民的多少收入需要报税？</h3><blockquote><p>2024 年的新税率最高变为 24%，对普通人没影响</p></blockquote><p>新加坡 <strong> 居民 </strong> 的个人所得税，实行累进税率制。扣除个人所得税减免之外，个人所得税税率保持在 0-22% 之间。纳税居民有权就子女抚养费、职业培训费、保险费以及公积金 (CPF) 缴款等事项享受个人所得税减免。</p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202203141140712.png" alt></p><p>例如：年总收入 $35,000, 前 30,000 的税额为 $200，余额 5,000 的税额是 5,000X3.5%=$175, 所以总税额为 $375。</p><p>年总收入若在 $20,000 以下，恭喜你不用纳税！</p><p>理论上来说，即使年收入低于 $20,000，依然需要在网上提交材料进行申报，只是不需缴纳，除非收到税务局的信，明确指出你不需要申报了</p><p><a href="https://www.iras.gov.sg/taxes/individual-income-tax/basics-of-individual-income-tax/tax-residency-and-tax-rates/individual-income-tax-rates" target="_blank" rel="noopener">https://www.iras.gov.sg/taxes/individual-income-tax/basics-of-individual-income-tax/tax-residency-and-tax-rates/individual-income-tax-rates</a></p><h3 id="换工作需要税务清关"><a href="#换工作需要税务清关" class="headerlink" title="换工作需要税务清关"></a>换工作需要税务清关</h3><p>如果你在新加坡 <strong> 换工作或者辞职 </strong>，那么你的雇主必须在你离开新加坡的 1 个月之前，需要提交 <strong>IR21</strong> 表格，完成税务清关。</p><p>公司在收到你的辞职信之后，公司将有权等你还清税务后，才把剩下的薪水给你。</p><h3 id="什么时候报税？"><a href="#什么时候报税？" class="headerlink" title="什么时候报税？"></a>什么时候报税？</h3><p>新加坡个人所得税报税时间通常都必须在 <strong>4 月 15 日 </strong> 之前完成，而一个周期的截止日期是每一年的 12 月 31 日。</p><h3 id="怎么报税？"><a href="#怎么报税？" class="headerlink" title="怎么报税？"></a>怎么报税？</h3><p>你需要登录报税网站 <strong>mytax.iras.gov.sg</strong>，通过 E-filling 进行网上提交。</p><p>完成申报后，税务局会给你缴税通知说明（Notice of Assessment），你必须在接到缴税通知之后的一个月内缴纳，否则将面临罚款。</p><h3 id="如何支付税款？"><a href="#如何支付税款？" class="headerlink" title="如何支付税款？"></a>如何支付税款？</h3><p>收到 Notice of Assessment 后，你可以根据自己的情况，选择以下其中一种方式支付税款：</p><p>（1）ATM（DBS/POSB、OCBC）<br>（2）AXS 在线平台、AXS 站点<br>（3）支票 / GIRO / 网上支付 / 电话银行（需开通服务）<br>（4）邮政自助服务器（SAM）<br>（5）电汇</p><p>建议通过 GIRO 可以直接从个人银行账户支付税款，省去排队麻烦，也会避免支付延迟等可能会带来的问题，同时还可以进行免息分期付款等。</p><h3 id="新加坡税务局"><a href="#新加坡税务局" class="headerlink" title="新加坡税务局"></a>新加坡税务局</h3><p>地址：Revenue House, 55 Newton Rd, Revenue House, Singapore 307987<br>办公时间：周一至周五，上午 8 时至下午 5 时<br>电话：1800 356 8300</p><h2 id="新加坡抵税项目"><a href="#新加坡抵税项目" class="headerlink" title="新加坡抵税项目"></a>新加坡抵税项目</h2><p>要注意的是每个人每年减税的上限为 80000 新币</p><h3 id="捐款"><a href="#捐款" class="headerlink" title="捐款"></a>捐款</h3><p>相信小伙伴们经常看见路边有志愿者在募捐，那么只要你在募捐时填写了 FIN/NRIC 号码，你的捐款金额就会被 IRAS 算在减扣项目里。该项减扣额度是捐款金额的 2.5 倍。IRAS 网站并未注明捐款抵税的上限，因此只要每年个人的减税额度没有超过 80000 新币，就可以继续用捐款抵税。</p><h3 id="家人"><a href="#家人" class="headerlink" title="家人"></a>家人</h3><p>若配偶过去一年与你 (纳税人) 一起生活居住，并且配偶的年收入低于 4000 新币(或没有收入)，那你便可以减扣 2000 新币(配偶若有残障，可减扣 5500 新币)。</p><p>若子女 (亲生、继养或合法领养的) 未满 16 岁或还在全职读书，且子女的年收入少于 4000 新币 (甚至没有收入), 那么父母(纳税人) 可以共享每个孩子 4000 新币的个税减扣。</p><p>如果自己或配偶的父母、祖父母年收入少于 4000 新币，超过 55 岁并且和自己生活在一起，则可以减免 9000 新币的 Taxable Income，如果没有生活在一起，则可以减免 5500 新币。</p><p>需要注意的是，IRAS 网站上对配偶和子女所持签证并无要求，而对于父母和祖父母则明确要求需要持有新加坡长期准证才可以实施减税。</p><h3 id="强制缴纳的-CPF"><a href="#强制缴纳的-CPF" class="headerlink" title="强制缴纳的 CPF"></a>强制缴纳的 CPF</h3><p>成为新加坡永久居民或者公民之后，新加坡规定公司和员工按照工资的一定比例缴纳收入到个人的 CPF 账户，一般为员工缴纳 20%，公司缴纳 17%，减税的上限为 20400 新币。</p><p>举例说明: 一名员工年收入 50000 新币，其中公司交了 8500 新币，自己交了 10000 新币进入 CPF，实际发的工资为 40000 新币，那么个人用于计算 Taxable Income 的就只有 40000 新币。</p><p>新加坡公民及新加坡永久居民雇员之强制性中央公积金 / 特准养老金或公积金纳款<br>• 此缴交额不得超过中央公积金法令规定的缴交额。<br>(a) 普通薪金 (OW) 的公积金缴交额顶限为每月 $6,000。<br>(b) 每年普通薪金（OW）总限额为 $72,000（即 12 个月 × $6,000），而强制性公积金纳款的总收入顶限为 $102,000 (即 17 个月 × $6,000)。<br>(c) 应缴交公积金的额外薪金限额相当于 $102,000 和普通薪金总额之间的差额。<br>• 如果您的雇主参与雇佣收入自动纳入计划，您不需填报公积金缴交额，我们将直接从您的雇主获取相关资料。</p><p>自愿填补自己的保健储蓄户头<br>• 如果您在 2021 年是新加坡公民或新加坡永久居民，您可申请扣除自愿填补您保健户头的现金款项。此填补款项必须是在年度公积金缴交限额 $37,740（即 17 个月 × $6,000 × 37%）及基本保健储蓄顶额之内，并由您直接指定并存入您本人的保健储蓄户头。您必须不曾以自雇人士身份申请过这部分自愿填补额的扣除。</p><h3 id="SRS-退休辅助计划"><a href="#SRS-退休辅助计划" class="headerlink" title="SRS 退休辅助计划"></a>SRS 退休辅助计划</h3><blockquote><p>我不是专业人士就直接说下自己理解的 SRS 特点供各位参考，核心就是减税</p></blockquote><p>SRS 全称为 Supplementary Retirement Scheme，是新加坡针对公民、PR、S pass 和 EP 等身份推出的自愿性质的补充退休账户。</p><p>顾名思义，这个账户是为了帮助个人更好地规划自己的养老生活，新加坡政府会鼓励大家把钱存进这个账户，并且鼓励大家到退休 (62 岁，7 月 1 日起为 63 岁) 之后再拿出来花。</p><p>这里需要注意的是，SRS 账户是银行账户的一种，可以在新加坡的三大银行 DBS、OCBC 或 UOB 进行开户，开好之后属于你银行户口的一个子账户。整个开户流程在网银上就可以完成，然后就可以把钱从普通账户转到 SRS 账户。</p><p>SRS 的优势在于，你往 SRS 账户转了一笔钱，当年的 Taxable Income 就可以自动减少同样的数额，相当于养老避税两不误！</p><p>每年个人可以通过 SRS 来减少的 Taxable Income 是有一个上限的，新加坡公民和 PR 为 15300 新币，外国人为 35700 新币。</p><ol><li>年收入大于 10w 新币，报税减去 SRS 存入金额预期可以节省约 200 到 3000 不等的税，根据实际存入金额计算，SRS 存入有上限且收入随阶梯税率上升</li><li>长期在新加坡生活外国人或者 PR 预期超过 10 年，有意愿成为新加坡公民等到 62 岁退休每年提取不超过 2w</li><li>现金流充足闲置资金较多，追求一定收益率跑赢通货膨胀，偏向低风险投资</li><li>SRS 核心就是为了减税，如果提前取或者退休后一次性取出依然要补税</li></ol><p>从 SRS 账户取钱的时间点非常关键，具体区别如下：</p><h3 id="62-岁前取钱"><a href="#62-岁前取钱" class="headerlink" title="62 岁前取钱"></a>62 岁前取钱</h3><p>可能有小伙伴会问，那我在 62 岁之前可以把钱取出来吗？答案是可以的，但是需要承受两个后果：</p><ol><li>取出来的钱算 100% 的 Taxable Income</li><li>有 5% 的罚款</li></ol><p>提早取钱意味着要比别人多交税，因此除非是紧急情况，否则不推荐大家提早从 SRS 账户取钱。</p><h3 id="62-岁后取钱"><a href="#62-岁后取钱" class="headerlink" title="62 岁后取钱"></a>62 岁后取钱</h3><p>如果在 62 岁取钱，数额的 50% 会成为 Taxable Income。举例说明: 小明 62 岁后没有收入，他从 SRS 账户取出了 40000 新币，其中 50% 也就是 20000 新币会作为 Taxable Income。当 Income 为 20000 新币时，所需要交的税为零。同样的道理，如果小明取出了 80000 新币，Taxable Income 为 40000 新币，那需要交 550 新币的税。因此 SRS 并不是永久性的减税，而是延迟了交税时间，这也是新加坡政府高明的地方。</p><p>因此，新加坡设立的规定基本是没有空子可钻的。除非你今年的收入很高，然后选择在之后某一年收入很少的时候取钱，并且两年的个税差值大于 5% 才是 “有利可图” 的。</p><p>举一个常规的例子，小明今年收入为 120000 新币，要交的税为 7950 新币。假如他把 15300 新币转进 SRS 账户，可以少交的税为 15300 x 11.5% = 1759.5 新币。转进去的这笔钱就当做是自己的养老金了，其实也是非常划算的。</p><p>我们转进 SRS 账户的钱只有每年 0.05% 的利息，非常的低，所以我们一般都会用里面的钱来理财，进一步提高我们的收益。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.iras.gov.sg/" target="_blank" rel="noopener">https://www.iras.gov.sg/</a></p><p><a href="https://www.iras.gov.sg/media/docs/default-source/uploadedfiles/pdf/guide-to-form-b1-(chinese).pdf" target="_blank" rel="noopener">https://www.iras.gov.sg/media/docs/default-source/uploadedfiles/pdf/guide-to-form-b1-(chinese).pdf</a></p><p><a href="https://www.iras.gov.sg/media/docs/default-source/uploadedfiles/pdf/guide-to-form-b1-(english).pdf" target="_blank" rel="noopener">https://www.iras.gov.sg/media/docs/default-source/uploadedfiles/pdf/guide-to-form-b1-(english).pdf</a></p><p><a href="https://mp.weixin.qq.com/s/8-d1PpKGI3Ruv_UdFEnk-g" target="_blank" rel="noopener">狮城财富通 | 原来报税还可以这样省钱！</a></p><p><a href="https://mp.weixin.qq.com/s/IJBnppAnCZT3ekXBdVU_Yg" target="_blank" rel="noopener">股票、期权在新加坡需要缴税吗？</a></p><p><a href="https://mp.weixin.qq.com/s/jKLpN_LJOnawq7usm7LAoA" target="_blank" rel="noopener">怎样通过 SRS 在新加坡合法避税？</a></p><p><a href="https://www.tanxin.sg/post/%E6%96%B0%E5%8A%A0%E5%9D%A1srs%E9%80%80%E4%BC%91%E8%BE%85%E5%8A%A9%E8%AE%A1%E5%88%92%E7%9A%84%E6%8A%95%E8%B5%84%E7%AD%96%E7%95%A5" target="_blank" rel="noopener">新加坡 SRS 退休辅助计划的投资策略</a></p>]]></content>
    
    <summary type="html">
    
      新加坡居民个人所得税呈报指南
    
    </summary>
    
      <category term="生活 | Life" scheme="https://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
    
  </entry>
  
  <entry>
    <title>MacBook macOS 从小白到入门</title>
    <link href="https://wsgzao.github.io/post/macbook/"/>
    <id>https://wsgzao.github.io/post/macbook/</id>
    <published>2022-01-09T08:59:49.000Z</published>
    <updated>2022-01-08T20:33:52.667Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><img src="https://i.v2ex.co/y2JB0IAD.png" alt></p><p>这里做下 MacBook macOS 从小白到入门的持续更新记录</p><blockquote><p>MacBook macOS 从小白到入门</p></blockquote><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022 年 01 月 09 日 - 增加 WindowServer 高 CPU 占用率的问题<br>2021 年 09 月 28 日 - 增加 Hidden Bar/Feem/OmniPlayer，更新 Big Sur 系统配置<br>2020 年 11 月 06 日 - 增加 Lunar/gfxCardStatus/Fliqlo/One Switch<br>2020 年 08 月 18 日 - 增加 uTools/macOS 小助手 / 腾讯柠檬清理 / 超级右键 iRightMouse/QQ 影音 / Apifox<br>2020 年 03 月 10 日 - 增加 eZip/PicGo/GifCapture/iShot<br>2019 年 11 月 21 日 - 增加 macOS 生产力工具链推荐<br>2019 年 03 月 16 日 - 更新 macOS vim 语法高亮的设置方法<br>2019 年 02 月 28 日 - 更新 macOS 开启关闭 SIP<br>2019 年 01 月 24 日 - 增加开启 HiDPI 和解决黑屏问题<br>2018 年 10 月 19 日 - 更新升级 macOS Mojave 后的各种小问题解决方法<br>2018 年 07 月 25 日 - 补充细节<br>2018 年 07 月 05 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/macbook/">https://wsgzao.github.io/post/macbook/</a></p><p><strong> 扩展阅读 </strong></p><p>Awesome Mac - <a href="http://wangchujiang.com/awesome-mac/index.zh.html" target="_blank" rel="noopener">http://wangchujiang.com/awesome-mac/index.zh.html</a><br>BestApp - <a href="https://github.com/hzlzh/Best-App" target="_blank" rel="noopener">https://github.com/hzlzh/Best-App</a><br><a href="https://github.com/Louiszhai/tool" target="_blank" rel="noopener">开发效率提升：Mac 生产力工具链推荐</a></p><hr><h2 id="MacBook-Pro-Essentials"><a href="#MacBook-Pro-Essentials" class="headerlink" title="MacBook Pro Essentials"></a>MacBook Pro Essentials</h2><blockquote><p>苹果官方编写的 macOS 使用手册，首次打开 Books 时就会出现，非常推荐大家阅读</p></blockquote><p><a href="https://support.apple.com/en-sg/guide/macbook-pro/welcome/mac" target="_blank" rel="noopener">MacBook Pro Essentials</a></p><p><a href="https://support.apple.com/zh-cn/guide/macbook-pro/" target="_blank" rel="noopener">macOS 使用手册</a></p><h2 id="System-Preferences"><a href="#System-Preferences" class="headerlink" title="System Preferences"></a>System Preferences</h2><blockquote><p>在任何的操作系统中，首先你需要做一件事就是更新系统，点击窗口左上角的  &gt; 关于本机 &gt; 软件更新 。此外，如果这是一部新的电脑，你还需要到系统设置进行一些适当调整。如何调整，取决于个人喜好。</p></blockquote><h3 id="触控板"><a href="#触控板" class="headerlink" title="触控板"></a>触控板</h3><p>系统设置 &gt; 触控板</p><p>光标与点击</p><ul><li>轻拍来点按</li><li>辅助点按</li><li>查找</li><li>三指拖移</li></ul><p>滚动缩放</p><ul><li>默认全选</li></ul><p>更多手势</p><ul><li>默认全选</li></ul><h3 id="Dock"><a href="#Dock" class="headerlink" title="Dock"></a>Dock</h3><p>置于屏幕上的位置：左边<br>设置 Dock 图标更小（大小随个人喜好）</p><ul><li>自动显示和隐藏 Dock</li></ul><h3 id="Finder"><a href="#Finder" class="headerlink" title="Finder"></a>Finder</h3><p>Finder &gt; 显示</p><ul><li>显示标签页栏</li><li>显示路径栏</li><li>显示状态栏</li><li>自定工具栏 &gt; 去除所有按钮，仅剩搜索栏</li></ul><p>Finder &gt; 偏好设置</p><p>通用</p><ul><li>开启新 Finder 窗口时打开：HOME「用户名」目录</li></ul><p>边栏</p><ul><li>添加 HOME「用户名」目录 和 创建代码文件目录</li><li>将 共享的(shared) 和 标记(tags) 目录去掉</li></ul><p>菜单栏</p><ul><li>去掉蓝牙等无需经常使用的图标</li><li>将电池显示设置为百分比</li></ul><p>Spotlight</p><ul><li>去掉字体和书签与历史记录等不需要的内容</li><li>设置合适的快捷键</li></ul><p>互联网帐户</p><ul><li>添加 iCloud 用户，同步日历，联系人和 Find my mac 等等</li></ul><h3 id="English"><a href="#English" class="headerlink" title="English"></a>English</h3><p>Trackpad</p><ul><li>Tap to click</li></ul><p>Accessibility -&gt; Mouse &amp; Trackpad -&gt; Trackpad Options</p><ul><li>Enable dragging | three finger drag</li></ul><p>Language &amp; Region</p><ul><li>Time format | 24-Hour Time</li><li>click add button | Chinese, Simplified</li></ul><p>Language &amp; Region -&gt; Keyboard Preferences -&gt; Shortcuts -&gt; Input Sources</p><ul><li>Select the previous input source</li></ul><p>Display -&gt; Arrangement</p><ul><li>Drag the graphics and just make what you want</li><li>if the display rotates 90 degrees then change Rotation to 90° or 270° and click confirm button to save</li></ul><p>Extensions -&gt; Touch Bar</p><ul><li>Customise </li></ul><p>Sound -&gt; Output</p><ul><li>Show volume in menu bar</li></ul><p>命令行修改 OS X 系统，类似于 Windows 注册表<br><a href="https://github.com/bestswifter/macbootstrap/blob/master/doc/system.md" target="_blank" rel="noopener">https://github.com/bestswifter/macbootstrap/blob/master/doc/system.md</a></p><h3 id="WindowServer-高-CPU-占用率的问题"><a href="#WindowServer-高-CPU-占用率的问题" class="headerlink" title="WindowServer 高 CPU 占用率的问题"></a>WindowServer 高 CPU 占用率的问题</h3><p>WindowServer 高 CPU 占用率的问题从我开始吧 MacBook Pro 作为工作电脑深度使用就一直遇到的一个问题，估计 Apple 自研 M1 芯片后会好一些</p><ul><li>Mojave</li><li>Catalina</li><li>Big Sur</li><li>Monterey</li></ul><p>至少在 Intel 芯片版本的 MacBook 几乎都存在 WindowServer 高 CPU 占用率的情况，如果你跟我一样也使用旧款的苹果设备，并且无意追新的话，可能会发现经过几次系统升级后，即使不打开任何大型软件，设备本身就会热到烫手。如果查看 Activity Monitor，会发现 WindowServer 进程占用很高的 CPU（从 40% 到 100% 波动）</p><p>那么这个进程是做什么用的？WindowServer 是 macOS 的 display server，包含显示服务器和窗口管理器的功能，可以简单理解为功能类似 Linux 上的 X11。macOS 设备上屏幕显示的所有内容基本都由 WindoServer 负责管理、合成和发送给硬件进行渲染。</p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202201090431616.png" alt></p><p>再来去到 System Preferences，点开 Accessibility &gt; Display，勾上 以下选项</p><ul><li>Reduce Motion 减少 macOS 上界面的动画效果</li><li>Reduce transparency 这会让一些透明的部件（例如菜单栏）的渲染压力减小</li><li>Differenciate without color 无色差异化”设置的最佳解释是，它旨在帮助有视觉困难或色盲的用户, 对大部分人来说作用很小</li></ul><p>降低 WindowServer 的 CPU 占用<br><a href="https://blog.mynook.info/post/macos-windowserver-calm-down/" target="_blank" rel="noopener">https://blog.mynook.info/post/macos-windowserver-calm-down/</a></p><h2 id="Mac-键盘快捷键"><a href="#Mac-键盘快捷键" class="headerlink" title="Mac 键盘快捷键"></a>Mac 键盘快捷键</h2><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20191122174620.png" alt></p><table><thead><tr><th style="text-align:center">Symbol</th><th style="text-align:center">Key</th></tr></thead><tbody><tr><td style="text-align:center">&#8984;</td><td style="text-align:center">Command Key</td></tr><tr><td style="text-align:center">&#8963;</td><td style="text-align:center">Control Key</td></tr><tr><td style="text-align:center">&#8997;</td><td style="text-align:center">Option Key</td></tr><tr><td style="text-align:center">&#8679;</td><td style="text-align:center">Shift Key</td></tr></tbody></table><blockquote><p>我自己常用的快捷键</p></blockquote><table><thead><tr><th>快捷键</th><th>描述</th></tr></thead><tbody><tr><td>Command(⌘)-C</td><td>复制</td></tr><tr><td>Command(⌘)-V</td><td>粘贴</td></tr><tr><td>Command(⌘)-Z</td><td>撤销</td></tr><tr><td>Command(⌘)-Option-V</td><td>剪切粘贴</td></tr><tr><td>Command(⌘)-A</td><td>全选</td></tr><tr><td>Command(⌘)-F</td><td>查找</td></tr><tr><td>Command(⌘)-S</td><td>保存</td></tr><tr><td>Command(⌘)-W</td><td>关闭当前窗口</td></tr><tr><td>Command(⌘)- 空格键</td><td>聚焦</td></tr><tr><td>Command(⌘)- 方向左键</td><td>后退</td></tr><tr><td>Command(⌘)- 方向右键</td><td>前进</td></tr><tr><td>Control-A</td><td>移至行或段落的开头</td></tr><tr><td>Control-E</td><td>移至行或段落的末尾</td></tr><tr><td>Control - 空格键</td><td>切换输入法（需要手动设置）</td></tr><tr><td>Control-Command-Q</td><td>系统自带锁屏快捷键</td></tr><tr><td>Option-Command-C</td><td>复制文件路径，当然也可以直接拖拽到命令行</td></tr></tbody></table><p><a href="https://support.apple.com/zh-cn/HT201236" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201236</a></p><h2 id="Mac-Soft"><a href="#Mac-Soft" class="headerlink" title="Mac Soft"></a>Mac Soft</h2><p>Homebrew - Mac 下必备的包管理工具<br><a href="https://brew.sh/" target="_blank" rel="noopener">https://brew.sh/</a></p><p>Alfred - Mac 下被无数人安利的效率工具，虽然我觉得 Spotlight 暂时够用了<br><a href="https://www.alfredapp.com/" target="_blank" rel="noopener">https://www.alfredapp.com/</a></p><p>uTools - 国人开发基于插件式的轻量级工具集软件<br><a href="https://u.tools/" target="_blank" rel="noopener">https://u.tools/</a></p><p>Hidden Bar - 隐藏右上角多余图标<br><a href="https://github.com/dwarvesf/hidden" target="_blank" rel="noopener">https://github.com/dwarvesf/hidden</a></p><p>macOS 小助手(mac 常用命令集合)<br><a href="https://macwk.com/soft/macos-assistant-macwk" target="_blank" rel="noopener">https://macwk.com/soft/macos-assistant-macwk</a></p><p>腾讯柠檬清理 - 腾讯官方出品的 macOS 清理工具，代替旧版 Mac 管家<br><a href="https://lemon.qq.com/" target="_blank" rel="noopener">https://lemon.qq.com/</a></p><p>Mounty for NTFS - 免费的 NTFS 支持软件<br><a href="http://enjoygineering.com/mounty/" target="_blank" rel="noopener">http://enjoygineering.com/mounty/</a><br><a href="https://www.seagate.com/sg/en/support/software/paragon/#downloads" target="_blank" rel="noopener">Seagate</a></p><p>Sougou Input - 陪伴大家多年的搜狗输入法<br><a href="https://pinyin.sogou.com/mac/" target="_blank" rel="noopener">https://pinyin.sogou.com/mac/</a></p><p>Visual Studio Code - 代替 JetBrains 重型武器<br><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a></p><p>Youdao Dict - 网易开发的老牌翻译工具<br><a href="http://cidian.youdao.com/index-mac.html" target="_blank" rel="noopener">http://cidian.youdao.com/index-mac.html</a></p><p>Adobe Reader - Adobe 官方免费的 PDF 阅读工具<br><a href="https://get.adobe.com/reader/" target="_blank" rel="noopener">https://get.adobe.com/reader/</a></p><p>Clearview - 支持 PDF, EPUB, CHM, MOBI 的免费阅读器<br><a href="https://itunes.apple.com/app/clearview/id557090104?mt=12&amp;ls=1" target="_blank" rel="noopener">https://itunes.apple.com/app/clearview/id557090104?mt=12&amp;ls=1</a></p><p>Evernote - 轻量级的在线笔记类应用内<br><a href="https://evernote.com/" target="_blank" rel="noopener">https://evernote.com/</a></p><p>Dropbox - 最佳的实时同步工具之一<br><a href="https://www.dropbox.com/" target="_blank" rel="noopener">https://www.dropbox.com/</a></p><p>eZip - 国人编写的转为 macOS 而设计的压缩软件，代替 Keka<br><a href="https://ezip.awehunt.com/" target="_blank" rel="noopener">https://ezip.awehunt.com/</a></p><p>Mac 迅雷 - 支持协议多广告也多，qBittorrent 都可以作为备选方案<br><a href="http://mac.xunlei.com/" target="_blank" rel="noopener">http://mac.xunlei.com/</a></p><p>Xdown - 免费无广告的 idm / torrent 合成体，更加简单的 qBittorrent 增加版<br><a href="https://xdown.org/" target="_blank" rel="noopener">https://xdown.org/</a></p><p>百度网盘 - 国内的网盘共享基本只剩下百度一家独大了，有时候迅雷离线无法下载可以尝试<br><a href="https://pan.baidu.com/" target="_blank" rel="noopener">https://pan.baidu.com/</a></p><p>IINA - 国人编写的开源视频播放器，备选重新复活的射手影音<br><a href="https://iina.io/" target="_blank" rel="noopener">https://iina.io/</a></p><p>PicGo - 国人开发的开源图片上传工具，我 Blog 中使用的图片就是基于 GitHub 的图床<br><a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noopener">https://github.com/Molunerfinn/PicGo</a></p><p>GifCapture - 开源的 GIF 录制工具<br><a href="https://github.com/onmyway133/GifCapture" target="_blank" rel="noopener">https://github.com/onmyway133/GifCapture</a></p><p>iShot - 或许是最好的截图软件，超越了 Snipaste 和 Xnip<br><a href="https://apps.apple.com/cn/app/ishot-%E6%88%AA%E5%9B%BE-%E9%95%BF%E6%88%AA%E5%9B%BE-%E6%A0%87%E6%B3%A8%E5%B7%A5%E5%85%B7/id1485844094?mt=12" target="_blank" rel="noopener">https://apps.apple.com/cn/app/ishot-%E6%88%AA%E5%9B%BE-%E9%95%BF%E6%88%AA%E5%9B%BE-%E6%A0%87%E6%B3%A8%E5%B7%A5%E5%85%B7/id1485844094?mt=12</a></p><p>超级右键 iRightMouse - 通过增加右键功能极大地方便 UI 界面下的各种操作<br><a href="https://apps.apple.com/cn/app/irightmouse-%E8%B6%85%E7%BA%A7%E5%8F%B3%E9%94%AE/id1497428978?mt=12" target="_blank" rel="noopener">https://apps.apple.com/cn/app/irightmouse-%E8%B6%85%E7%BA%A7%E5%8F%B3%E9%94%AE/id1497428978?mt=12</a></p><p>FileZilla - 免费开源的 FTP/SFTP 应用<br><a href="https://filezilla-project.org/download.php?type=client" target="_blank" rel="noopener">https://filezilla-project.org/download.php?type=client</a></p><p>Clipy - 记录多条粘贴板小工具<br><a href="https://github.com/Clipy/Clipy" target="_blank" rel="noopener">https://github.com/Clipy/Clipy</a></p><p>rectangle - 代替 Spectacle 快速调整程序窗口位置的效率工具<br><a href="https://github.com/rxhanson/Rectangle" target="_blank" rel="noopener">https://github.com/rxhanson/Rectangle</a></p><p>Lunar - 智能调节外接显示器亮度<br><a href="https://lunar.fyi/" target="_blank" rel="noopener">https://lunar.fyi/</a></p><p>gfxCardStatus - 用于调整集成显卡和独立显卡，省电减少发热<br><a href="https://gfx.io/" target="_blank" rel="noopener">https://gfx.io/</a></p><p>Fliqlo - 极简的时钟屏保<br><a href="https://fliqlo.com/" target="_blank" rel="noopener">https://fliqlo.com/</a></p><p>Sequel Ace - Sequel Pro 之后免费开源 MySQL 客户端<br><a href="https://github.com/Sequel-Ace/Sequel-Ace" target="_blank" rel="noopener">https://github.com/Sequel-Ace/Sequel-Ace</a></p><p>TablePlus - 免费版本限制 2 个 tab 不过够用了<br><a href="https://tableplus.com/" target="_blank" rel="noopener">https://tableplus.com/</a></p><p>Sourcetree - 图形化 Git 管理工具<br><a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">https://www.sourcetreeapp.com/</a></p><p>Microsoft Remote Desktop - Mac 下的微软 RDP 远程桌面登录工具<br><a href="https://itunes.apple.com/us/app/microsoft-remote-desktop-10/id1295203466?mt=12" target="_blank" rel="noopener">https://itunes.apple.com/us/app/microsoft-remote-desktop-10/id1295203466?mt=12</a></p><p>PostMan - 免费强大的 HTTP 调试工具<br><a href="https://www.getpostman.com/" target="_blank" rel="noopener">https://www.getpostman.com/</a></p><p>Apifox = Postman + Swagger + Mock 可能是比 Postman 更好用的接口管理平台<br><a href="https://www.apifox.cn/" target="_blank" rel="noopener">https://www.apifox.cn/</a></p><p>网易 MuMu - Android 模拟器<br><a href="https://mumu.163.com/" target="_blank" rel="noopener">https://mumu.163.com/</a></p><p>VirtualBox - 免费的虚拟机工具，付费类的产品包括 VMware Fusion 和 Parallels<br><a href="http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html</a></p><p>VMware OS Optimization Tool - VMware 开发的 Windows 虚拟机优化工具<br><a href="https://labs.vmware.com/flings/vmware-os-optimization-tool" target="_blank" rel="noopener">https://labs.vmware.com/flings/vmware-os-optimization-tool</a></p><p>Docker Desktop - 如果说之前人人都要懂一点 VM 虚拟机，那么现在就是人人都应该了解一点 Docker 容器<br><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">https://www.docker.com/products/docker-desktop</a></p><p>Feem - 最佳的局域网传输工具，开源产品可以使用 LANDrop<br><a href="https://feem.io/" target="_blank" rel="noopener">https://feem.io/</a></p><p>一键开启 macOS HiDPI<br><a href="https://github.com/xzhih/one-key-hidpi" target="_blank" rel="noopener">https://github.com/xzhih/one-key-hidpi</a><br><a href="https://www.sqlsec.com/2018/09/hidpi.htmlß" target="_blank" rel="noopener">https://www.sqlsec.com/2018/09/hidpi.htmlß</a></p><blockquote><p>付费应用</p></blockquote><p>One Switch - 非常强大的一键切换工具，之前很多人推荐用于 1 秒连接蓝牙耳机，相信大家已经比较熟悉了<br><a href="https://fireball.studio/oneswitch/" target="_blank" rel="noopener">https://fireball.studio/oneswitch/</a></p><p>OmniPlayer - 号称全球第二好的 macOS 视频播放器，对比 IINA 我经常使用投屏功能到电视上，非常方便<br><a href="https://okaapps.com/product/1470926410" target="_blank" rel="noopener">https://okaapps.com/product/1470926410</a></p><p>JetBrains - 大家熟知的 IDEA/PyCharm/GoLand/DataGrip 等都是他们家的，教育用户可以免费按年续约<br><a href="https://www.jetbrains.com/products/#type=ide" target="_blank" rel="noopener">https://www.jetbrains.com/products/#type=ide</a></p><h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h3><p><a href="https://docs.brew.sh/Installation" target="_blank" rel="noopener">https://docs.brew.sh/Installation</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install xcode command line tools</span></span><br><span class="line">xcode-select --install</span><br><span class="line"></span><br><span class="line"><span class="comment"># install homebrew</span></span><br><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># install packages</span></span><br><span class="line">brew tap dteoh/sqa</span><br><span class="line">brew install --cask slowquitapps</span><br><span class="line">brew install zsh</span><br><span class="line">brew install wget</span><br><span class="line">brew install git</span><br><span class="line"></span><br><span class="line"><span class="comment"># default install is python3 now, if you need python2 just run `brew install python2`</span></span><br><span class="line">https://www.python.org/downloads/</span><br><span class="line">https://github.com/pyenv/pyenv</span><br><span class="line"></span><br><span class="line">brew install pyenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改~/.zshrc 解决环境变量问题</span></span><br><span class="line">vim ~/.zshrc</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">command</span> -v pyenv 1&gt;/dev/null 2&gt;&amp;1; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init --path)</span>"</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">pyenv install 3.9.7</span><br><span class="line">pyenv global 3.9.7</span><br></pre></td></tr></table></figure><h3 id="iTerm2-zsh-Oh-My-Zsh"><a href="#iTerm2-zsh-Oh-My-Zsh" class="headerlink" title="iTerm2 + zsh + Oh My Zsh"></a>iTerm2 + zsh + Oh My Zsh</h3><p>iTerm2<br><a href="https://www.iterm2.com/" target="_blank" rel="noopener">https://www.iterm2.com/</a></p><p>Oh My Zsh<br><a href="http://ohmyz.sh/" target="_blank" rel="noopener">http://ohmyz.sh/</a></p><p>从 macOS Catalina 版开始，您的 Mac 将使用 zsh 作为默认登录 Shell 和交互式 Shell<br><a href="https://support.apple.com/zh-cn/HT208050" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT208050</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install latest zsh</span></span><br><span class="line">brew install zsh </span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 powerline 字体，用于解决字符显示问题</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/powerline/fonts.git</span><br><span class="line"><span class="built_in">cd</span> fonts</span><br><span class="line">./install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改默认 shell，在 /etc/shells 文件中加入如下一行</span></span><br><span class="line">vi /etc/shells</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/zsh</span><br><span class="line"><span class="comment"># 然后运行命令切换 shell</span></span><br><span class="line">chsh -s /usr/<span class="built_in">local</span>/bin/zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># install oh-my-zsh</span></span><br><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># install zsh plugins</span></span><br><span class="line"><span class="built_in">cd</span> ~/.oh-my-zsh/custom/plugins</span><br><span class="line">git <span class="built_in">clone</span> git://github.com/zsh-users/zsh-syntax-highlighting.git</span><br><span class="line">git <span class="built_in">clone</span> git://github.com/zsh-users/zsh-autosuggestions.git</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改主题为 agnoster，增加一行 zsh-syntax-highlighting</span></span><br><span class="line">vi ~/.zshrc</span><br><span class="line"></span><br><span class="line">ZSH_THEME=<span class="string">"agnoster"</span></span><br><span class="line"><span class="comment"># see https://github.com/ohmyzsh/ohmyzsh/wiki/Themes#agnoster</span></span><br><span class="line"></span><br><span class="line">plugins=(</span><br><span class="line">  git</span><br><span class="line">  zsh-autosuggestions</span><br><span class="line">  zsh-syntax-highlighting</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新 zsh 环境变量使插件生效</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果想尝试更酷炫的主题可以试试 powerlevel10k</span></span><br><span class="line">https://github.com/romkatv/powerlevel10k</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改 history 显示时间戳格式</span></span><br><span class="line">HIST_STAMPS=<span class="string">"yyyy-mm-dd"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决 Too many files open error</span></span><br><span class="line"><span class="built_in">ulimit</span> -n 10000</span><br><span class="line"><span class="built_in">ulimit</span> -u 2048</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用 brew install 前自动检查更新</span></span><br><span class="line"><span class="built_in">export</span> HOMEBREW_NO_AUTO_UPDATE=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可选增加 visual studio code 命令行 code 支持 zsh(新版本 vscode 已经自带支持)</span></span><br><span class="line"><span class="keyword">function</span> code &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$#</span> = 0 ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        open -a <span class="string">"Visual Studio Code"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">local</span> argPath=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">        [[ <span class="variable">$1</span> = /* ]] &amp;&amp; argPath=<span class="string">"<span class="variable">$1</span>"</span> || argPath=<span class="string">"<span class="variable">$PWD</span>/<span class="variable">$&#123;1#./&#125;</span>"</span></span><br><span class="line">        open -a <span class="string">"Visual Studio Code"</span> <span class="string">"<span class="variable">$argPath</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果中文乱码问题，打开 zshrc 文件，最后加上内容：</span></span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8  </span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure><blockquote><p>配置 iTerm2 主题，主题可以从 iterm2colorschemes 下载</p></blockquote><p><a href="https://iterm2colorschemes.com/" target="_blank" rel="noopener">https://iterm2colorschemes.com/</a></p><ol><li>Download iTerm2 color you like</li><li>Open iTerm2 that we already downloaded at the first section</li><li>Go to iTerm2 &gt; Preferences &gt; Profiles &gt; Colors Tab</li><li>Click Color Presets at the bottom right</li><li>Click Import</li><li>Select the *.itermcolors file</li><li>Select the * from Load Presets</li></ol><p>在 Keys -&gt; Hotkey 中设置 <code>command + i</code> 快速显示和隐藏 iTerm<br>在 Profiles -&gt; Default -&gt; Colors -&gt; Load Presets 导入主题，作为默认颜色，我的主题是 <code>3024 Night</code><br>在 Profiles -&gt; Text -&gt; Change Font 调整字体 / 大小 / 颜色等，我的字体是 <code>18pt Ubuntu Mono derivative Powerline</code></p><p>如果 VScode 打开终端 iterm2 乱码可以打开设置搜索 font 修改为以下参数即可解决<br>Editor: Font Family<br>Meslo LG M for Powerline,Menlo, Monaco, ‘Courier New’, monospace</p><blockquote><p>macOS vi/vim 语法高亮的设置方法</p></blockquote><p>打开 terminal 复制 /usr/share/vim/vimrc 到家目录下并重命名为 “.vimrc”, 然后编辑该文件，增加以下几行：</p><p>VimConfig - <a href="https://vimconfig.com/" target="_blank" rel="noopener">https://vimconfig.com/</a><br>My .vimrc - <a href="https://chrisyeh96.github.io/2017/12/18/vimrc.html" target="_blank" rel="noopener">https://chrisyeh96.github.io/2017/12/18/vimrc.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/vim/vimrc ~/.vimrc</span><br><span class="line"></span><br><span class="line">vim ~/.vimrc</span><br><span class="line"><span class="built_in">set</span> ai                  <span class="string">"auto indenting</span></span><br><span class="line"><span class="string">set ruler"</span> show the cursor position</span><br><span class="line"><span class="built_in">set</span> hlsearch            <span class="string">"highlight the last searched term</span></span><br><span class="line"><span class="string">set history=1000"</span> keep 1000 lines of <span class="built_in">history</span></span><br><span class="line">syntax on               <span class="string">"syntax highlighting</span></span><br><span class="line"><span class="string">filetype plugin on"</span> use the file <span class="built_in">type</span> plugins</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存后 macos 使用 vi 或者 vim 都可以看到效果</span></span><br></pre></td></tr></table></figure><h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><h3 id="iTerm2-常见问题"><a href="#iTerm2-常见问题" class="headerlink" title="iTerm2 常见问题"></a>iTerm2 常见问题</h3><ol><li>iTerm2 默认使用 dash 改用 zsh 解决方法：<code>chsh -s /bin/zsh</code></li><li>iTerm2 zsh 切换回原来的 bash：<code>chsh -s /bin/bash</code></li><li>卸载 <code>oh my zsh</code>，在命令行输入：<code>uninstall_oh_my_zsh</code></li><li>路径前缀的 XX@XX 太长，缩短问题：</li></ol><p>修改 vim ~/.zshrc 文件, 在文件底部增加 <code>prompt_context</code> 字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line"></span><br><span class="line"># 什么都不保留</span><br><span class="line">prompt_context() &#123;&#125;</span><br><span class="line"></span><br><span class="line"># 只保留用户名，隐藏主机名</span><br><span class="line">prompt_context() &#123;</span><br><span class="line">  if [[ &quot;$USER&quot; != &quot;$DEFAULT_USER&quot; || -n &quot;$SSH_CLIENT&quot; ]]; then</span><br><span class="line">    prompt_segment black default &quot;%(!.%&#123;%F&#123;yellow&#125;%&#125;.)$USER&quot;</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 只保留主机名，隐藏用户名</span><br><span class="line">prompt_context() &#123;</span><br><span class="line">  if [[ &quot;$USER&quot; != &quot;$DEFAULT_USER&quot; || -n &quot;$SSH_CLIENT&quot; ]]; then</span><br><span class="line">    prompt_segment black default &quot;%(!.%&#123;%F&#123;yellow&#125;%&#125;.)$HOST&quot;</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 提示 command not found: prompt_segment 的话说明主题没有 prompt_segment 这个命令，得删除。</span><br></pre></td></tr></table></figure><h3 id="Macbook-Pro-16-寸唤醒颜色失真问题"><a href="#Macbook-Pro-16-寸唤醒颜色失真问题" class="headerlink" title="Macbook Pro 16 寸唤醒颜色失真问题"></a>Macbook Pro 16 寸唤醒颜色失真问题</h3><p><a href="https://discussionschinese.apple.com/thread/250939091" target="_blank" rel="noopener">https://discussionschinese.apple.com/thread/250939091</a></p><ol><li>官网购买的 16 寸开启原彩显示，自动亮度，夜览，屏幕保护程序后，笔记本睡眠唤醒屏幕颜色完全失真。</li><li>将官网的退回后，第三方店铺购买故障依旧。</li></ol><p>这篇文章中提到的问题我个人认为是软件和硬度温度升高综合引起的，我也确实遇到了，不能算是硬件故障选择去苹果店维修或者更换也无法彻底解决<br>我自己的做法是选择调整 Displays 设置，如果想复现问题关闭再打开 True Tone 就可以看到效果，应该还是软件问题</p><ul><li>关闭 Automatically adjust brightness</li><li>打开 True Tone</li></ul><h3 id="升级-macOS-Mojave-新版卡顿黑屏和字体发虚解决方案"><a href="#升级-macOS-Mojave-新版卡顿黑屏和字体发虚解决方案" class="headerlink" title="升级 macOS Mojave 新版卡顿黑屏和字体发虚解决方案"></a>升级 macOS Mojave 新版卡顿黑屏和字体发虚解决方案</h3><blockquote><p>输入文字卡顿</p></blockquote><p>如果你的 Mac 已经更新至 macOS Mojave，在输入文字时经常卡顿，频繁出现小风车，那很有可能是搜狗输入法造成的，只需将它升级至最新的 4.8.0 版本，即可完美解决。</p><blockquote><p>字体发虚</p></blockquote><p>升级 macOS Mojave 新系统后，苹果默认关闭了子像素抗锯齿，导致字体变细锯齿增多。<br>解决字体渲染过细，打开终端，输入：</p><pre><code>defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO</code></pre><p>重启应用比如 VS Code 后即可看到效果</p><blockquote><p>开启 HiDPI</p></blockquote><p>如果外接显示器字体模糊，可以使用 Scale Resolutions<br>Display Override PropertyList File Parser and Generator with HiDPI support</p><p><a href="https://comsysto.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/" target="_blank" rel="noopener">https://comsysto.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/</a></p><p>Enable HiDPI on OS X - <a href="https://github.com/syscl/Enable-HiDPI-OSX" target="_blank" rel="noopener">https://github.com/syscl/Enable-HiDPI-OSX</a></p><blockquote><p>解决唤醒时黑屏只看见鼠标的问题</p></blockquote><p>先关机，然后开机快速同时点击 Command + S 按键进入 single-user 单用户模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/sbin/fsck -fy</span><br><span class="line">/sbin/mount -uw /</span><br><span class="line">rm -f /Library/Preferences/com.apple.loginwindow.plist</span><br><span class="line">rm -f /var/db/.AppleUpgrade</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h3 id="解决-Command-Q-经常误按"><a href="#解决-Command-Q-经常误按" class="headerlink" title="解决 Command+Q 经常误按"></a>解决 Command+Q 经常误按</h3><p>Slow Quit Apps</p><p>A macOS app that adds a global delay of 1 second to the Cmd-Q shortcut. In other words, you have to hold down Cmd-Q for 1 second before an application will quit.</p><p>When the delay is active, an overlay is drawn at the center of the screen.</p><p><a href="https://github.com/dteoh/SlowQuitApps" target="_blank" rel="noopener">https://github.com/dteoh/SlowQuitApps</a></p><p>brew tap dteoh/sqa<br>brew install –cask slowquitapps</p><p>运行程序按照提示授权后重启应用并设置开机自启动即可享受 1s 延迟关闭提醒，如果觉得时间不够长可以自己设定</p><h3 id="提示应用程序被破坏无法打开"><a href="#提示应用程序被破坏无法打开" class="headerlink" title="提示应用程序被破坏无法打开"></a>提示应用程序被破坏无法打开</h3><blockquote><p>SOLVED: “Application” is damaged and can’t be opened in macOS Sierra</p></blockquote><pre><code>sudo spctl --master-disable</code></pre><p>输入密码重新打开 System Preferences &gt; Security &amp; Privacy &gt; General 即可看到之前隐藏的“Anywhere”<br><a href="https://www.santoshsrinivas.com/disable-gatekeeper-in-macos-sierra/" target="_blank" rel="noopener">https://www.santoshsrinivas.com/disable-gatekeeper-in-macos-sierra/</a></p><blockquote><p>macOS High Seirra 提示 “已损坏，打不开，您应该将它移至垃圾篓”</p></blockquote><p>这是因为在系统偏好设置的 “安全性与隐私” 里面的 “允许从以下位置下载的应用” 没有选中“任何来源”，解决方法如下：</p><ol><li>打开终端，然后输入以下命令：sudo spctl –master-disable</li><li>然后回车，输入系统密码并回车（这里输入密码不会显示，输完密码直接回车即可），如果没有提示即操作成功。</li><li>打开系统偏好设置的 “安全性与隐私”，查看“允许从以下位置下载的应用” 是否选中的是“任何来源”，如果选中说明操作成功。这时再打开软件安装就没有已损坏的提示的了。</li></ol><h3 id="macOS-开启关闭-SIP"><a href="#macOS-开启关闭-SIP" class="headerlink" title="macOS 开启关闭 SIP"></a>macOS 开启关闭 SIP</h3><p>S1. 查看 SIP 状态<br>在终端中输入 csrutil status，就可以看到是 enabled 还是 disabled。</p><p>S2. 关闭 SIP</p><ol><li>重启 MAC，按住 cmd+R 直到屏幕上出现苹果的标志和进度条，进入 Recovery 模式；</li><li>在屏幕最上方的工具栏找到实用工具（左数第 3 个），打开终端，输入：csrutil disable；</li><li>关掉终端，重启 mac；</li><li>重启以后可以在终端中查看状态确认。</li></ol><p>S3. 开启 SIP<br>与关闭的步骤类似，只是在 S2 中输入 csrutil enable 即可。</p><h3 id="更改-Apple-ID-国家或地区"><a href="#更改-Apple-ID-国家或地区" class="headerlink" title="更改 Apple ID 国家或地区"></a>更改 Apple ID 国家或地区</h3><blockquote><p>区域在国内即使身在国外也看不到你需要的很多东东，建议修改</p></blockquote><p><a href="https://support.apple.com/zh-cn/ht201389" target="_blank" rel="noopener">https://support.apple.com/zh-cn/ht201389</a></p><h3 id="USB-Type-C-耳机"><a href="#USB-Type-C-耳机" class="headerlink" title="USB Type-C 耳机"></a>USB Type-C 耳机</h3><ol><li>插入耳机至任意 USB Type-C 接口</li><li>System Preferences -&gt; Sound -&gt; Output -&gt; 选择识别到的耳机设备即可</li></ol><h3 id="Macbook-外置键盘如何更改设置"><a href="#Macbook-外置键盘如何更改设置" class="headerlink" title="Macbook 外置键盘如何更改设置"></a>Macbook 外置键盘如何更改设置</h3><p>option 改成 command（win 版键盘下的四个方块图标按键）<br>command 改成 option</p><p><a href="https://jingyan.baidu.com/article/363872ec2185346e4aa16f61.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/363872ec2185346e4aa16f61.html</a></p><h3 id="配置从命令提示行启动-vscode"><a href="#配置从命令提示行启动-vscode" class="headerlink" title="配置从命令提示行启动 vscode"></a>配置从命令提示行启动 vscode</h3><p>安装 Visual Studio Code，打开命令面板（按 F1 或 command + shift + p）输入 Shell 命令找到 Shell 命令: 在 PATH 中安装 “code” 命令。命令执行完成之后，重启终端工具使新的 $PATH 可用。现在，您可以简单地在终端中任意文件夹下输入‘code .’来编辑该文件夹下的文件了。</p><h3 id="Git-Ignore"><a href="#Git-Ignore" class="headerlink" title="Git Ignore"></a>Git Ignore</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个新文件 ~/.gitignore ，并将以下内容添加进去，这样全部 git 仓库将会忽略以下内容所提及的文件。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Folder view configuration files</span></span><br><span class="line">.DS_Store</span><br><span class="line">Desktop.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># Thumbnail cache files</span></span><br><span class="line">._*</span><br><span class="line">Thumbs.db</span><br><span class="line"></span><br><span class="line"><span class="comment"># Files that might appear on external disks</span></span><br><span class="line">.Spotlight-V100</span><br><span class="line">.Trashes</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compiled Python files</span></span><br><span class="line">*.pyc</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compiled C++ files</span></span><br><span class="line">*.out</span><br><span class="line"></span><br><span class="line"><span class="comment"># Application specific files</span></span><br><span class="line">venv</span><br><span class="line">node_modules</span><br><span class="line">.sass-cache</span><br><span class="line"></span><br><span class="line"><span class="comment"># Temp File</span></span><br><span class="line">*.swp</span><br><span class="line">*.swa</span><br><span class="line">*.swo</span><br><span class="line"></span><br><span class="line"><span class="comment"># github merge file</span></span><br><span class="line">*.orig</span><br><span class="line"></span><br><span class="line"><span class="comment">#vscode </span></span><br><span class="line">.vscode</span><br></pre></td></tr></table></figure><h3 id="禁止-DS-store-生成"><a href="#禁止-DS-store-生成" class="headerlink" title="禁止. DS_store 生成"></a>禁止. DS_store 生成</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 禁止 .DS_store 生成，打开“终端”，复制黏贴下面的命令，回车执行，重启 Mac 即可生效。</span></span><br><span class="line">defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE</span><br><span class="line"><span class="comment"># 恢复 .DS_store 生成</span></span><br><span class="line">defaults delete com.apple.desktopservices DSDontWriteNetworkStores</span><br><span class="line"><span class="comment"># 刪除已存在的. DS_Store</span></span><br><span class="line">sudo find . -name <span class="string">".DS_Store"</span> -depth -<span class="built_in">exec</span> rm &#123;&#125; \;</span><br></pre></td></tr></table></figure><h3 id="ssh-相关"><a href="#ssh-相关" class="headerlink" title="ssh 相关"></a>ssh 相关</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory</span></span><br><span class="line"><span class="comment"># 禁止 OpenSSH 客户端从 OS X/Linux/Unix 桌面发送 LC_* 变量</span></span><br><span class="line">vi /etc/ssh/ssh_config</span><br><span class="line"><span class="comment">#SendEnv LANG LC_*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># port forwarding</span></span><br><span class="line">ssh -p 22202 wangao@127.0.0.1</span><br><span class="line">ssh -p 22202 wangao@127.0.0.1 -X</span><br><span class="line">scp -P 22202 -r sysctl.sh sysctl.d/ wangao@127.0.0.1:/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># ssh tunnel for one-time</span></span><br><span class="line">ssh -t -A wangao@xx.xx.xx.xx ssh wangao@10.65.32.60</span><br><span class="line"></span><br><span class="line"><span class="comment"># config ssh tunnel to make easy connect everyday</span></span><br><span class="line">vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">CheckHostIP no</span><br><span class="line"></span><br><span class="line">Host 10.71.12.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host 10.71.13.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host 10.71.14.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host 10.71.15.*</span><br><span class="line">  HostName %h</span><br><span class="line">  ProxyCommand ssh bastion_GOP_SG_NC_MAIN -W %h:%p</span><br><span class="line"></span><br><span class="line">Host bastion_GOP_SG_NC_MAIN</span><br><span class="line">  HostName 8.8.8.8</span><br><span class="line">  port 22</span><br><span class="line">  User wangao</span><br></pre></td></tr></table></figure><h3 id="删除-MDM"><a href="#删除-MDM" class="headerlink" title="删除 MDM"></a>删除 MDM</h3><p>移动设备管理 MDM（Mobile Device Management），主要针对 macOS 或者 iOS 的企业其中化管理，有点类似 Windows 域控概念，有时候多种策略共存甚至有加密保护防止删除，遇到冲突影响办公的时候就得想办法解决问题，最简单的方法还是直接移除无效的 MDM。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 查询当前 MDM 配置</span><br><span class="line">sudo profiles -Lv | grep &quot;name: $4&quot; -4 | grep -E &apos;name|profileIdentifier&apos; | awk -F &apos;: &apos; &apos;BEGIN &#123;key = &quot;&quot;&#125; &#123; if (NR%2==1)&#123;key=$3&#125;else&#123;print key&quot;===&quot;$3&#125;&#125;&apos; | grep MDMConfig</span><br><span class="line">Password:</span><br><span class="line">MDMConfig===xxx</span><br><span class="line"></span><br><span class="line"># 删除指定 MDM 配置</span><br><span class="line">sudo profiles remove -forced -identifier=xxx</span><br></pre></td></tr></table></figure><hr><p>题图 - 苹果 2015 新春广告<a href="http://www.apple.com/cn/start-something-new/#film-holiday" target="_blank" rel="noopener">《老唱片》</a></p>]]></content>
    
    <summary type="html">
    
      MacBook macOS 从小白到入门
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>中文文案排版指北</title>
    <link href="https://wsgzao.github.io/post/chinese-copywriting-guidelines/"/>
    <id>https://wsgzao.github.io/post/chinese-copywriting-guidelines/</id>
    <published>2021-11-22T07:31:24.000Z</published>
    <updated>2021-11-23T03:07:56.189Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p><hr><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 11 月 22 日 - 更新至最新版本 Release v1.0.0<br>2019 年 03 月 06 日 - 更新至最新版本<br>2018 年 04 月 01 日 - 更新至最新版本<br>2016 年 05 月 09 日 - 更新至 release v0.0.9<br>2015 年 10 月 24 日 - 更新官方翻译的简体中文<br>2015 年 07 月 11 日 - 转载初稿，转化为简体中文</p><p>本文链接 - <a href="https://wsgzao.github.io/post/chinese-copywriting-guidelines/">https://wsgzao.github.io/post/chinese-copywriting-guidelines/</a></p><p><strong> 原文出处 </strong></p><p>Chinese Copywriting Guidelines：中文文案排版指北 - <a href="https://github.com/sparanoid/chinese-copywriting-guidelines" target="_blank" rel="noopener">https://github.com/sparanoid/chinese-copywriting-guidelines</a><br>Chinese Copywriting Guidelines：中文文案排版指北（简体中文版） - <a href="https://github.com/sparanoid/chinese-copywriting-guidelines/blob/master/README.zh-Hans.md" target="_blank" rel="noopener">https://github.com/sparanoid/chinese-copywriting-guidelines/blob/master/README.zh-Hans.md</a></p><hr><h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><blockquote><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p><p>与大家共勉之。」——<a href="https://github.com/vinta/pangu.js" target="_blank" rel="noopener">vinta/paranoid-auto-spacing</a></p></blockquote><h3 id="中英文之间需要增加空格"><a href="#中英文之间需要增加空格" class="headerlink" title="中英文之间需要增加空格"></a>中英文之间需要增加空格</h3><p>正确：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p></blockquote><p>错误：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p></blockquote><p>完整的正确用法：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p></blockquote><p>例外：「豆瓣 FM」等产品名词，按照官方所定义的格式书写。</p><h3 id="中文与数字之间需要增加空格"><a href="#中文与数字之间需要增加空格" class="headerlink" title="中文与数字之间需要增加空格"></a>中文与数字之间需要增加空格</h3><p>正确：</p><blockquote><p>今天出去买菜花了 5000 元。</p></blockquote><p>错误：</p><blockquote><p>今天出去买菜花了 5000 元。</p><p>今天出去买菜花了 5000 元。</p></blockquote><h3 id="数字与单位之间需要增加空格"><a href="#数字与单位之间需要增加空格" class="headerlink" title="数字与单位之间需要增加空格"></a>数字与单位之间需要增加空格</h3><p>正确：</p><blockquote><p>我家的光纤入屋宽带有 10 Gbps，SSD 一共有 20 TB</p></blockquote><p>错误：</p><blockquote><p>我家的光纤入屋宽带有 10Gbps，SSD 一共有 20TB</p></blockquote><p>例外：度 / 百分比与数字之间不需要增加空格：</p><p>正确：</p><blockquote><p>今天是 233° 的高温。</p><p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p></blockquote><p>错误：</p><blockquote><p>今天是 233 ° 的高温。</p><p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p></blockquote><h3 id="全角标点与其他字符之间不加空格"><a href="#全角标点与其他字符之间不加空格" class="headerlink" title="全角标点与其他字符之间不加空格"></a>全角标点与其他字符之间不加空格</h3><p>正确：</p><blockquote><p>刚刚买了一部 iPhone，好开心！</p></blockquote><p>错误：</p><blockquote><p>刚刚买了一部 iPhone ，好开心！</p><p>刚刚买了一部 iPhone， 好开心！</p></blockquote><h3 id="用-text-spacing-来挽救？"><a href="#用-text-spacing-来挽救？" class="headerlink" title="用 text-spacing 来挽救？"></a>用 <code>text-spacing</code> 来挽救？</h3><p>CSS Text Module Level 4 的 <a href="https://www.w3.org/TR/css-text-4/#text-spacing-property" target="_blank" rel="noopener"><code>text-spacing</code></a> 和 Microsoft 的 <a href="https://msdn.microsoft.com/library/ms531164(v=vs.85" target="_blank" rel="noopener"><code>-ms-text-autospace</code></a>.aspx) 可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 macOS、iOS、Windows 等用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p><h2 id="标点符号"><a href="#标点符号" class="headerlink" title="标点符号"></a>标点符号</h2><h3 id="不重复使用标点符号"><a href="#不重复使用标点符号" class="headerlink" title="不重复使用标点符号"></a>不重复使用标点符号</h3><p>正确：</p><blockquote><p>德国队竟然战胜了巴西队！</p><p>她竟然对你说「喵」？！</p></blockquote><p>错误：</p><blockquote><p>德国队竟然战胜了巴西队！！</p><p>德国队竟然战胜了巴西队！！！！！！！！</p><p>她竟然对你说「喵」？？！！</p><p>她竟然对你说「喵」？！？！？？！！</p></blockquote><h2 id="全角和半角"><a href="#全角和半角" class="headerlink" title="全角和半角"></a>全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科条目『<a href="https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2" target="_blank" rel="noopener">全角和半角</a>』。</p><h3 id="使用全角中文标点"><a href="#使用全角中文标点" class="headerlink" title="使用全角中文标点"></a>使用全角中文标点</h3><p>正确：</p><blockquote><p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p><p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p></blockquote><p>错误：</p><blockquote><p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎！</p><p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎！</p><p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p><p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p></blockquote><h3 id="数字使用半角字符"><a href="#数字使用半角字符" class="headerlink" title="数字使用半角字符"></a>数字使用半角字符</h3><p>正确：</p><blockquote><p>这个蛋糕只卖 1000 元。</p></blockquote><p>错误：</p><blockquote><p>这个蛋糕只卖 １０００ 元。</p></blockquote><p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p><h3 id="遇到完整的英文整句、特殊名词，其内容使用半角标点"><a href="#遇到完整的英文整句、特殊名词，其内容使用半角标点" class="headerlink" title="遇到完整的英文整句、特殊名词，其内容使用半角标点"></a>遇到完整的英文整句、特殊名词，其内容使用半角标点</h3><p>正确：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p><p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><p>错误：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p><p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><h3 id="专有名词使用正确的大小写"><a href="#专有名词使用正确的大小写" class="headerlink" title="专有名词使用正确的大小写"></a>专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论内容，在这里只对部分易错用法进行简述。</p><p>正确：</p><blockquote><p>使用 GitHub 登录</p><p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p></blockquote><p>错误：</p><blockquote><p>使用 github 登录</p><p>使用 GITHUB 登录</p><p>使用 Github 登录</p><p>使用 gitHub 登录</p><p>使用 gｲんĤЦ8 登录</p><p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p><p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p><p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p><p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p><p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p></blockquote><p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标淮的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p><h3 id="不要使用不地道的缩写"><a href="#不要使用不地道的缩写" class="headerlink" title="不要使用不地道的缩写"></a>不要使用不地道的缩写</h3><p>正确：</p><blockquote><p>我们需要一位熟悉 TypeScript、HTML5，至少理解一种框架（如 React、Next.js）的前端开发者。</p></blockquote><p>错误：</p><blockquote><p>我们需要一位熟悉 Ts、h5，至少理解一种框架（如 RJS、nextjs）的 FED。</p></blockquote><h2 id="争议"><a href="#争议" class="headerlink" title="争议"></a>争议</h2><p>以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是 <strong> 正确 </strong> 的。</p><h3 id="链接之间增加空格"><a href="#链接之间增加空格" class="headerlink" title="链接之间增加空格"></a>链接之间增加空格</h3><p>用法：</p><blockquote><p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p><p>访问我们网站的最新动态，请 <a href="#">点击这里</a> 进行订阅！</p></blockquote><p>对比用法：</p><blockquote><p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p><p>访问我们网站的最新动态，请 <a href="#">点击这里</a> 进行订阅！</p></blockquote><h3 id="简体中文使用直角引号"><a href="#简体中文使用直角引号" class="headerlink" title="简体中文使用直角引号"></a>简体中文使用直角引号</h3><p>用法：</p><blockquote><p>「老师，『有条不紊』的『紊』是什么意思？」</p></blockquote><p>对比用法：</p><blockquote><p>“老师，‘有条不紊’的‘紊’是什么意思？”</p></blockquote><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><table><thead><tr><th>仓库</th><th>语言</th></tr></thead><tbody><tr><td><a href="https://github.com/vinta/paranoid-auto-spacing" target="_blank" rel="noopener">vinta/paranoid-auto-spacing</a></td><td>JavaScript</td></tr><tr><td><a href="https://github.com/huei90/pangu.node" target="_blank" rel="noopener">huei90/pangu.node</a></td><td>Node.js</td></tr><tr><td><a href="https://github.com/huacnlee/auto-correct" target="_blank" rel="noopener">huacnlee/auto-correct</a></td><td>Ruby</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect" target="_blank" rel="noopener">huacnlee/autocorrect</a></td><td>Rust, WASM, CLI</td></tr><tr><td><a href="https://github.com/huacnlee/go-auto-correct" target="_blank" rel="noopener">huacnlee/go-auto-correct</a></td><td>Go</td></tr><tr><td><a href="https://github.com/sparanoid/space-lover" target="_blank" rel="noopener">sparanoid/space-lover</a></td><td>PHP (WordPress)</td></tr><tr><td><a href="https://github.com/NauxLiu/auto-correct" target="_blank" rel="noopener">nauxliu/auto-correct</a></td><td>PHP</td></tr><tr><td><a href="https://github.com/jxlwqq/chinese-typesetting" target="_blank" rel="noopener">jxlwqq/chinese-typesetting</a></td><td>PHP</td></tr><tr><td><a href="https://github.com/hotoo/pangu.vim" target="_blank" rel="noopener">hotoo/pangu.vim</a></td><td>Vim</td></tr><tr><td><a href="https://github.com/sparanoid/grunt-auto-spacing" target="_blank" rel="noopener">sparanoid/grunt-auto-spacing</a></td><td>Node.js (Grunt)</td></tr><tr><td><a href="https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk" target="_blank" rel="noopener">hjiang/scripts/add-space-between-latin-and-cjk</a></td><td>Python</td></tr><tr><td><a href="https://github.com/hustcc/hint" target="_blank" rel="noopener">hustcc/hint</a></td><td>Python</td></tr><tr><td><a href="https://github.com/studygolang/autocorrect" target="_blank" rel="noopener">studygolang/autocorrect</a></td><td>Go</td></tr><tr><td><a href="https://github.com/n0vad3v/Tekorrect" target="_blank" rel="noopener">n0vad3v/Tekorret</a></td><td>Python</td></tr><tr><td><a href="https://marketplace.visualstudio.com/items?itemName=huacnlee.auto-correct" target="_blank" rel="noopener">VS Code - huacnlee.auto-correct</a></td><td>VS Code Extension</td></tr></tbody></table><h2 id="谁在这样做？"><a href="#谁在这样做？" class="headerlink" title="谁在这样做？"></a>谁在这样做？</h2><table><thead><tr><th>网站</th><th>文案</th><th>UGC</th></tr></thead><tbody><tr><td><a href="https://www.apple.com/cn/" target="_blank" rel="noopener">Apple 中国</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.apple.com/hk/" target="_blank" rel="noopener">Apple 香港</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.apple.com/tw/" target="_blank" rel="noopener">Apple 台湾</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.microsoft.com/zh-cn/" target="_blank" rel="noopener">Microsoft 中国</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.microsoft.com/zh-hk/" target="_blank" rel="noopener">Microsoft 香港</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.microsoft.com/zh-tw/" target="_blank" rel="noopener">Microsoft 台湾</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://leancloud.cn/" target="_blank" rel="noopener">LeanCloud</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.v2ex.com/" target="_blank" rel="noopener">V2EX</a></td><td>是</td><td>是</td></tr><tr><td><a href="https://apple4us.com/" target="_blank" rel="noopener">Apple4us</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://ruby-china.org/" target="_blank" rel="noopener">Ruby China</a></td><td>是</td><td>是</td></tr><tr><td><a href="https://phphub.org/" target="_blank" rel="noopener">PHPHub</a></td><td>是</td><td>标题达成</td></tr><tr><td><a href="https://sspai.com/" target="_blank" rel="noopener">少数派</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://leetcode-cn.com/" target="_blank" rel="noopener">力扣 LeetCode</a></td><td>是</td><td>是</td></tr></tbody></table><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul><li><a href="https://www.thoughtco.com/guidelines-for-using-capital-letters-1691724" target="_blank" rel="noopener">Guidelines for Using Capital Letters - ThoughtCo.</a></li><li><a href="https://en.wikipedia.org/wiki/Letter_case" target="_blank" rel="noopener">Letter case - Wikipedia</a></li><li><a href="https://en.oxforddictionaries.com/grammar/punctuation" target="_blank" rel="noopener">Punctuation - Oxford Dictionaries</a></li><li><a href="https://owl.english.purdue.edu/owl/section/1/6/" target="_blank" rel="noopener">Punctuation - The Purdue OWL</a></li><li><a href="https://www.wikihow.com/Use-English-Punctuation-Correctly" target="_blank" rel="noopener">How to Use English Punctuation Correctly - wikiHow</a></li><li><a href="https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F" target="_blank" rel="noopener">格式 - openSUSE</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2" target="_blank" rel="noopener">全形和半形 - 维基百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F" target="_blank" rel="noopener">引号 - 维基百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F" target="_blank" rel="noopener">疑问惊叹号 - 维基百科</a></li></ul>]]></content>
    
    <summary type="html">
    
      统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>macOS 使用 iterm2 启用 rz 与 sz 功能</title>
    <link href="https://wsgzao.github.io/post/lrzsz/"/>
    <id>https://wsgzao.github.io/post/lrzsz/</id>
    <published>2021-11-18T02:59:49.000Z</published>
    <updated>2021-11-18T15:59:53.294Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文主要介绍 macOS 环境下使用 iterm2 的 rz(上传)和 sz(下载)功能的安装流程，某些时候这些小命令可以方便的代替 scp 绕过安全限制执行简单的上传和下载任务，同理 SecureCRT 和 Xshell 也可以启用 rz 和 sz 功能。</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 11 月 18 日 - 完善 macOS lrzsz 安装配置<br>2020 年 11 月 02 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/lrzsz/">https://wsgzao.github.io/post/lrzsz/</a></p><hr><h2 id="lrzsz-简介"><a href="#lrzsz-简介" class="headerlink" title="lrzsz 简介"></a>lrzsz 简介</h2><blockquote><p>lrzsz: free x/y/zmodem implementation</p></blockquote><p><em>lrzsz</em> is a unix communication package providing the <a href="ftp://ftp.std.com/obi/Standards/FileTransfer/YMODEM8.DOC.1.Z" target="_blank" rel="noopener">XMODEM, YMODEM</a> <a href="http://www.easysw.com/~mike/serial/zmodem.html" target="_blank" rel="noopener">ZMODEM</a> file transfer protocols. lrzsz is a heavily rehacked version of the last public domain release of <a href="http://www.omen.com/" target="_blank" rel="noopener">Omen Technologies</a> <em>rzsz</em> package, and is now <a href="http://www.gnu.ai.mit.edu/philosophy/free-sw.html" target="_blank" rel="noopener">free software</a> and released under the <a href="http://www.gnu.ai.mit.edu/copyleft/gpl.html" target="_blank" rel="noopener">GNU General Public Licence</a>.</p><blockquote><p>Features of lrzsz</p></blockquote><ul><li>very portable, automagically configured with GNU <em>autoconf</em>.</li><li>crash recovery.</li><li>up to 8KB block sizes (ZMODEM8K).</li><li>internationalized (using GNU <em>gettext</em>). German translation of the programs output exists.</li><li>far more secure than the original sources.</li><li>high performance. say `make vcheck-z’ and have a look at the BPS rate - i recently saw <em>1.4 MB per second</em> transfering a large file through pipes (on a I586/133 system. Beat that!).</li><li>good blocksize calculation (tries to compute an optimal blocksize based on the number of errors occured).</li><li>It’s <a href="http://www.gnu.org/philosophy/free-sw.html" target="_blank" rel="noopener">free software</a>.</li></ul><p><a href="https://www.ohse.de/uwe/software/lrzsz.html" target="_blank" rel="noopener">https://www.ohse.de/uwe/software/lrzsz.html</a></p><h2 id="lrzsz-原理"><a href="#lrzsz-原理" class="headerlink" title="lrzsz 原理"></a>lrzsz 原理</h2><p>下载文件<br>在服务器上执行 sz（Send by ZMODEM），先在终端上输出 <code>**B00000000000000</code>，然后客户端在终端发送指令，表示拒绝，还是接收（接收的话，就在客户端运行 rz 指令与服务端交互）</p><p>上传文件<br>在服务器上执行 rz（Receive by ZMODEM），先在终端上输出 <code>rz waiting to receive.**B0100000023be50</code>，然后客户端发送指令，表示取消，还是上传（上传的话，在客户端运行 sz 命令与服务端交互）。</p><p>可以看到在上述流程中，对 Terminal 的要求就是，遇到特殊指令，触发对应的操作（执行本地命令）</p><p>由于 macOS 自带的 Terminal.app 不支持这个，所以网上大部分教程都是使用 iTerm2</p><h2 id="安装-lrzsz"><a href="#安装-lrzsz" class="headerlink" title="安装 lrzsz"></a>安装 lrzsz</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install lrzsz</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/lrzsz-0.12.20_1.catalina.bottle.tar.gz</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring lrzsz-0.12.20_1.catalina.bottle.tar.gz</span><br><span class="line">🍺  /usr/local/Cellar/lrzsz/0.12.20_1: 18 files, 473.9KB</span><br></pre></td></tr></table></figure><ol><li>Install lrzsz on OSX: <code>brew install lrzsz</code></li><li>Save the <code>iterm2-send-zmodem.sh</code> and <code>iterm2-recv-zmodem.sh</code> scripts in <code>/usr/local/bin/</code></li><li>Set up Triggers in iTerm 2 like so:<br><a href="https://www.iterm2.com/documentation-triggers.html" target="_blank" rel="noopener">How to Create a Trigger</a></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Regular expression: rz waiting to receive.\*\*B0100</span><br><span class="line">Action: Run Silent Coprocess</span><br><span class="line">Parameters: /usr/local/bin/iterm2-send-zmodem.sh</span><br><span class="line">Instant: checked</span><br><span class="line"></span><br><span class="line">Regular expression: \*\*B00000000000000</span><br><span class="line">Action: Run Silent Coprocess</span><br><span class="line">Parameters: /usr/local/bin/iterm2-recv-zmodem.sh</span><br><span class="line">Instant: checked</span><br></pre></td></tr></table></figure><p>To send a file to a remote machine:</p><ol><li>Type <code>rz</code> on the remote machine</li><li>Select the file(s) on the local machine to send</li><li>Wait for the coprocess indicator to disappear</li></ol><p>The receive a file from a remote machine</p><ol><li>Type <code>sz filename1 filename2 … filenameN</code> on the remote machine</li><li>Select the folder to receive to on the local machine</li><li>Wait for the coprocess indicator to disappear</li></ol><h2 id="安装执行脚本"><a href="#安装执行脚本" class="headerlink" title="安装执行脚本"></a>安装执行脚本</h2><p>将 <code>iterm2-send-zmodem.sh</code> 和 <code>iterm2-recv-zmodem.sh</code> 保存到 <code>/usr/local/bin</code> 目录下。</p><p><a href="https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-send-zmodem.sh" target="_blank" rel="noopener">iterm2-send-zmodem.sh</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Author: Matt Mastracci (matthew@mastracci.com)</span></span><br><span class="line"><span class="comment"># AppleScript from http://stackoverflow.com/questions/4309087/cancel-button-on-osascript-in-a-bash-script</span></span><br><span class="line"><span class="comment"># licensed under cc-wiki with attribution required </span></span><br><span class="line"><span class="comment"># Remainder of script public domain</span></span><br><span class="line"></span><br><span class="line">osascript -e <span class="string">'tell application"iTerm2"to version'</span> &gt; /dev/null 2&gt;&amp;1 &amp;&amp; NAME=iTerm2 || NAME=iTerm</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$NAME</span> = <span class="string">"iTerm"</span> ]]; <span class="keyword">then</span></span><br><span class="line">FILE=$(osascript -e <span class="string">'tell application"iTerm"to activate'</span> -e <span class="string">'tell application"iTerm"to set thefile to choose file with prompt"Choose a file to send"'</span> -e <span class="string">"do shell script (\"echo \"&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\"\")"</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">FILE=$(osascript -e <span class="string">'tell application "iTerm2" to activate'</span> -e <span class="string">'tell application "iTerm2" to set thefile to choose file with prompt "Choose a file to send"'</span> -e <span class="string">"do shell script (\"echo \"&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\"\")"</span>)</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$FILE</span> = <span class="string">""</span> ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> Cancelled.</span><br><span class="line"><span class="comment"># Send ZModem cancel</span></span><br><span class="line"><span class="built_in">echo</span> -e \\x18\\x18\\x18\\x18\\x18</span><br><span class="line">sleep 1</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> \<span class="comment"># Cancelled transfer</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/sz <span class="string">"<span class="variable">$FILE</span>"</span> --escape --binary --bufsize 4096</span><br><span class="line">sleep 1</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> \<span class="comment"># Received"$FILE"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p><a href="https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-recv-zmodem.sh" target="_blank" rel="noopener">iterm2-recv-zmodem.sh</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Author: Matt Mastracci (matthew@mastracci.com)</span></span><br><span class="line"><span class="comment"># AppleScript from http://stackoverflow.com/questions/4309087/cancel-button-on-osascript-in-a-bash-script</span></span><br><span class="line"><span class="comment"># licensed under cc-wiki with attribution required </span></span><br><span class="line"><span class="comment"># Remainder of script public domain</span></span><br><span class="line"></span><br><span class="line">osascript -e <span class="string">'tell application"iTerm2"to version'</span> &gt; /dev/null 2&gt;&amp;1 &amp;&amp; NAME=iTerm2 || NAME=iTerm</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$NAME</span> = <span class="string">"iTerm"</span> ]]; <span class="keyword">then</span></span><br><span class="line">FILE=$(osascript -e <span class="string">'tell application"iTerm"to activate'</span> -e <span class="string">'tell application"iTerm"to set thefile to choose folder with prompt"Choose a folder to place received files in"'</span> -e <span class="string">"do shell script (\"echo \"&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\"\")"</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">FILE=$(osascript -e <span class="string">'tell application "iTerm2" to activate'</span> -e <span class="string">'tell application "iTerm2" to set thefile to choose folder with prompt "Choose a folder to place received files in"'</span> -e <span class="string">"do shell script (\"echo \"&amp;(quoted form of POSIX path of thefile as Unicode text)&amp;\"\")"</span>)</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$FILE</span> = <span class="string">""</span> ]]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> Cancelled.</span><br><span class="line"><span class="comment"># Send ZModem cancel</span></span><br><span class="line"><span class="built_in">echo</span> -e \\x18\\x18\\x18\\x18\\x18</span><br><span class="line">sleep 1</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> \<span class="comment"># Cancelled transfer</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$FILE</span>"</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/rz --rename --escape --binary --bufsize 4096 </span><br><span class="line">sleep 1</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> \<span class="comment"># Sent \-\&gt; $FILE</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 / usr/loal/bin 目录下创建两个文件</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/bin</span><br><span class="line">wget https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-recv-zmodem.sh</span><br><span class="line">wget https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-send-zmodem.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予这两个文件可执行权限</span></span><br><span class="line">chmod 777 /usr/<span class="built_in">local</span>/bin/iterm2-*</span><br></pre></td></tr></table></figure><h2 id="设置-Iterm2-的-Tirgger-特性"><a href="#设置-Iterm2-的-Tirgger-特性" class="headerlink" title="设置 Iterm2 的 Tirgger 特性"></a>设置 Iterm2 的 Tirgger 特性</h2><p>配置好配置文件之后，开始对 iTerm2 进行配置</p><p>点击 iTerm2 的设置界面 Perference-&gt; Profiles -&gt; Default -&gt; Advanced -&gt; Triggers 的 Edit 按钮，加入以下配置</p><p>添加两条 trigger，分别设置 Regular expression，Action，Parameters，Instant 如下：</p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20201102111035.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Regular expression: rz waiting to receive.\*\*B0100</span><br><span class="line">Action: Run Silent Coprocess</span><br><span class="line">Parameters: /usr/local/bin/iterm2-send-zmodem.sh</span><br><span class="line">Instant: checked</span><br><span class="line"></span><br><span class="line">Regular expression: \*\*B00000000000000</span><br><span class="line">Action: Run Silent Coprocess</span><br><span class="line">Parameters: /usr/local/bin/iterm2-recv-zmodem.sh</span><br><span class="line">Instant: checked</span><br></pre></td></tr></table></figure><h2 id="使用-rz-和-sz"><a href="#使用-rz-和-sz" class="headerlink" title="使用 rz 和 sz"></a>使用 rz 和 sz</h2><blockquote><p>前提是客户端也要安装 lrzsz</p></blockquote><ul><li>rz 上传功能<ul><li>在 bash 中，也就是 iTerm2 终端输入 rz 就会弹出文件选择框，选择文件 choose 就开始上传，会上传到当前目录</li><li>rz 中的 r 意为 received（接收），告诉客户端，我（服务器）要接收文件 received by cilent，就等同于客户端在上传。</li></ul></li><li>sz 下载功能<ul><li>sz fileName(你要下载的文件的名字) 回车，会弹出窗体 我们选择要保存的地方即可。</li><li>sz 中的 s 意为 send（发送），告诉客户端，我（服务器）要发送文件 send to cilent，就等同于客户端在下载。</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sz 用法：</span><br><span class="line"></span><br><span class="line">下载一个文件 </span><br><span class="line">sz filename </span><br><span class="line"></span><br><span class="line">下载多个文件</span><br><span class="line">sz filename1 filename2</span><br><span class="line"></span><br><span class="line">下载 dir 目录下的所有文件，不包含 dir 下的文件夹</span><br><span class="line">sz dir/*</span><br><span class="line"></span><br><span class="line">rz 用法：</span><br><span class="line"></span><br><span class="line">输入 rz 回车后，会出现文件选择对话框，选择需要上传文件，一次可以指定多个文件，上传到服务器的路径为当前执行 rz 命令的目录。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-b 以二进制方式，默认为文本方式。（Binary （tell it like it is） file transfer override.）</span><br><span class="line"></span><br><span class="line">-e 对所有控制字符转义。（Force sender to escape all control characters; normally XON， XOFF， DLE， CR-@-CR， and Ctrl-X are escaped.）</span><br><span class="line"></span><br><span class="line"> 果要保证上传的文件内容在服务器端保存之后与原始文件一致，最好同时设置这两个标志，如下所示方式使用：</span><br><span class="line"></span><br><span class="line">rz -be</span><br></pre></td></tr></table></figure><blockquote><p>备注说明</p></blockquote><ol><li>rz 与 sz 只适合小的文件传输，大文件还是使用 Filezilla 与 xftp 等工具进行传输；</li><li>只能传输文件，而不能传输文件夹；</li><li>不是所有工具都支持 rz 与 sz，必须支持 ZModem 协议才行，例如 putty 不能使用 rz 与 sz。</li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://robberphex.com/use-zmodem-at-macos/" target="_blank" rel="noopener">macOS 下使用 ZMODEM 协议上传 / 下载文件</a></p><p><a href="https://github.com/RobberPhex/iterm2-zmodem/" target="_blank" rel="noopener">ZModem integration for iTerm 2</a></p><p><a href="https://www.cnblogs.com/shoufeng/p/10575704.html" target="_blank" rel="noopener">通过 SecureCRT 的 rz、sz 和 sftp 实现文件的上传和下载</a></p>]]></content>
    
    <summary type="html">
    
      macOS使用iterm2启用rz与sz功能
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>使用 GitHub 和 Hexo 搭建免费静态 Blog</title>
    <link href="https://wsgzao.github.io/post/hexo/"/>
    <id>https://wsgzao.github.io/post/hexo/</id>
    <published>2021-10-17T09:40:07.000Z</published>
    <updated>2021-11-06T08:00:46.845Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/5bb7J7NT.png" alt></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>习惯自己写 Blog 的朋友一定不会陌生 Wordpress，或许也曾在新浪博客和 QQ 空间留过脚印，但静心认真思考一下，似乎我们又总是向往更加简单自由的写作方式。GitHub 给我们提供了一个无限的空间，我们需要珍惜使用，而 Hexo 的出现从某种意义上来说代替了 Jekyll，让我们可以更专注于写作本身。本文主要介绍自己的实践心得并不断完善内容，衍生知识和原理推荐大家认真阅读官网的手册，其它推荐参考内容链接在文中也会标注出来。</p><blockquote><p><a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html" target="_blank" rel="noopener">阮一峰 - 喜欢写 Blog 的人，会经历三个阶段</a></p></blockquote><p>第一阶段，刚接触 Blog，觉得很新鲜，试着选择一个免费空间来写。<br>第二阶段，发现免费空间限制太多，就自己购买域名和空间，搭建独立博客。<br>第三阶段，觉得独立博客的管理太麻烦，最好在保留控制权的前提下，让别人来管，自己只负责写文章。</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 10 月 17 日 - 更新 macOS Node.js 从 16/14 降级为 12 解决 hexo g 生成空文件问题<br>2020 年 09 月 06 日 - 更新 macOS 下部署 Hexo 5.0 步骤，重构文章内容<br>2015 年 11 月 18 日 - 推荐 iissnan 的主题，完善细节内容<br>2015 年 09 月 03 日 - 完善 Windows 10 安装 Hexo 中的细节<br>2015 年 03 月 22 日 - 更新 Windows 下 Hexo 3.0 安装和升级<br>2015 年 03 月 10 日 - 增加 Hexo 3.0 降级 2.8<br>2014 年 12 月 19 日 - 完善内容<br>2014 年 12 月 09 日 - 更新 Hexo 配置修改部分<br>2014 年 06 月 19 日 - 更新全部基础架构，待完善配置修改部分<br>2014 年 06 月 17 日 - 更新部分 Hexo 建站过程，待完善<br>2014 年 05 月 29 日 - 撰写初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/hexo/">https://wsgzao.github.io/post/hexo/</a></p><hr><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p><strong> 注意 </strong> 本文主要针对 <code>Windows</code> 平台和 <code>Hexo 5.x</code></p><h3 id="了解-Hexo"><a href="#了解-Hexo" class="headerlink" title="了解 Hexo"></a>了解 Hexo</h3><blockquote><p>A fast, simple &amp; powerful blog framework</p></blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。<br><a href="http://hexo.io/" target="_blank" rel="noopener">hexo.io</a></p><h3 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h3><p><a href="https://windows.github.com/" target="_blank" rel="noopener">GitHub Windows</a></p><p>简单可依赖，安装完成后依据提示操作即可，So Easy</p><h3 id="安装-Node-JS"><a href="#安装-Node-JS" class="headerlink" title="安装 Node.JS"></a>安装 Node.JS</h3><p><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.JS</a></p><p><strong> 注意 </strong> 安装完成后添加 Path 环境变量，使 <code>npm</code> 命令生效。新版已经会自动配置 Path</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;C:\Program Files\nodejs\node_modules\npm</span><br><span class="line"></span><br><span class="line"><span class="comment"># macOS</span></span><br><span class="line">brew install node@12</span><br><span class="line">brew link --overwrite node@12</span><br></pre></td></tr></table></figure><h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><p>配置好 <code>GitHub</code> 家目录后，双击桌面上的 <code>Git Shell</code>，输入 <code>npm</code> 命令即可安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果命令无法运行，可以尝试更换 taobao 的 npm 源</span></span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment"># macOS 首次安装 hexo-cli 会出现权限报错</span></span><br><span class="line">npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">npm WARN checkPermissions Missing write access to /usr/<span class="built_in">local</span>/lib/node_modules</span><br><span class="line">npm ERR! code EACCES</span><br><span class="line">npm ERR! syscall access</span><br><span class="line">npm ERR! path /usr/<span class="built_in">local</span>/lib/node_modules</span><br><span class="line">npm ERR! errno -13</span><br><span class="line">npm ERR! Error: EACCES: permission denied, access <span class="string">'/usr/local/lib/node_modules'</span></span><br><span class="line">npm ERR!  [Error: EACCES: permission denied, access <span class="string">'/usr/local/lib/node_modules'</span>] &#123;</span><br><span class="line">npm ERR!   errno: -13,</span><br><span class="line">npm ERR!   code: <span class="string">'EACCES'</span>,</span><br><span class="line">npm ERR!   syscall: <span class="string">'access'</span>,</span><br><span class="line">npm ERR!   path: <span class="string">'/usr/local/lib/node_modules'</span></span><br><span class="line">npm ERR! &#125;</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! The operation was rejected by your operating system.</span><br><span class="line">npm ERR! It is likely you <span class="keyword">do</span> not have the permissions to access this file as the current user</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! If you believe this might be a permissions issue, please double-check the</span><br><span class="line">npm ERR! permissions of the file and its containing directories, or try running</span><br><span class="line">npm ERR! the <span class="built_in">command</span> again as root/Administrator.</span><br><span class="line"></span><br><span class="line">npm ERR! A complete <span class="built_in">log</span> of this run can be found <span class="keyword">in</span>:</span><br><span class="line">npm ERR!     /Users/wangao/.npm/_logs/2020-09-06T08_50_44_338Z-debug.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用以下命令修改权限解决</span></span><br><span class="line">sudo chown -R `whoami` ~/.npm</span><br><span class="line">sudo chown -R `whoami` /usr/<span class="built_in">local</span>/lib/node_modules</span><br><span class="line"></span><br><span class="line"><span class="comment"># Node.js 版本太高需要从 16/14 降级为 12，否则 hexo g 生成的是空白文件</span></span><br><span class="line">https://github.com/hexojs/hexo/issues/4257</span><br><span class="line">https://nodejs.org/en/download/releases/</span><br><span class="line"></span><br><span class="line">npm uninstall hexo-cli -g</span><br><span class="line">brew uninstall node</span><br><span class="line">brew search node</span><br><span class="line">brew install node@12</span><br><span class="line">brew link --overwrite node@12</span><br><span class="line"></span><br><span class="line">npm ls --depth 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hexo 插件和主题要遵循版本</span></span><br><span class="line">https://www.npmjs.com/package/hexo</span><br><span class="line">npm install hexo@3.9.0 --save</span><br></pre></td></tr></table></figure><h2 id="Hexo-初始化配置"><a href="#Hexo-初始化配置" class="headerlink" title="Hexo 初始化配置"></a>Hexo 初始化配置</h2><h3 id="Hexo-官方步骤"><a href="#Hexo-官方步骤" class="headerlink" title="Hexo 官方步骤"></a>Hexo 官方步骤</h3><blockquote><p>简单几步就可以在本地执行，还有一些插件需要和第三方主题搭配使用</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><h3 id="创建-Hexo-文件夹"><a href="#创建-Hexo-文件夹" class="headerlink" title="创建 Hexo 文件夹"></a>创建 Hexo 文件夹</h3><p>安装完成后，根据自己喜好建立目录（如 <code>E:\kuaipan\GitHub\hexo</code>），进入 <code>Git Shell</code> 切换到该路径下 <code>E:\kuaipan\GitHub\hexo</code> 执行以下指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</span></span><br><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建完成后，指定文件夹的目录如下</span></span><br><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── scripts</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">|      ├── _drafts</span><br><span class="line">|      └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><h3 id="安装-Hexo-指定版本和插件"><a href="#安装-Hexo-指定版本和插件" class="headerlink" title="安装 Hexo 指定版本和插件"></a>安装 Hexo 指定版本和插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 版本</span></span><br><span class="line">npm install hexo@3.9.0 --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插件</span></span><br><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br><span class="line">npm install hexo-renderer-marked@0.2 --save</span><br><span class="line">npm install hexo-renderer-stylus@0.2 --save</span><br><span class="line">npm install hexo-generator-feed@1 --save</span><br><span class="line">npm install hexo-generator-sitemap@1 --save</span><br></pre></td></tr></table></figure><h3 id="本地查看效果"><a href="#本地查看效果" class="headerlink" title="本地查看效果"></a>本地查看效果</h3><p>继续执行以下命令，成功后可登录 <code>localhost:4000</code> 查看效果<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure></p><h3 id="Hexo-简写命令"><a href="#Hexo-简写命令" class="headerlink" title="Hexo 简写命令"></a>Hexo 简写命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="comment"># 生成文章，或者 source\_posts 手动编辑 </span></span><br><span class="line">hexo s <span class="comment"># 本地发布预览效果</span></span><br><span class="line">hexo g <span class="comment"># 生成 public 静态文件</span></span><br><span class="line"> 最后我选择手动同步更新至 GitHub</span><br></pre></td></tr></table></figure><h2 id="部署静态网页到-GitHub"><a href="#部署静态网页到-GitHub" class="headerlink" title="部署静态网页到 GitHub"></a>部署静态网页到 GitHub</h2><h3 id="注册设置-GitHub"><a href="#注册设置-GitHub" class="headerlink" title="注册设置 GitHub"></a>注册设置 GitHub</h3><ol><li>登录<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>，注册自定义用户名如 <code>wsgzao</code></li><li>在主页右下角创建 <code>New repository</code>，name 必须和用户名一致如 <code>wsgzao.github.io</code></li><li>首次创建耐心等待 10 分钟左右审核，之后即可访问静态主页如<a href="https://wsgzao.github.io">https://wsgzao.github.io</a></li></ol><h3 id="同步内容至-GitHub"><a href="#同步内容至-GitHub" class="headerlink" title="同步内容至 GitHub"></a>同步内容至 GitHub</h3><ol><li>下载<a href="https://windows.github.com/" target="_blank" rel="noopener">GitHub Windows</a></li><li>设置 <code>Local path</code> 如 <code>E:\ 快盘 \ GitHub\</code></li><li>运行 <code>Git Shell</code> 切换到如 <code>E:\ 快盘 \ GitHub\hexo</code> 路径下</li><li>执行 <code>hexo g</code> 命令生成 <code>public</code> 文件夹</li><li>把生成的内容全部拷贝到 <code>Local path</code> 或其子目录</li><li>运行 <code>GitHub</code> 确认修改信息后执行右上角的 <code>Sync</code> 同步</li><li>最后访问主页观察效果</li></ol><p><a href="https://pages.github.com/" target="_blank" rel="noopener">https://pages.github.com/</a></p><h2 id="域名和-DNS"><a href="#域名和-DNS" class="headerlink" title="域名和 DNS"></a>域名和 DNS</h2><h3 id="域名推荐"><a href="#域名推荐" class="headerlink" title="域名推荐"></a>域名推荐</h3><blockquote><p>GoDaddy makes registering Domain Names fast, simple, and affordable.</p></blockquote><p>【推荐理由】两个字“靠谱”，支持支付宝</p><p><a href="http://www.godaddy.com/" target="_blank" rel="noopener">http://www.godaddy.com/</a></p><h3 id="DNS-推荐"><a href="#DNS-推荐" class="headerlink" title="DNS 推荐"></a>DNS 推荐</h3><blockquote><p>致力于为您提供最稳定、最安全的域名解析服务</p></blockquote><p>【推荐理由】依然是两个字“靠谱”，感谢他们一直以来对于公益的坚持</p><p><a href="https://www.dnspod.cn/" target="_blank" rel="noopener">https://www.dnspod.cn/</a></p><h3 id="设置-CNAME"><a href="#设置-CNAME" class="headerlink" title="设置 CNAME"></a>设置 CNAME</h3><ol><li>在 Github 的网站目录下创建 <code>CNAME</code> 文件</li><li>填写自己的域名如 <code>hellodog.com</code>，保存结束</li><li>登录 DNSPod，先添加域名，然后添加记录，设置如下</li></ol><table><thead><tr><th>主机记录</th><th>记录类型</th><th>线路类型</th><th>记录值</th><th>MX 优先级</th><th>TTL</th></tr></thead><tbody><tr><td>@</td><td>CNAME</td><td>默认</td><td>wsgzao.github.io.</td><td>-</td><td>10</td></tr><tr><td>www</td><td>CNAME</td><td>默认</td><td>wsgzao.github.io.</td><td>-</td><td>10</td></tr></tbody></table><h2 id="Hexo-配置修改"><a href="#Hexo-配置修改" class="headerlink" title="Hexo 配置修改"></a>Hexo 配置修改</h2><blockquote><p>告诉自己为什么要选择 Hexo</p></blockquote><h3 id="知识储备"><a href="#知识储备" class="headerlink" title="知识储备"></a>知识储备</h3><ol><li>勤学勤练 Markdown</li></ol><blockquote><p>本地 + 云端备份数据是一种习惯</p></blockquote><p>Markdown 学习路径 - <a href="https://wsgzao.github.io/post/markdown/">https://wsgzao.github.io/post/markdown/</a></p><ol start="2"><li>使用性感的文本编辑器</li></ol><blockquote><p>工欲善其事必先利其器</p></blockquote><ul><li>Notepad2</li><li>Visual Studio Code</li></ul><h3 id="Hexo-主题"><a href="#Hexo-主题" class="headerlink" title="Hexo 主题"></a>Hexo 主题</h3><blockquote><p>选择主题建议遵循 <code>KISS</code> 原则</p></blockquote><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo Themes</a></p><p><a href="https://github.com/next-theme/hexo-theme-next" target="_blank" rel="noopener">hexo-theme-next</a></p><p><a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="noopener">hexo-theme-fluid</a></p><p><a href="https://github.com/zchengsite/hexo-theme-oranges" target="_blank" rel="noopener">hexo-theme-oranges</a></p><p><a href="https://github.com/XPoet/hexo-theme-keep" target="_blank" rel="noopener">hexo-theme-keep</a></p><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol><li>修改配置文件时注意 <code>YAML</code> 语法，参数 <code>冒号:</code> 后一定要留 <code>空格</code></li><li>中文乱码请修改文件编码格式为 <code>UTF-8</code></li><li><a href="https://hexo.io/zh-cn/docs/migration.html" target="_blank" rel="noopener">如何迁移至 Hexo</a></li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo 官方中文文档</a></p><p><a href="https://github.com/EasyHexo/Easy-Hexo" target="_blank" rel="noopener">Easy Hexo</a></p>]]></content>
    
    <summary type="html">
    
      持续更新Hexo的摸索过程，记录生活的点滴
    
    </summary>
    
      <category term="Hexo" scheme="https://wsgzao.github.io/categories/Hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>macOS 升级后开机卡在进度条和唤醒时黑屏的解决方法</title>
    <link href="https://wsgzao.github.io/post/macos/"/>
    <id>https://wsgzao.github.io/post/macos/</id>
    <published>2021-10-10T04:43:14.000Z</published>
    <updated>2022-01-08T20:33:31.482Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190822151646.gif" alt></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>第一次升级 macOS 在抱着对 Apple 高质量软硬件的幻想中破灭，从 macOS High Sierra 手贱升级到 macOS Mojave (version 10.14)，各种字体发虚，Kernel Panic(六国语言重启)，系统卡顿，耗电快等问题接踵而至。本来寄希望于升级 macOS Mojave (version 10.14.1-10.14.6)可以解决部分稳定性和兼容性问题，但是 MacBook 居然开机卡在进度条，然后我等了一上午都没有完成，差点以为要悲剧的重装系统丢失数据了。所以很有必要给大伙提个醒，无论是 Windows 还是 macOS 在新版本推送的早期都不要点击更新，升级到高版本后如果不选择 erase 擦除数据是无法降级至低版本的，比如从 Catalina 降级至 Mojave 或 High Sierra。抑制住你体内的洪荒之力和强迫症，不要手贱，不要手贱，不要手贱。实在手痒的厉害，千万记住先备份后折腾。</p><blockquote><p>拒绝重装！教你如何拯救开机失败的 Mac 电脑</p></blockquote><hr><h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2021 年 10 月 10 日 - 增加 macOS Catalina 升级至 Big Sur 遇到问题的解决方案<br>2019 年 08 月 22 日 - 更新解决问题的常见套路，可修复截止至 10.14.6 之前的大多数问题，对 Catalina 不抱有 Bug 变少希望<br>2019 年 01 月 30 日 - 更新解决唤醒时黑屏只看见鼠标的问题<br>2018 年 11 月 01 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/macos/">https://wsgzao.github.io/post/macos/</a></p><p><strong> 扩展阅读 </strong></p><p>Upgrade to macOS Mojave - <a href="https://www.apple.com/macos/how-to-upgrade/" target="_blank" rel="noopener">https://www.apple.com/macos/how-to-upgrade/</a><br>如何升级到 macOS Mojave - <a href="https://support.apple.com/zh-cn/HT201475" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201475</a><br>如何通过 macOS 恢复功能重新安装 macOS - <a href="https://support.apple.com/zh-cn/HT204904" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT204904</a><br>如何创建可引导的 macOS 安装器 - <a href="https://support.apple.com/zh-cn/HT201372" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201372</a><br>使用 “时间机器” 备份您的 Mac - <a href="https://support.apple.com/zh-cn/HT201250" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201250</a></p><hr><h2 id="macOS-history"><a href="#macOS-history" class="headerlink" title="macOS history"></a>macOS history</h2><blockquote><p>第一次体验苹果虚拟机和黑苹果记得还是 Tiger 和 Leopard 的时候</p></blockquote><table><thead><tr><th>Version</th><th>Codename</th><th>﻿Most recent version</th></tr></thead><tbody><tr><td>Mac OS X 10.0</td><td>Cheetah</td><td>﻿10.0.4 (June 22, 2001)</td></tr><tr><td>Mac OS X 10.1</td><td>Puma</td><td>10.1.5 (June 6, 2002)</td></tr><tr><td>Mac OS X 10.2</td><td>Jaguar</td><td>10.2.8 (October 3, 2003)</td></tr><tr><td>Mac OS X 10.3</td><td>Panther</td><td>10.3.9 (April 15, 2005)</td></tr><tr><td>Mac OS X 10.4</td><td>Tiger</td><td>10.4.11 (November 14, 2007)</td></tr><tr><td>Mac OS X 10.5</td><td>Leopard</td><td>10.5.8 (August 5, 2009)</td></tr><tr><td>Mac OS X 10.6</td><td>Snow Leopard</td><td>10.6.8 v1.1 (July 25, 2011)</td></tr><tr><td>Mac OS X 10.7</td><td>Lion</td><td>10.7.5 (September 19, 2012)</td></tr><tr><td>OS X 10.8</td><td>Mountain Lion</td><td>10.8.5 (12F45) (October 3, 2013)</td></tr><tr><td>OS X 10.9</td><td>Mavericks</td><td>10.9.5 (13F1112) (September 18, 2014)[170]</td></tr><tr><td>OS X 10.10</td><td>Yosemite</td><td>10.10.5 (14F27) (August 13, 2015)</td></tr><tr><td>OS X 10.11</td><td>El Capitan</td><td>10.11.6 (15G22010) (July 9, 2018)</td></tr><tr><td>macOS 10.12</td><td>Sierra</td><td>10.12.6 (16G2136) (September 26, 2019)</td></tr><tr><td>macOS 10.13</td><td>High Sierra</td><td>10.13.6 (17G14042) (November 12, 2020)</td></tr><tr><td>macOS 10.14</td><td>Mojave</td><td>10.14.6 (18G9323) (July 21, 2021)</td></tr><tr><td>macOS 10.15</td><td>Catalina</td><td>10.15.7 (19H1419) (September 23, 2021)</td></tr><tr><td>macOS 11</td><td>Big Sur</td><td>11.6 (20G165) (September 13, 2021)</td></tr></tbody></table><p>macOS release history - <a href="https://en.wikipedia.org/wiki/MacOS" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/MacOS</a></p><h2 id="macOS-最新稳定版常见问题"><a href="#macOS-最新稳定版常见问题" class="headerlink" title="macOS 最新稳定版常见问题"></a>macOS 最新稳定版常见问题</h2><blockquote><p>macOS Catalina 升级至 Big Sur 遇到问题的解决方案</p></blockquote><p>问题描述：<br>Mac 不能打开软件，提示检查为恶意软件<br>can’t be opened because Apple cannot check it for malicious software.<br>App can’t be opened because it is from an unidentified developer</p><p>解决方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开 Terminal, 运行命令解决</span></span><br><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure></p><p>Mac &gt; System Preferences &gt; Security &amp; Privacy 多了一个选项 Anywhere</p><h3 id="WindowServer-高-CPU-占用率的问题"><a href="#WindowServer-高-CPU-占用率的问题" class="headerlink" title="WindowServer 高 CPU 占用率的问题"></a>WindowServer 高 CPU 占用率的问题</h3><p>WindowServer 高 CPU 占用率的问题从我开始吧 MacBook Pro 作为工作电脑深度使用就一直遇到的一个问题，估计 Apple 自研 M1 芯片后会好一些</p><ul><li>Mojave</li><li>Catalina</li><li>Big Sur</li><li>Monterey</li></ul><p>至少在 Intel 芯片版本的 MacBook 几乎都存在 WindowServer 高 CPU 占用率的情况，如果你跟我一样也使用旧款的苹果设备，并且无意追新的话，可能会发现经过几次系统升级后，即使不打开任何大型软件，设备本身就会热到烫手。如果查看 Activity Monitor，会发现 WindowServer 进程占用很高的 CPU（从 40% 到 100% 波动）</p><p>那么这个进程是做什么用的？WindowServer 是 macOS 的 display server，包含显示服务器和窗口管理器的功能，可以简单理解为功能类似 Linux 上的 X11。macOS 设备上屏幕显示的所有内容基本都由 WindoServer 负责管理、合成和发送给硬件进行渲染。</p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/202201090431616.png" alt></p><p>再来去到 System Preferences，点开 Accessibility &gt; Display，勾上 以下选项</p><ul><li>Reduce Motion 减少 macOS 上界面的动画效果</li><li>Reduce transparency 这会让一些透明的部件（例如菜单栏）的渲染压力减小</li><li>Differenciate without color 无色差异化”设置的最佳解释是，它旨在帮助有视觉困难或色盲的用户, 对大部分人来说作用很小</li></ul><p>降低 WindowServer 的 CPU 占用<br><a href="https://blog.mynook.info/post/macos-windowserver-calm-down/" target="_blank" rel="noopener">https://blog.mynook.info/post/macos-windowserver-calm-down/</a></p><h2 id="常见的拯救方法"><a href="#常见的拯救方法" class="headerlink" title="常见的拯救方法"></a>常见的拯救方法</h2><blockquote><p>苹果官方客服的标准答复三板斧，有一定道理但不一定可以解决你的问题，属于玄学。重点还是要掌握正确的分析思路，检查日志和启动项，通过安全模式做对比交叉分析寻找蛛丝马迹</p></blockquote><ol><li>Reset NVRAM</li><li>Rest SMC</li><li>Use safe mode to isolate issues</li></ol><h3 id="重置-SMC"><a href="#重置-SMC" class="headerlink" title="重置 SMC"></a>重置 SMC</h3><p>先关机，然后断开电源，拔掉所有 USB 的连接，然后同时按住键盘左下角的 Shift，Control，Option 和开机键 15 秒。全过程 Mac 不会开机。15 秒后松手插上电源开机。</p><p>如何重置 Mac 上的系统管理控制器 (SMC) - <a href="https://support.apple.com/zh-cn/HT201295" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201295</a></p><h3 id="重置-NVRAM"><a href="#重置-NVRAM" class="headerlink" title="重置 NVRAM"></a>重置 NVRAM</h3><p>将 Mac 关机，然后开机并立即同时按住以下四个按键：Option、Command、P 和 R。您可以在大约 20 秒后松开这些按键，在此期间您的 Mac 可能看似在重新启动。</p><p>重置 Mac 上的 NVRAM 或 PRAM - <a href="https://support.apple.com/zh-cn/HT204063" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT204063</a></p><h3 id="使用安全模式"><a href="#使用安全模式" class="headerlink" title="使用安全模式"></a>使用安全模式</h3><p>要以安全模式启动，请按照以下步骤操作：</p><ol><li>启动或重新启动 Mac，然后立即按住 Shift 键。显示屏上将出现 Apple 标志。如果没有看到 Apple 标志，请了解该如何操作。</li><li>看到登录窗口时，松开 Shift 键。如果启动磁盘使用 FileVault 进行了加密，系统可能会两次提示登录：第一次为解锁启动磁盘，第二次则为登录 Finder。</li></ol><p>使用安全模式查明 Mac 的相关问题 - <a href="https://support.apple.com/zh-cn/HT201262" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201262</a></p><h3 id="重装系统"><a href="#重装系统" class="headerlink" title="重装系统"></a>重装系统</h3><p>如果以上都不能解决你的问题，且系统是最新的，硬件是没问题的，那么重装系统吧。哈哈，重装系统总是这么简单霸气的解决一些问题。</p><p>前提：</p><ol><li>保证你能连到 wifi 或者有线，因为重装系统需要连接远程服务器</li><li>保证有足够的电源，最好是附件有插板可以充电的情况下重装系统，这个过程还是比较久的，50 分钟左右。</li></ol><p>步骤如下：</p><ol><li>开机按住 Command (⌘)-R</li><li>出现的四个选项的界面选择第二个重装系统(Reinstall macOS)</li><li>等待重装系统完成即可</li></ol><p>如何通过 macOS 恢复功能重新安装 macOS - <a href="https://support.apple.com/zh-cn/HT204904" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT204904</a></p><h3 id="TimeMachine-恢复"><a href="#TimeMachine-恢复" class="headerlink" title="TimeMachine 恢复"></a>TimeMachine 恢复</h3><blockquote><p>TimeMachine 数据恢复的成本太高，需要先 Reinstall macOS 然后使用 TimeMacthine 恢复，再重新配置软件，不到万不得已之时不推荐</p></blockquote><ol><li>制作 U 盘启动</li><li>TimeMachine 恢复</li></ol><p>如何创建可引导的 macOS 安装器 - <a href="https://support.apple.com/zh-cn/HT201372" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201372</a></p><p>使用 “时间机器” 备份您的 Mac - <a href="https://support.apple.com/zh-cn/HT201250" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201250</a></p><h2 id="Mac-的启动组合键"><a href="#Mac-的启动组合键" class="headerlink" title="Mac 的启动组合键"></a>Mac 的启动组合键</h2><p>若要使用这些组合键中的任何一个，请在按下电源按钮以开启 Mac 后或在 Mac 开始重新启动后，立即按住相应按键。请一直按住，直至电脑出现对应的行为。</p><p>Command (⌘)-R：从内建的 macOS 恢复系统启动。或者，您也可以使用 Option-Command-R 或 Shift-Option-Command-R 以通过互联网从 macOS 恢复功能启动。macOS 恢复功能可以安装不同版本的 macOS，具体取决于您在电脑启动时使用的组合键。如果您的 Mac 使用了固件密码，系统将要求您输入这个密码。</p><p>Option (⌥)：启动进入“启动管理器”，您可以从中选取其他启动磁盘或宗卷（若可用）。如果您的 Mac 使用了固件密码，系统将要求您输入这个密码。</p><p>Option-Command-P-R：重置 NVRAM 或 PRAM。如果您的 Mac 使用了固件密码，它会忽略这个组合键或从 macOS 恢复功能启动。</p><p>Shift (⇧)：以安全模式启动。</p><p>D：从内建的 Apple Hardware Test 或 Apple Diagnostics 实用工具启动，具体取决于您的 Mac 机型。或者，您也可以使用 Option-D 通过互联网从这个实用工具启动。</p><p>N：从兼容的 NetBoot 服务器启动（若可用）。要使用 NetBoot 服务器上默认的引导映像，则请按住 Option-N。配备 Apple T2 芯片的电脑不支持这个启动键。</p><p>Command-S：以单用户模式启动。这个组合键要求使用 macOS High Sierra 或更早版本。</p><p>T：以目标磁盘模式启动。</p><p>Command-V：以详细模式启动。</p><p>Mac 的启动组合键 - <a href="https://support.apple.com/zh-cn/HT201255" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201255</a></p><h2 id="有效的解决方法"><a href="#有效的解决方法" class="headerlink" title="有效的解决方法"></a>有效的解决方法</h2><blockquote><p>如果你遇到和我类似的问题，不妨尝试寻找下具体的错误日志，然后向 Google 或者咨询苹果客服求助</p></blockquote><ol><li>command + v 进入代码界面，等出现不停的输出 Too many corpses being created 这段代码的时候，说明是缓存太多造成的</li><li>command + R 进入 macOS 使用工具页面，左上角找到终端工具</li><li>输入以下代码，重命名数据库缓存就行了</li><li>然后再重新启动电脑，耐心等待一会儿就可以重新进入桌面</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Volumes/Macintosh\ HD/var/db/caches/opendirectory/</span><br><span class="line">mv ./mbr_cache ./mbr_cache-old</span><br></pre></td></tr></table></figure><h2 id="解决唤醒时黑屏只看见鼠标的问题"><a href="#解决唤醒时黑屏只看见鼠标的问题" class="headerlink" title="解决唤醒时黑屏只看见鼠标的问题"></a>解决唤醒时黑屏只看见鼠标的问题</h2><p>先关机，然后开机快速同时点击 Command + S 按键进入 single-user 单用户模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/sbin/fsck -fy</span><br><span class="line">/sbin/mount -uw /</span><br><span class="line">rm -f /Library/Preferences/com.apple.loginwindow.plist</span><br><span class="line">rm -f /var/db/.AppleUpgrade</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h2 id="其它异常"><a href="#其它异常" class="headerlink" title="其它异常"></a>其它异常</h2><blockquote><p>最直接的方法莫过于检查日志文件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 如果非意外重启报错可以打开 console 控制台查看</span><br><span class="line">pmset -g log</span><br><span class="line"></span><br><span class="line"># 常见的手动清理步骤</span><br><span class="line">brew list</span><br><span class="line">brew uninstall</span><br><span class="line">brew uninstall v2ray-core</span><br><span class="line"></span><br><span class="line">brew cask list</span><br><span class="line">brew cask uninstall</span><br><span class="line">brew cask v2rayu</span><br><span class="line"></span><br><span class="line">brew services list</span><br><span class="line">brew services stop</span><br><span class="line">brew services stop v2rayu</span><br><span class="line"></span><br><span class="line"># 如果 system.log 有已删除但没有清理干净的自启动服务</span><br><span class="line">launchctl unload -w ~/Library/LaunchAgents/yanue.v2rayu.v2ray-core.plist</span><br><span class="line"></span><br><span class="line"># open(/var/db/DetachedSignatures) - No such file or directory</span><br><span class="line">sudo touch /var/db/DetachedSignatures</span><br><span class="line"></span><br><span class="line"># 检查启动项清理脏数据</span><br><span class="line">cd /Library/LaunchAgents</span><br><span class="line">cd /Library/LaunchDaemons</span><br><span class="line">sudo rm</span><br></pre></td></tr></table></figure><table><thead><tr><th>Name</th><th>Path</th></tr></thead><tbody><tr><td>系统日志文件夹</td><td>/var/log</td></tr><tr><td>系统日志文件</td><td>/var/log/system.log</td></tr><tr><td>Mac 分析数据</td><td>/var/log/DiagnosticMessages</td></tr><tr><td>系统应用程序日志</td><td>/Library/Logs</td></tr><tr><td>系统报告</td><td>/Library/Logs/DiagnosticReports</td></tr><tr><td>用户应用程序日志</td><td>~/Library/Logs</td></tr><tr><td>用户报告</td><td>~/Library/Logs/DiagnosticReports</td></tr></tbody></table><p><a href="https://support.apple.com/zh-cn/HT200553" target="_blank" rel="noopener">如果 Mac 因为出现问题而重新启动</a></p><p><a href="https://zxtechart.com/2017/05/10/mac-finder-stuck/" target="_blank" rel="noopener">排查 Mac 中的 Finder 无限卡住的问题</a></p><p><a href="https://blog.macsales.com/45586-how-to-use-the-mac-console-app-to-diagnose-a-crash/" target="_blank" rel="noopener">How to Use the Mac Console App to Diagnose a Crash</a></p><p><a href="https://blog.macsales.com/46475-macos-reversion-how-to-downgrade-from-mojave/" target="_blank" rel="noopener">macOS Reversion: How to Downgrade from Mojave</a></p><p>如果遇到频繁卡死并黑屏无法唤醒，最后经常自动重启，我的解决步骤是</p><ol><li>移除了一些比较旧的应用</li><li>关闭了蓝牙等不需要使用的服务</li><li>清理了自启动的脏数据</li><li>最后 Reset NVRAM 和 SMC</li><li>如果电脑目前非常稳定，请不要考虑升级，一个从坑里爬出来的肺腑之言</li></ol><h2 id="不着急的解决方案"><a href="#不着急的解决方案" class="headerlink" title="不着急的解决方案"></a>不着急的解决方案</h2><p>联系 Apple 支持 - <a href="https://getsupport.apple.com/" target="_blank" rel="noopener">https://getsupport.apple.com/</a></p>]]></content>
    
    <summary type="html">
    
      拒绝重装！教你如何拯救开机失败的Mac电脑
    
    </summary>
    
      <category term="软件 | Soft" scheme="https://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
    
  </entry>
  
  <entry>
    <title>新加坡宽带套餐选择推荐和路由器配置经验分享</title>
    <link href="https://wsgzao.github.io/post/singapore-broadband/"/>
    <id>https://wsgzao.github.io/post/singapore-broadband/</id>
    <published>2021-09-07T02:59:49.000Z</published>
    <updated>2021-09-08T06:58:39.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>原本没有计划写新加坡个人宽带，但是在经历过 Singtel 合约转让以及续费并且手动 debug 登录光猫修改路由器配置后，我决定把自己了解到的信息和大家做下分享，而且由于新加坡疫情从 2020 年初到现在对所有人最重要的影响改变就是习惯 WFH，除了房子以外宽带的可靠性其实决定了大家在家办公的舒适程度。这篇文章想和大家分享的不单纯是新加坡宽带套餐选择，更重要的是分享下在新加坡上网的经验之谈。</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 09 月 07 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/singapore-broadband/">https://wsgzao.github.io/post/singapore-broadband/</a></p><hr><h2 id="新加坡宽带选择结论"><a href="#新加坡宽带选择结论" class="headerlink" title="新加坡宽带选择结论"></a>新加坡宽带选择结论</h2><blockquote><p>我选择 Singtel 宽带</p></blockquote><p>原因很简单</p><ol><li>稳定压倒一切</li><li>一分价钱一分货，Singtel 就是新加坡的中国电信</li><li>和其他宽带供应商比较已经算是优质的售后服务体验</li></ol><p>如果大家在国内生活过，我举 <code>中国电信</code> 宽带对比 <code>联通 / 移动 / 有线通 / 鹏博士 / 长城宽带</code>，相信各位就能明白在新加坡 <code>Singtel</code> 对比 <code>M1/StarHub/MyRepublic/ViewQwest/WhizComms</code> 的区别。被上述友商深深伤害过的朋友一定明白谁才真正掌握宽带核心科技</p><h2 id="新加坡宽带套餐对比"><a href="#新加坡宽带套餐对比" class="headerlink" title="新加坡宽带套餐对比"></a>新加坡宽带套餐对比</h2><p>关于新加坡宽带套餐对比网上已经有比较详细的分析，我这边主要强调 3 点，希望对大家有参考价值</p><ol><li>合约时间一般分为 1 年和 2 年，宽带速率一般为 1Gbps，当然也可以选择 500Mbps 或者 2Gbps 以上</li><li>性价比来说我个人觉得差价不大，建议优先考虑长期在家办公的稳定性</li><li>注意产品背后涉及合约转让，搬家迁移，提前解约等隐形成本，售后服务优先</li></ol><div class="table-wrapper"><br>    <table id="tablepress-3753" class="tablepress tablepress-id-3753"><br>        <thead><br>            <tr class="row-1 odd"><br>                <th class="column-1">Home Fibre Broadband Provider</th><br>                <th class="column-2">No Contract Plan</th><br>                <th class="column-3">12-Months Plan</th><br>                <th class="column-4">24-Months Plan</th><br>                <th class="column-5">Sign-Up and Installation Fees</th><br>            </tr><br>        </thead><br>        <tbody class="row-hover"><br>            <tr class="row-2 even"><br>                <td class="column-1">M1</td><br>                <td class="column-2">None</td><br>                <td class="column-3">500Mbps: $39.90<br><br>                    <br><br>                    1Gbps with Router: $49.90<br>                </td><br>                <td class="column-4">500Mbps: $29.90<br><br>                    <br><br>                    <b>1Gbps with Router: $39.90</b><br><br>                    <br><br>                    1Gbps (GamePRO): $52<br>                </td><br>                <td class="column-5">Registration: $58.85 (waived for new sign-ups with promo code ‘FREEREG’ for 24-months 1 Gbps plan)<br><br>                    <br><br>                    ONT Activation: $90.00 (waived for Mon to Fri, 9am to 6pm)<br><br>                    <br><br>                    Optical Fibre Termination Point Installation: $160.50 (Condo &amp; HDB) or $288.90 (landed)<br>                </td><br>            </tr><br>            <tr class="row-3 odd"><br>                <td class="column-1">MyRepublic</td><br>                <td class="column-2">1Gbps: $59.99</td><br>                <td class="column-3">1Gbps: $50.99</td><br>                <td class="column-4">200Mbps: $27.99<br><br>                    <br><br>                    1Gbps: $38.99<br><br>                    <br><br>                    <b>1Gbps with Router or WiFi Mesh: $41.99</b><br><br>                    <br><br>                    1Gbps (Gamer): $49.99<br><br>                    <br><br>                    2 x 1Gbps: $51.99<br><br>                    <br><br>                    2 x 1Gbps (Gamer): $56.99<br>                </td><br>                <td class="column-5">Service installation fee: $53.50 (one-time)<br><br>                    <br><br>                    ONT Activation: $56.71<br><br>                    <br><br>                    Optical Fibre Termination Point Installation: $160.50 (Condo &amp; HDB) or $288.90 (landed)<br>                </td><br>            </tr><br>            <tr class="row-4 even"><br>                <td class="column-1">Singtel</td><br>                <td class="column-2">None</td><br>                <td class="column-3">None</td><br>                <td class="column-4"><b>1Gbps with Router: $44.90</b><br><br>                    <br><br>                    1Gbps with WiFi Mesh: $49.90<br><br>                    <br><br>                    2Gbps with WiFi Mesh: $64.90<br><br>                    <br><br>                    1+1 Gbps Gamer Bundle: $64.90<br><br>                    <br><br>                    10Gbps with WiFi Mesh: $169<br>                </td><br>                <td class="column-5">Registration: $53.50 (one time, free for online sign ups)<br><br>                    <br><br>                    ONT Activation: $56.71<br><br>                    <br><br>                    Optical Fibre Termination Point Installation: $160.50 (Condo &amp; HDB) or $288.90 (landed)<br>                </td><br>            </tr><br>            <tr class="row-5 odd"><br>                <td class="column-1">StarHub</td><br>                <td class="column-2">None</td><br>                <td class="column-3">1Gbps with Router: $49.90</td><br>                <td class="column-4">500Mbps: $29.90<br><br>                    <br><br>                    <b>1Gbps with Router: $45.90</b><br><br>                    <br><br>                    2Gbps with Router: $54.90<br>                </td><br>                <td class="column-5">Registration: None<br><br>                    <br><br>                    ONT Activation: $56.71<br><br>                    <br><br>                    Optical Fibre Termination Point Installation: $160.50 (Condo &amp; HDB) or $288.90 (landed)<br>                </td><br>            </tr><br>            <tr class="row-6 even"><br>                <td class="column-1">ViewQwest</td><br>                <td class="column-2">1Gbps: $62.50</td><br>                <td class="column-3">None</td><br>                <td class="column-4">500Mbps: $29.90<br><br>                    <br><br>                    <b>1Gbps with Router: $42.90</b><br><br>                    <br><br>                    1Gbps with WiFi Mesh: $53.90<br><br>                    <br><br>                    1Gbps (Gamer): $52.90<br><br>                    <br><br>                    2 Gbps: $48.90<br><br>                    <br><br>                    2Gbps (Gamer): $64.90<br><br>                    <br><br>                    2Gbps with WiFi Mesh: $65.90<br>                </td><br>                <td class="column-5">Registration: $53.50 (one-time)<br><br>                    <br><br>                    ONT Activation: $56.71<br><br>                    <br><br>                    Optical Fibre Termination Point Installation: $160.50 (Condo &amp; HDB) or $288.90 (landed)<br>                </td><br>            </tr><br>            <tr class="row-7 odd"><br>                <td class="column-1">WhizComms</td><br>                <td class="column-2">None</td><br>                <td class="column-3">300Mbps: $32<br><br>                    <br><br>                    1Gbps: $40<br><br>                    <br><br>                    1Gbps with Router: $47<br>                </td><br>                <td class="column-4">300Mbps: $28.90<br><br>                    <br><br>                    1Gbps: $34.90<br><br>                    <br><br>                    <b>1Gbps with Router: $39.90</b><br><br>                    <br><br>                    1Gbps with WiFi Mesh: $49.90<br>                </td><br>                <td class="column-5">Service activation fee: $53.50 (one-time)<br><br>                    <br><br>                    ONT Activation: $56.71<br><br>                    <br><br>                    Optical Fibre Termination Point Installation: $160.50 (Condo &amp; HDB) or $288.90 (landed)<br>                </td><br>            </tr><br>        </tbody><br>    </table><br></div><p>Note: Prices listed are regular prices correct as at the time of writing; there are usually promos which give free installation, registration fee waivers and etc.</p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20210907235058.png" alt></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20210907235125.png" alt></p><p>Best Home Fibre Broadband Plan in Singapore: Which Is the Cheapest Home Fibre Broadband Plan?<br><a href="https://blog.seedly.sg/best-broadband-plan/" target="_blank" rel="noopener">https://blog.seedly.sg/best-broadband-plan/</a></p><p>新加坡宽带套餐，哪家速度快？又实惠？<br><a href="https://www.xiaohongshu.com/discovery/item/5fb9bfaf0000000001009143" target="_blank" rel="noopener">https://www.xiaohongshu.com/discovery/item/5fb9bfaf0000000001009143</a></p><h2 id="新加坡宽带测速"><a href="#新加坡宽带测速" class="headerlink" title="新加坡宽带测速"></a>新加坡宽带测速</h2><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20210908135656.png" alt></p><p>Netflix 出品的 FAST<br><a href="https://fast.com/" target="_blank" rel="noopener">https://fast.com/</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20210908135740.png" alt></p><p>老牌的 SPEEDTEST<br><a href="https://www.speedtest.net/" target="_blank" rel="noopener">https://www.speedtest.net/</a></p><p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20210908135931.png" alt></p><p>Singapore Speedtest Server<br><a href="http://speed-portal.singnet.com.sg/" target="_blank" rel="noopener">http://speed-portal.singnet.com.sg/</a></p><h2 id="Singtel-使用体验"><a href="#Singtel-使用体验" class="headerlink" title="Singtel 使用体验"></a>Singtel 使用体验</h2><p>因为我自己使用的是 Singtel，所以会和大家分享下 Singtel 宽带使用体验。</p><p>新加坡的宽带和手机套餐是完全分开的，这个和法律政策有关，大家就不要考虑类似中国电信乐享家无限流量宽带融合套餐了。</p><h3 id="购买经历"><a href="#购买经历" class="headerlink" title="购买经历"></a>购买经历</h3><p>我购买的是别人转让给我的 Singtel 宽带套餐 1Gbps<br>原价 $49.90/mth，24-month contract，Add-ons 是</p><ul><li>Broadband Monthly Bill Rebate - $7/mth (24 mths)</li></ul><p>所以每月实际付费为 $42.91</p><p>如果你是首次购买可以通过 Singtel 官网查看优惠活动<br><a href="https://www.singtel.com/personal/products-services/broadband/fibre-broadband-plans" target="_blank" rel="noopener">https://www.singtel.com/personal/products-services/broadband/fibre-broadband-plans</a></p><p>因为我的套餐 2021 年 12 月底到期，9 月份就可以开始提前续约，所以也了解清楚 Recontracting 续约的优惠方案，主要有 3 种</p><ol><li>每月直减优惠，一般是 5 新币左右，每月就是 45.9</li><li>免费送 3 个月左右，实际消费按合同 24-3=21 个月，平均每月也差不多 43.66</li><li>绑定合约套餐，如路由器，戴森等数码产品，给一个很低的数字如 39.9 吸引你，然后你会发现分期价格更坑爹，不推荐办理</li></ol><p>Singtel 服务热线主要分两种<br>1609 销售<br>1688 技术支持</p><h3 id="合约转让或者提前解约"><a href="#合约转让或者提前解约" class="headerlink" title="合约转让或者提前解约"></a>合约转让或者提前解约</h3><p>转让一般分两种情况</p><ol><li>你转让给别人或者别人转让给你，流程基本类似</li><li>relocate 搬家</li></ol><p>Transfer of account and service ownership<br><a href="https://www.singtel.com/personal/support/account/transfer-of-account-and-service-ownership" target="_blank" rel="noopener">https://www.singtel.com/personal/support/account/transfer-of-account-and-service-ownership</a></p><p>合约转让注意 2 点</p><ol><li>被人转让给你，建议提前打电话给 Singtel 评估家里是否可以安装 Singtel</li><li>转让 Singtel 一定需要双方携带证件前往指定的 Singtel 实体店面签，比如我去的是乌节路 313 后面的 Singtel 总部</li></ol><p>relocate 搬家注意的是</p><ol><li>预约 Singtel 宽带迁移时间，评估新地址是否可用</li><li>安装费用分为 2 笔 Singtel 服务费 (可免) 和 NLT，费用会根据工作日和非工作日收取不同费用，NetLink Trust (NLT)通常免不了</li></ol><p>提前解约违约成本较高，建议通过合约转让的形式避免，承担 1 笔 40 新币左右转让费用就完事了</p><p>其他问题可以浏览官方或者拨打 1688 咨询，支持中文客服<br><a href="https://www.singtel.com/personal/support" target="_blank" rel="noopener">https://www.singtel.com/personal/support</a></p><h3 id="Singtel-路由器设置方法"><a href="#Singtel-路由器设置方法" class="headerlink" title="Singtel 路由器设置方法"></a>Singtel 路由器设置方法</h3><p>Singtel 路由器简介</p><ol><li>Huawei HG8240T5 Optical Network Router (ONR) ，就是文章里 feiyang 提到的 Singtel 光纤 + 路由硬件<br><a href="https://www.singtel.com/personal/support/broadband/routers-ont" target="_blank" rel="noopener">https://www.singtel.com/personal/support/broadband/routers-ont</a></li><li>Singtel-issued AC Plus router，这个大家伙算是路由器，但真的登录上去又会发现有很多阉割限制<br><a href="https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide" target="_blank" rel="noopener">https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide</a></li><li>一般首次安装 Singtel 工作人员会上门配置，如果涉及 resale 转让或者搬家建议和 Singtel 官方客服确认清楚细节流程，这样可以有效减少不必要的麻烦</li></ol><p>Singtel 路由器常见问题</p><ol><li>路由器到底怎么登录进去？官网留了个坑就是 feiyang 提到的需要移除网线断电重启才能真正进入路由器后台，无需密码，<a href="http://192.168.1.254/" target="_blank" rel="noopener">http://192.168.1.254/</a><br><a href="https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide/change-wireless-settings" target="_blank" rel="noopener">https://www.singtel.com/personal/support/broadband/routers-ont/arcadyan-ac-plus-guide/change-wireless-settings</a></li><li>Band Steering 自动频段切换要不要禁用，禁用的好处是可以分别独立开启 2.4G 和 5G 并重新命名不同名字的 SSID，但我还没有详细的评测数据，目前体验下来暂未发现问题，欢迎补充</li><li>如果是游戏用户或者对网速要求较高，老老实实用有线网络会比较合适，充分榨干 1Gbps</li></ol><p>Singtel 路由器配置过程小结</p><ol><li>我最初的需求是计划修改 SSID，默认密码，独立设置 2.4G 和 5G，交换机和路由器 192.168.1.1/24 网段分离避免 192.168.1.254 地址冲突导致无法进入路由器后台的尴尬</li><li>最后不做任何配置修改，感觉也没必要折腾，但如果我未来觉得有其它问题还是会再回来调优的</li></ol><p>singtel 路由器踩坑经历<br><a href="https://feiyang233.club/post/singtel/" target="_blank" rel="noopener">https://feiyang233.club/post/singtel/</a></p><p>新电信 Singtel vs 星和 StarHub 宽带对比<br><a href="https://www.pupboss.com/singtel-fibre-vs-starhub-fibre/" target="_blank" rel="noopener">https://www.pupboss.com/singtel-fibre-vs-starhub-fibre/</a></p><h2 id="新加坡网络的特点"><a href="#新加坡网络的特点" class="headerlink" title="新加坡网络的特点"></a>新加坡网络的特点</h2><ol><li>新加坡号称全球网速最快的国家之一，Singtel 1Gbps 用有线测速上行和下行基本对等，而你只需要搭配一个更加强大的路由器或者 Mesh 路由器组网来覆盖更大的面积</li><li>宽带供应商公网 IP 逐步像国内一样不再开放，动手能力强的话依然可以 debug 下光猫</li><li>如果你发现某些网站不能正常访问比如 P 站，可以试着修改主 DNS 为 8.8.8.8，然后见证奇迹的时刻</li><li>新加坡可以非常自由的观看 Netflix/Disney+/YouTube Premium 等流媒体，可以通过合租降低成本，比如 Netflix 合租后 3 个月仅 45 人民币</li><li>新加坡的网络对国内的产品出海也都比较友好，像微信读书，腾讯视频，QQ 音乐，爱奇艺，B 站，小红书在新加坡都可以流畅使用，部分受到海外版权播放限制，不过都有办法解除，想追的电影 / 电视剧 / 综艺基本都可以和国内或者国际保持同步</li><li>我手机使用的是 zero1.sg 虚拟运营商无限流量套餐 9.9 新币每月，背后实际运营依然是 Singtel，达量限速对大部分不看高清视频的用户绝对够用而且不用担心流量超出问题，从来新加坡使用至今几乎没有让我失望过。因为新加坡携号转网很方便，我也是在用爱发电推荐 zero1.sg 给周围的朋友</li></ol>]]></content>
    
    <summary type="html">
    
      新加坡宽带套餐选择推荐和路由器配置经验分享
    
    </summary>
    
      <category term="生活 | Life" scheme="https://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
    
  </entry>
  
  <entry>
    <title>Google mtail 配合 Prometheus 和 Grafana 实现自定义日志监控</title>
    <link href="https://wsgzao.github.io/post/mtail/"/>
    <id>https://wsgzao.github.io/post/mtail/</id>
    <published>2021-08-04T06:59:49.000Z</published>
    <updated>2021-08-11T07:15:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>mtail 是一个 Google 开发的日志提取工具，相比 ELK/EFK/Grafana Loki 来说会更轻量。因为我遇到的需求只是为了采集生产日志中的数据，所以采用更为简单的 mtail 配合 Prometheus 和 Grafana 实现自定义日志数据监控。</p><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 08 月 04 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/mtail/">https://wsgzao.github.io/post/mtail/</a></p><hr><h2 id="常见的日志监控解决方案"><a href="#常见的日志监控解决方案" class="headerlink" title="常见的日志监控解决方案"></a>常见的日志监控解决方案</h2><p>开源的业务日志监控，我重点推荐以下 3 个</p><blockquote><p>值得注意的是 ELK 目前有被 EFK 取代的趋势</p></blockquote><p>1：ELK-“ELK”是三个开源项目的首字母缩写，这三个项目分别是：Elasticsearch、Logstash 和 Kibana。</p><p>　　Elasticsearch 是一个搜索和分析引擎。</p><p>　　Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 Elasticsearch 等 “存储库” 中。</p><p>　　Kibana 则可以让用户在 Elasticsearch 中使用图形和图表对数据进行可视化。</p><p>2：Loki，Grafana Labs 团队最新的开源项目，是一个水平可扩展，高可用性，多租户的日志聚合系统。</p><p>3：mtail : 它是一个 google 开发的日志提取工具，从应用程序日志中提取指标以导出到时间序列数据库或时间序列计算器，</p><p>用途就是: 实时读取应用程序的日志、 再通过自己编写的脚本进行分析、 最终生成时间序列指标。</p><p>工具适合自己的才是最好的，无论是 EFK 还是 Loki 都是功能齐全的日志采集系统，当然它们也有各自的优势，</p><blockquote><p>Blog 中记录了一些使用经验大家可以参考</p></blockquote><p>Scribe 安装使用 - <a href="https://wsgzao.github.io/post/scribe/">https://wsgzao.github.io/post/scribe/</a></p><p>使用 ELK(Elasticsearch + Logstash + Kibana) 搭建日志集中分析平台实践 - <a href="https://wsgzao.github.io/post/elk/">https://wsgzao.github.io/post/elk/</a></p><p>开源日志管理方案 ELK 和 EFK 的区别 - <a href="https://wsgzao.github.io/post/efk/">https://wsgzao.github.io/post/efk/</a></p><p>Grafana Loki 开源日志聚合系统代替 ELK 或 EFK - <a href="https://wsgzao.github.io/post/loki/">https://wsgzao.github.io/post/loki/</a></p><h2 id="mtail-简介"><a href="#mtail-简介" class="headerlink" title="mtail 简介"></a>mtail 简介</h2><p>mtail - extract whitebox monitoring data from application logs for collection into a timeseries database</p><p><code>mtail</code> is a tool for extracting metrics from application logs to be exported into a timeseries database or timeseries calculator for alerting and dashboarding.</p><p>It fills a monitoring niche by being the glue between applications that do not export their own internal state (other than via logs) and existing monitoring systems, such that system operators do not need to patch those applications to instrument them or writing custom extraction code for every such application.</p><p>The extraction is controlled by <a href="https://github.com/google/mtail/blob/main/docs/Programming-Guide.md" target="_blank" rel="noopener">mtail programs</a> which define patterns and actions:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># simple line counter</span><br><span class="line">counter lines_total</span><br><span class="line">/$/ &#123;</span><br><span class="line">  lines_total++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Metrics are exported for scraping by a collector as JSON or Prometheus format over HTTP, or can be periodically sent to a collectd, StatsD, or Graphite collector socket.</p><p>mtail 是用于从应用程序日志中提取指标以导出到时间序列数据库或时间序列计算器以进行警报和仪表板显示的工具。简单来说，就是实时读取应用程序的日志，并且通过自己编写的脚本实时分析，最终生成时间序列指标的工具。</p><p><a href="https://github.com/google/mtail" target="_blank" rel="noopener">https://github.com/google/mtail</a></p><h2 id="mtail-安装"><a href="#mtail-安装" class="headerlink" title="mtail 安装"></a>mtail 安装</h2><p>下载地址：<a href="https://github.com/google/mtail/releases" target="_blank" rel="noopener">https://github.com/google/mtail/releases</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># check latest version from github</span><br><span class="line">wget https://github.com/google/mtail/releases/download/v3.0.0-rc47/mtail_3.0.0-rc47_Linux_x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">tar xf mtail_3.0.0-rc47_Linux_x86_64.tar.gz</span><br><span class="line"># can choose to cp mtail to /usr/local/bin</span><br><span class="line"># cp mtail /usr/local/bin</span><br><span class="line"></span><br><span class="line"># 查看 mtail 版本</span><br><span class="line">./mtail --version</span><br><span class="line">mtail version 3.0.0-rc47 git revision 5e0099f843e4e4f2b7189c21019de18eb49181bf go version go1.16.5 go arch amd64 go os linux</span><br><span class="line"></span><br><span class="line"># mtail 后台启动</span><br><span class="line">nohup mtail -port 3903 -logtostderr -progs test.mtail -logs test.log &amp;</span><br><span class="line"></span><br><span class="line"># 默认端口是 3903</span><br><span class="line">nohup ./mtail -progs test.mtail -logs test.log &amp;</span><br><span class="line"></span><br><span class="line"># 查看是否启动成功</span><br><span class="line">ps -ef | grep mtail</span><br></pre></td></tr></table></figure><p>参数详解：控制台运行 <code>mtail -h</code></p><p>下面列举几个简单的参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">参数 　　　　　　描述</span><br><span class="line">-address 　　　　绑定 HTTP 监听器的主机或 IP 地址</span><br><span class="line">-alsologtostderr 　　记录标准错误和文件</span><br><span class="line">-emit_metric_timestamp 　　发出 metric 的记录时间戳。如果禁用（默认设置），则不会向收集器发送显式时间戳。</span><br><span class="line">-expired_metrics_gc_interval 　　metric 的垃圾收集器运行间隔（默认为 1h0m0s）</span><br><span class="line">-ignore_filename_regex_pattern 　　需要忽略的日志文件名字，支持正则表达式。</span><br><span class="line">-log_dir 　　mtail 程序的日志文件的目录，与 logtostderr 作用类似，如果同时配置了 logtostderr 参数，则 log_dir 参数无效</span><br><span class="line">-logs 　　监控的日志文件列表，可以使用, 分隔多个文件，也可以多次使用 - logs 参数，也可以指定一个文件目录，支持通配符 *，指定文件目录时需要对目录使用单引号。如：</span><br><span class="line">　　　　　　-logs a.log,b.log</span><br><span class="line">　　　　　　-logs a.log -logs b.log</span><br><span class="line">　　　　　　-logs ‘/export/logs/*.log’</span><br><span class="line">-logtostderr 　　直接输出标准错误信息，编译问题也直接输出</span><br><span class="line">-override_timezone 　　设置时区，如果使用此参数，将在时间戳转换中使用指定的时区来替代 UTC</span><br><span class="line">-port 　　监听的 http 端口，默认 3903</span><br><span class="line">-progs 　　mtail 脚本程序所在路径</span><br><span class="line">-trace_sample_period 　　用于设置跟踪的采样频率和发送到收集器的频率。将其设置为 100，则 100 条收集一条追踪。</span><br><span class="line">-v 　　v 日志的日志级别，该设置可能被 vmodule 标志给覆盖. 默认为 0.</span><br><span class="line">-version 　　打印 mtail 版本</span><br></pre></td></tr></table></figure></p><p>程序启动后默认监听 3903 端口，可以通过 <a href="http://ip:3903" target="_blank" rel="noopener">http://ip:3903</a> 访问，metrics 可以通过 <a href="http://ip:3903/metrics" target="_blank" rel="noopener">http://ip:3903/metrics</a> 访问</p><h2 id="mtail-参数详解"><a href="#mtail-参数详解" class="headerlink" title="mtail 参数详解"></a>mtail 参数详解</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">./mtail -h</span><br><span class="line"></span><br><span class="line">mtail version 3.0.0-rc47 git revision 5e0099f843e4e4f2b7189c21019de18eb49181bf go version go1.16.5 go arch amd64 go os linux</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  -address string</span><br><span class="line">        Host or IP address on which to bind HTTP listener</span><br><span class="line">  -alsologtostderr</span><br><span class="line">        log to standard error as well as files</span><br><span class="line">  -block_profile_rate int</span><br><span class="line">        Nanoseconds of block time before goroutine blocking events reported. 0 turns off.  See https://golang.org/pkg/runtime/#SetBlockProfileRate</span><br><span class="line">  -collectd_prefix string</span><br><span class="line">        Prefix to use for collectd metrics.</span><br><span class="line">  -collectd_socketpath string</span><br><span class="line">        Path to collectd unixsock to write metrics to.</span><br><span class="line">  -compile_only</span><br><span class="line">        Compile programs only, do not load the virtual machine.</span><br><span class="line">  -disable_fsnotify</span><br><span class="line">        DEPRECATED: this flag is no longer in use. (default true)</span><br><span class="line">  -dump_ast</span><br><span class="line">        Dump AST of programs after parse (to INFO log).</span><br><span class="line">  -dump_ast_types</span><br><span class="line">        Dump AST of programs with type annotation after typecheck (to INFO log).</span><br><span class="line">  -dump_bytecode</span><br><span class="line">        Dump bytecode of programs (to INFO log).</span><br><span class="line">  -emit_metric_timestamp</span><br><span class="line">        Emit the recorded timestamp of a metric.  If disabled (the default) no explicit timestamp is sent to a collector.</span><br><span class="line">  -emit_prog_label</span><br><span class="line">        Emit the &apos;prog&apos; label in variable exports. (default true)</span><br><span class="line">  -expired_metrics_gc_interval duration</span><br><span class="line">        interval between expired metric garbage collection runs (default 1h0m0s)</span><br><span class="line">  -graphite_host_port string</span><br><span class="line">        Host:port to graphite carbon server to write metrics to.</span><br><span class="line">  -graphite_prefix string</span><br><span class="line">        Prefix to use for graphite metrics.</span><br><span class="line">  -ignore_filename_regex_pattern string</span><br><span class="line">    </span><br><span class="line">  -jaeger_endpoint string</span><br><span class="line">        If set, collector endpoint URL of jaeger thrift service</span><br><span class="line">  -log_backtrace_at value</span><br><span class="line">        when logging hits line file:N, emit a stack trace</span><br><span class="line">  -log_dir string</span><br><span class="line">        If non-empty, write log files in this directory</span><br><span class="line">  -logs value</span><br><span class="line">        List of log files to monitor, separated by commas.  This flag may be specified multiple times.</span><br><span class="line">  -logtostderr</span><br><span class="line">        log to standard error instead of files</span><br><span class="line">  -max_recursion_depth int</span><br><span class="line">        The maximum length a mtail statement can be, as measured by parsed tokens. Excessively long mtail expressions are likely to cause compilation and runtime performance problems. (default 100)</span><br><span class="line">  -max_regexp_length int</span><br><span class="line">        The maximum length a mtail regexp expression can have. Excessively long patterns are likely to cause compilation and runtime performance problems. (default 1024)</span><br><span class="line">  -metric_push_interval duration</span><br><span class="line">        interval between metric pushes to passive collectors (default 1m0s)</span><br><span class="line">  -metric_push_interval_seconds int</span><br><span class="line">        DEPRECATED: use --metric_push_interval instead</span><br><span class="line">  -metric_push_write_deadline duration</span><br><span class="line">        Time to wait for a push to succeed before exiting with an error. (default 10s)</span><br><span class="line">  -mtailDebug int</span><br><span class="line">        Set parser debug level.</span><br><span class="line">  -mutex_profile_fraction int</span><br><span class="line">        Fraction of mutex contention events reported.  0 turns off.  See http://golang.org/pkg/runtime/#SetMutexProfileFraction</span><br><span class="line">  -one_shot</span><br><span class="line">        Compile the programs, then read the contents of the provided logs from start until EOF, print the values of the metrics store and exit. This is a debugging flag only, not for production use.</span><br><span class="line">  -override_timezone string</span><br><span class="line">        If set, use the provided timezone in timestamp conversion, instead of UTC.</span><br><span class="line">  -poll_interval duration</span><br><span class="line">        Set the interval to poll all log files for data; must be positive, or zero to disable polling.  With polling mode, only the files found at mtail startup will be polled. (default 250ms)</span><br><span class="line">  -port string</span><br><span class="line">        HTTP port to listen on. (default &quot;3903&quot;)</span><br><span class="line">  -progs string</span><br><span class="line">        Name of the directory containing mtail programs</span><br><span class="line">  -stale_log_gc_interval duration</span><br><span class="line">        interval between stale log garbage collection runs (default 1h0m0s)</span><br><span class="line">  -statsd_hostport string</span><br><span class="line">        Host:port to statsd server to write metrics to.</span><br><span class="line">  -statsd_prefix string</span><br><span class="line">        Prefix to use for statsd metrics.</span><br><span class="line">  -stderrthreshold value</span><br><span class="line">        logs at or above this threshold go to stderr</span><br><span class="line">  -syslog_use_current_year</span><br><span class="line">        Patch yearless timestamps with the present year. (default true)</span><br><span class="line">  -trace_sample_period int</span><br><span class="line">        Sample period for traces.  If non-zero, every nth trace will be sampled.</span><br><span class="line">  -unix_socket string</span><br><span class="line">        UNIX Socket to listen on</span><br><span class="line">  -v value</span><br><span class="line">        log level for V logs</span><br><span class="line">  -version</span><br><span class="line">        Print mtail version information.</span><br><span class="line">  -vm_logs_runtime_errors</span><br><span class="line">        Enables logging of runtime errors to the standard log.  Set to false to only have the errors printed to the HTTP console. (default true)</span><br><span class="line">  -vmodule value</span><br><span class="line">        comma-separated list of pattern=N settings for file-filtered logging</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>-address</td><td>绑定 HTTP 监听器的主机或 IP 地址</td></tr><tr><td>-alsologtostderr</td><td>记录标准错误和文件</td></tr><tr><td>-block_profile_rate</td><td>报告 goroutine 阻塞事件之前的纳秒时间</td></tr><tr><td>-collectd_prefix</td><td>发送给 collectd 的指标的 metrics 前缀</td></tr><tr><td>-collectd_socketpath</td><td>collectd unixsock 路径，用于向其写入 metrics</td></tr><tr><td>-compile_only</td><td>仅尝试编译 mtail 脚本程序，不执行，用于测试脚本</td></tr><tr><td>-disable_fsnotify</td><td>是否禁用文件动态发现机制。为 true 时，不会监听动态加载发现的新文件，只会监听程序启动时的文件。</td></tr><tr><td>-dump_ast</td><td>解析后 dump 程序的 AST（默认到 / tmp/mtail.INFO）</td></tr><tr><td>-dump_ast_types</td><td>在类型检查之后 dump 带有类型注释的程序的 AST（默认到 / tmp/mtail.INFO）</td></tr><tr><td>-dump_bytecode</td><td>dump 程序字节码</td></tr><tr><td>-emit_metric_timestamp</td><td>发出 metric 的记录时间戳。如果禁用（默认设置），则不会向收集器发送显式时间戳。</td></tr><tr><td>-emit_prog_label</td><td>在导出的变量里面展示’prog’对应的标签。默认为 true</td></tr><tr><td>-expired_metrics_gc_interval</td><td>metric 的垃圾收集器运行间隔（默认为 1h0m0s）</td></tr><tr><td>-graphite_host_port</td><td>graphite carbon 服务器地址，格式 Host:port。用于向 graphite carbon 服务器写入 metrics</td></tr><tr><td>-graphite_prefix</td><td>发送给 graphite 指标的 metrics 前缀</td></tr><tr><td>-ignore_filename_regex_pattern</td><td>需要忽略的日志文件名字，支持正则表达式。使用场景：当 - logs 参数指定的为一个目录时，可以使用 ignore_filename_regex_pattern 参数来忽略一部分文件</td></tr><tr><td>-jaeger_endpoint</td><td>如果设为 true，可以将跟踪导出到 Jaeger 跟踪收集器。使用–jaeger_endpoint 标志指定 Jaeger 端点 URL</td></tr><tr><td>-log_backtrace_at</td><td>当日志记录命中设置的行 N 时，发出堆栈跟踪</td></tr><tr><td>-log_dir</td><td>mtail 程序的日志文件的目录，与 logtostderr 作用类似，如果同时配置了 logtostderr 参数，则 log_dir 参数无效</td></tr><tr><td>-logs</td><td>监控的日志文件列表，可以使用, 分隔多个文件，也可以多次使用 - logs 参数，也可以指定一个文件目录，支持通配符 *，指定文件目录时需要对目录使用单引号。</td></tr><tr><td>-logtostderr</td><td>直接输出标准错误信息，编译问题也直接输出</td></tr><tr><td>-metric_push_interval_seconds</td><td>metric 推送时间间隔，单位：秒，默认 60 秒</td></tr><tr><td>-metric_push_write_deadline</td><td>在出现错误退出之前等待推送成功的时间。（默认 10s）</td></tr><tr><td>-mtailDebug</td><td>设置解析器 debug 级别</td></tr><tr><td>-mutex_profile_fraction</td><td>报告的互斥锁争用事件的分数。0 关闭。（此参数为直译，不太理解啥意思）</td></tr><tr><td>-one_shot</td><td>此参数将编译并运行 mtail 程序，然后 <strong> 从指定的文件开头 </strong> 开始读取日志（从头开始读取日志，不是实时 tail），然后将收集的所有 metrics 打印到日志中。此参数用于验证 mtail 程序是否有预期输出，不用于生产环境。</td></tr><tr><td>-override_timezone</td><td>设置时区，如果使用此参数，将在时间戳转换中使用指定的时区来替代 UTC</td></tr><tr><td>-poll_interval</td><td>设置轮询所有日志文件以获取数据的间隔；必须为正，如果为零将禁用轮询。使用轮询模式，将仅轮询在 mtail 启动时找到的文件</td></tr><tr><td>-port</td><td>监听的 http 端口，默认 3903</td></tr><tr><td>-progs</td><td>mtail 脚本程序所在路径</td></tr><tr><td>-stale_log_gc_interval</td><td>stale 的垃圾收集器运行间隔（默认为 1h0m0s）</td></tr><tr><td>-statsd_hostport</td><td>statsd 地址，格式 Host:port。用于向 statsd 写入 metrics</td></tr><tr><td>-statsd_prefix</td><td>发送给 statsd 指标的 metrics 前缀</td></tr><tr><td>-stderrthreshold</td><td>严重性级别达到阈值以上的日志信息除了写入日志文件以外，还要输出到 stderr。各严重性级别对应的数值：INFO—0，WARNING—1，ERROR—2，FATAL—3，默认值为 2.</td></tr><tr><td>-syslog_use_current_year</td><td>如果时间戳没有年份，则用当前年替代。（默认为 true）</td></tr><tr><td>-trace_sample_period</td><td>用于设置跟踪的采样频率和发送到收集器的频率。将其设置为 100，则 100 条收集一条追踪。</td></tr><tr><td>-v</td><td>v 日志的日志级别，该设置可能被 vmodule 标志给覆盖. 默认为 0.</td></tr><tr><td>-version</td><td>打印 mtail 版本</td></tr><tr><td>-vmodule</td><td>按文件或模块来设置日志级别，如：-vmodule=mapreduce=2,file=1,gfs*=3</td></tr></tbody></table><h2 id="mtail-脚本语法"><a href="#mtail-脚本语法" class="headerlink" title="mtail 脚本语法"></a>mtail 脚本语法</h2><p>Read the <a href="https://github.com/google/mtail/blob/main/docs/Programming-Guide.md" target="_blank" rel="noopener">programming guide</a> if you want to learn how to write mtail programs.</p><p><a href="https://github.com/google/mtail/blob/main/docs/Programming-Guide.md" target="_blank" rel="noopener">https://github.com/google/mtail/blob/main/docs/Programming-Guide.md</a></p><h3 id="mtail-脚本标准格式"><a href="#mtail-脚本标准格式" class="headerlink" title="mtail 脚本标准格式"></a>mtail 脚本标准格式</h3><p>标准格式为：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">COND &#123;</span><br><span class="line">  ACTION</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中 <code>COND</code> 是一个条件表达式。它可以是正则表达式，也可以 boolean 类型的条件语句。如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/foo/ &#123;</span><br><span class="line">  ACTION1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">variable &gt; 0 &#123;</span><br><span class="line">  ACTION2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/foo/ &amp;&amp; variable &gt; 0 &#123;</span><br><span class="line">  ACTION3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>COND</code> 表达式可用的运算符如下：</p><ul><li>关系运算符：</li></ul><blockquote><p>&lt; , &lt;= , &gt; , &gt;= , == , != , =~ , !~ , || , &amp;&amp; , !</p></blockquote><ul><li>算术运算符：</li></ul><blockquote><p>| , &amp; , ^ , + , - , * , /, &lt;&lt; , &gt;&gt; , **</p></blockquote><p><strong> 导出的指标变量 </strong> 可用的运算符如下：</p><blockquote><p>\= , += , ++ , –</p></blockquote><p><code>mtail</code> 的目的是从日志中提取信息并将其传递到监控系统。因此，必须导出指标变量并命名，命名可以使用 counter、、gauge 等指标类型，并且命名的变量必须在 <code>COND</code> 脚本之前。<br>如，导出一个 counter 类型的指标 lines_total：统计日志行数，脚本内容如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> simple line counter</span></span><br><span class="line">counter lines_total</span><br><span class="line"><span class="meta">/$</span><span class="bash">/ &#123;</span></span><br><span class="line">  lines_total++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mtail-支持的类型"><a href="#mtail-支持的类型" class="headerlink" title="mtail 支持的类型"></a>mtail 支持的类型</h3><p>mtail 中的 counter、gauge、histogram 三种类型与 prometheus 类型中描述的作用一致。</p><p>counter 类型的数据是单调递增的指标，即只增不减。如，你可以使用 counter 类型的指标来表示服务的请求数、成功任务数、失败的任务数等。</p><p>gauge 类型的数据是指可以任意变化的指标，可增可减。如，可以提取正则匹配到的数据，直接赋值给指标变量返回，或者计算后返回。</p><p>histogram（直方图）将数据分段统计，引用 prometheus 中对 histogram 的描述：</p><p>在大多数情况下人们都倾向于使用某些量化指标的平均值，例如 CPU 的平均使用率、页面的平均响应时间。这种方式的问题很明显，以系统 API 调用的平均响应时间为例：如果大多数 API 请求都维持在 100ms 的响应时间范围内，而个别请求的响应时间需要 5s，那么就会导致某些 WEB 页面的响应时间落到中位数的情况，而这种现象被称为长尾问题。<br>为了区分是平均的慢还是长尾的慢，最简单的方式就是按照请求延迟的范围进行分组。例如，统计延迟在 0~10ms 之间的请求数有多少而 10~20ms 之间的请求数又有多少。通过这种方式可以快速分析系统慢的原因。Histogram 和 Summary 都是为了能够解决这样问题的存在，通过 Histogram 和 Summary 类型的监控指标，我们可以快速了解监控样本的分布情况。<br><strong>Histogram 在一段时间范围内对数据进行采样（通常是请求持续时间或响应大小等），并将其计入可配置的存储桶（bucket）中，后续可通过指定区间筛选样本，也可以统计样本总数 </strong>，最后一般将数据展示为直方图。</p><p>mtail 详解 - <a href="https://blog.csdn.net/bluuusea/article/details/105508897" target="_blank" rel="noopener">https://blog.csdn.net/bluuusea/article/details/105508897</a></p><h2 id="配置-Prometheus-数据源"><a href="#配置-Prometheus-数据源" class="headerlink" title="配置 Prometheus 数据源"></a>配置 Prometheus 数据源</h2><p>重启 Prometheus 后，在 Grafana Dashoard 新增一个新的 Panel，再为其配置已经设置好的 datasource</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim prometheus-config.yml</span><br><span class="line"></span><br><span class="line"># 全局配置</span><br><span class="line">global:</span><br><span class="line">  scrape_interval:     15s</span><br><span class="line">  evaluation_interval: 15s</span><br><span class="line"></span><br><span class="line">scrape_configs:</span><br><span class="line">  # 监控 mtail 日志</span><br><span class="line">  - job_name: &apos;mtail&apos;  </span><br><span class="line">    static_configs:</span><br><span class="line">    - targets: [&apos; 内网 ip:3903&apos;]</span><br></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://github.com/google/mtail" target="_blank" rel="noopener">Google mtail</a></p><p><a href="https://github.com/google/mtail/blob/main/docs/Programming-Guide.md" target="_blank" rel="noopener">mtail Programming Guide</a></p><p><a href="https://blog.csdn.net/bluuusea/article/details/104341054" target="_blank" rel="noopener">prometheus+grafana+mtail+node_exporter 实现机器负载及业务监控</a></p><p><a href="https://blog.csdn.net/bluuusea/article/details/105508897" target="_blank" rel="noopener">mtail 详解</a></p>]]></content>
    
    <summary type="html">
    
      Google mtail配合Prometheus和Grafana实现自定义日志监控
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>游戏行业常用术语解释</title>
    <link href="https://wsgzao.github.io/post/game/"/>
    <id>https://wsgzao.github.io/post/game/</id>
    <published>2021-07-30T06:59:49.000Z</published>
    <updated>2021-07-30T03:33:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文汇总了网络上能找到的游戏相关的常见词汇的解释</p><p>原始来源为以下链接:</p><ul><li><a href="https://www.taptap.com/categories" target="_blank" rel="noopener">TapTap 发现页</a></li><li><a href="https://www.jianshu.com/p/65eea701914b" target="_blank" rel="noopener">游戏行业常见术语</a></li><li><a href="https://www.zhihu.com/question/57600835" target="_blank" rel="noopener">目前中国游戏公司各个职位的薪水情况?</a></li><li><a href="https://zhuanlan.zhihu.com/p/33303706" target="_blank" rel="noopener">游戏行业职位(新人入行导航)</a></li></ul><h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2021 年 07 月 30 日 - 初稿</p><p>阅读原文 - <a href="https://wsgzao.github.io/post/game/">https://wsgzao.github.io/post/game/</a></p><hr><h2 id="游戏开发运营阶段"><a href="#游戏开发运营阶段" class="headerlink" title="游戏开发运营阶段"></a>游戏开发运营阶段</h2><p>【Close Bata Test(CBT)】    封闭试对外测试，主要测试内容层</p><p>【Open Bata Test (OB)】公开测试，商业化模拟试运营</p><p>【SL】 Soft Lauch   在有限或不做推广的情况下新产品上线</p><p>【GL】 Global Lauch   全球不删档产品上线</p><p>【UE】  user experience  用户体验</p><p>【QC】  quality control   品质控制</p><p>【QA】  Quality Assessment    产品质量测试</p><p>【PvE】Player VS Environment   玩家与电脑控制的角色战斗</p><p>【PVP】 Player VS Player   玩家对玩家的战斗</p><h2 id="游戏评估数据指标"><a href="#游戏评估数据指标" class="headerlink" title="游戏评估数据指标"></a>游戏评估数据指标</h2><p>【活跃定义】</p><p>按照登录账号计算（UV）</p><p>按照天数计算</p><p>活跃天指用户当天登陆游戏一定时间、认定用户当天为活跃、活跃天数加 1 天</p><p>当天 0：00-23：59 登陆游戏时间 2 小时以上用户当天为活跃天、活跃天数累积 1 天</p><p>当天 0：00-23：59 登陆游戏时间 0.5 小时至 2 小时、活跃天数累积 0.5 天</p><p>当天 0：00-23：59 登陆游戏时间 0.5 小时以下、不为其累积活跃天数</p><p>【用户流失率】游戏当前活跃用户规模 / 历史注册总量</p><p>【活跃率】登陆人次 / 平均在线人数</p><p>【AU】 active user  活跃用户</p><p>【UV】 Unique Visitor   当日登录账号 </p><p>【ACU】 Average concurrent users  平均同时在线用户 = 24 小时每小时同时在线总和 / 24 小时</p><p>【PCU】 Peak concurrent users  最高同时在线人数 = 24 小时内同时在线最高达到人数</p><p>【DAU】 Daily Active User  日活跃用户量</p><p>【MAU】monthly active users  月活跃用户量</p><p>【AccRu】累积注册用户 accumulated registered users</p><p>【AccAu】累积活跃用户 accumulated active users</p><p>【付费率】</p><p>注册用户付费率 = 总注册 / APA</p><p>平均在线付费率 = ACU / APA  平均同时在线用户 / 活跃付费账号</p><p>活跃用户付费率 = UV / APA    当日登录账号 / 活跃付费账号</p><p>【PU】付费用户 paying user</p><p>【ARPU】用户每月平均消费 Average Revenue Per Use</p><p>1、每月总收入 / 月付费用户数(月 ARPU)</p><p>2、每日总收入 / 日付费用户数等(日 ARPU)</p><p>【APA】活跃付费账号 Active Payment Account</p><p>【TS】用户平均在线时长 Time Spending</p><p>【AccPu】累积付费用户 accumulated paying users</p><p>【PRAPA】指从推广用户开始到用户最终付费的整个过程 Promotion-Register-Active-Pay-Average revenue per User</p><p>【HCI】 人机交互 human-computer interaction(相互作用) </p><p>【PR】公关、市场营销 Public relation</p><p>【CPA】按注册成功支付佣金（按行为付费 - 按注册量） Cost Per Activity</p><p>【CPC】每次点击费用根据广告被点击次数收费、关键词广告采用 CPC 模式  Cost Per Click</p><p>【CPM】每千次印象费用广告条每显示 1000 次印象费用、常用在网络广告定价 （按展示付费 - 弹出窗口） Cost Per Mille</p><p>【CPS】营销效果指销售额 （按销售付费 - 按销售分成） Cost Per Sales</p><p>【PPC】根据点击广告或电子邮件信息用户数量付费模式 pay per click</p><p>【PPS】根据网络广告产生直接销售数量付费定价模式 Pay-per-Sale</p><p>【SEO】搜索引擎优化 Search Engine Optimization [ˈendʒɪn] 引擎最优化</p><p>【SEM】搜索引擎营销 Search Engine Marketing 利用搜索引擎进行营销，追求最高的性价比，以最小的投入，获得最大的来自搜索引 擎的访问量。</p><p>【KPI】关键绩效指标 Key Performance Indicators 用于衡量工作人员工作绩效表现的量化指标，80% 工作任务是由 20% 关键行为完成的。 抓住 20% 的关键行为，进行分析和衡量就能抓住业绩评价的重心。</p><p>【SWOT】一种分析方法。SWOT 分别代表优势，劣势，机会，威胁用来确定企业本身的竞争优势，竞争劣势，机会和威胁，从而将公司战略与内部资源、 外部环境有机结合。清楚的确定公司资源优势和缺陷，了解公司所面临机会和挑战。</p><h2 id="游戏类型"><a href="#游戏类型" class="headerlink" title="游戏类型"></a>游戏类型</h2><ul><li>【RPG】角色扮演游戏 Role-playing game</li><li>【ACT】动作游戏 Action</li><li>【ARPG】 动作角色扮演 Action Role-playing game</li><li>【AVG】冒险游戏 Adventure Game</li><li>【SLG】策略游戏 stimulation game</li><li>【RTS】即时战略游戏 Real-Time Strategy Game</li><li>【MMO】大型多人在线游戏 Massive Multiplayer Online</li><li>【MMORPG】大型多人在线角色扮演游戏 Massive Multiplayer Online Role-Playing Game</li><li>【MOBA】 多人在线战术竞技 Multiplayer Oneline Battle Arena</li><li>【FPS】第一人称射击 First-person shooting game)</li><li>【TBS】回合制策略 Turn-Based Strategy Game</li><li>【FTG】格斗游戏 Fighting Game</li><li>【STG】射击类游戏 Shooting Game</li><li>【PZL】益智类游戏 Puzzle Game</li><li>【RCG】竞速游戏 Racing Game</li><li>【SPT】体育类游戏 Sports games</li><li>【TCG】集换式卡牌游戏 Trading Card Game</li><li>【CAG】卡牌游戏 Card Game</li><li>【TAB】桌面游戏 Table Game</li><li>【MSC】音乐游戏 Music Game</li><li>【LVG】恋爱游戏 Love Game</li><li>【WAG】手机游戏 Wap Game</li><li>【MUD】泥巴游戏 Multiple User Domain 依靠文字进行游戏的游戏</li><li>【Survival】 生存类游戏</li><li>【SandBox】 沙盒类游戏 能够改变或影响甚至创造游戏内的世界</li><li>【idle game】 放置类(挂机类)</li><li>【Roguelike】 Roguelike 是 RPG（角色扮演游戏）的一个分支，也是最重要的一个分支</li><li>【Education Simulation】 养成游戏</li><li>【像素】 像素是一种独特的怀旧画风</li><li>【Open World】 开放世界游戏 玩家可自由地在一个虚拟世界中漫游，并可自由选择完成游戏任务的时间点和方式 s</li><li>【战棋】 战棋游戏是回合制的、角色扮演的、在地图上按格移动人物进行作战的游戏</li><li>【消除】 通过一定的方式消除画面中的方块类的游戏</li></ul><h2 id="游戏内名词"><a href="#游戏内名词" class="headerlink" title="游戏内名词"></a>游戏内名词</h2><ol><li>【PvE】玩家与电脑控制的角色战斗 Player VS Environment</li><li>【PVP】玩家对玩家的战斗 Player VS Player</li><li>【HOT】指持续性治疗效果 Heal Over Time</li><li>【AOE】区域作用魔法，即所谓群攻 Area of effect</li><li>【PK】恶意攻击 Player Killing</li><li>【Player】操作游戏中角色的人</li><li>【SOLO】单独杀怪、做任务等</li><li>【Boss】游戏中终极怪物</li><li>【CD】技能冷却时间</li><li>【AFK】暂时离开(键盘) Away from keyboard</li><li>【Sever】服务器端</li><li>【VS】单挑</li><li>【GM】指游戏管理员 Game Master</li><li>【Login】表示登入账号的意思</li><li>【UC】地下城</li><li>【Update】泛指游戏内的更新</li><li>【Bug】游戏中漏洞</li><li>【Small Pets】宠物</li><li>【LOS】视线 Line-of-sigh</li><li>【DMG】指伤害 damage</li><li>【DD】直接伤害，非持续性伤害作用 Direct Damage</li><li>【DOT】在一段时间内持续对目标造成伤害，持续伤害 Damage Over Time</li><li>【DPS】每秒伤害 Damage per second</li><li>【HP】生命值 Health point</li><li>【MP】魔法值 Magic point</li><li>【Buff】主要指辅助类角色为别人施加的有益状态，通俗的说法就是“加状态”</li></ol><h2 id="游戏团队部门与职位"><a href="#游戏团队部门与职位" class="headerlink" title="游戏团队部门与职位"></a>游戏团队部门与职位</h2><h3 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h3><ul><li>【客户端主程】: 搭建主要框架、修改底层架构、以及其他日常开发</li><li>【客户端程序】: 美术资源导入，界面拼接，美术资源配置，脚本的编写，打包</li><li>【服务端主程】: 搭建框架、修改底层架构、优化性能和稳定性</li><li>【服务端程序】: 实现业务逻辑，为前端提供接口</li></ul><h3 id="美术"><a href="#美术" class="headerlink" title="美术"></a>美术</h3><ul><li>【主美】: 负责定游戏美术风格</li><li>【游戏原画】: 根据策划给出的方案，来进行设计，绘制设定图。根据画师的倾向，大体可以分为 UI、角色和场景。根据工作要求，大致分为展示和设定；展示类面向玩家，宣传用，怎么漂亮怎么华丽怎么来。设定面向内部，三视草图，如果时间允许，还会给上个色。</li><li>【模型】: 找原画要三视图，进行 3D 的制作；模型师根据倾向分为场景和角色，场景只需要对照原画进行还原；而角色需要制作动画，对布线有一定要求。</li><li>【动作】: 找策划拿需求文案，找模型拿模型，制作动画；根据项目要求分为 2D 和 3D，2D 需要有一定的绘画能力。</li><li>【特效】: 由于是在引擎里直接制作，所以要对引擎相当的熟悉。根据项目的要求，还需要其他的技能来制作素材，需要用到工具比较多，Max，Ae，Ps 等等。</li><li>【UI】: 图标和界面素材的绘制；但是由于素材需求量的问题，这个职位是永远都有活干的。</li><li>【地编】: 找场景原画要设计图，找模型要建筑和树木。开始地形的制作，在引擎，Max,Maya 里都可, 流程和软件的区别而已。而多是由模型转职而来，有点像脚本策划，其他的模型手头有事时，那些缺失的模型就自己做。</li></ul><h3 id="策划"><a href="#策划" class="headerlink" title="策划"></a>策划</h3><ul><li>【系统策划】: 游戏的玩法定制者，直接与程序打交道，懂程序的话对这个职位加成非常高。玩法设计出来后，要对其进行数据方面的解析，告诉程序数据结构的变动等等。强悍者可以对数据的储存进行推演，以精简结构，和减少运算量，达到优化的目的。</li><li>【数值策划】: 上到经济体系，下到怪物的刷新频率和数量，都在他的计算之中。各职业间的 DPS 平衡，升级的速度，材料的产出与消耗，就不一一举例了。</li><li>【关卡策划】: 和地编与剧情合作，在策划部里，理论上是属于指挥者的位置，地图，任务，怪物，宝箱，彩蛋，剧情。都属于关卡的范围内。设计好后，将对应的工作丢给对应的人。后期查看各方的进度，在各个阶段进行测试。</li><li>【文案策划】: 负责将热门网络词汇以及热门 IP 整合写一些自己都觉得制杖的剧情强行推动游戏走向，后期负责玩游戏装忙</li><li>【剧情策划】: 大多数的时候就是写些无营养的任务台词和 NPC 对话；剧情是关卡的范围，关卡会写个大纲，然后让你在这个大纲的范围内编故事；如果你家关卡不放权，你连故事都没得编。能做的就是等出剧情后，来给这些对话和故事进行润色。</li><li>【美术策划】: 对关卡提出的方案进行美术向的解析，写成文案，和美术做交接；对美术资源进行管理，对其编号。UI 的排列草图等等。</li><li>【脚本策划】: 大佬。比系统更加强悍的程序能力，不止懂，还会写；程序提供大部分脚本，但因为设计的变动和程序的遗漏，需要新的脚本时，缺失就由这个职位补上去，属于帮人填坑的职位。</li><li>【执行】: 菜鸟，啥都不会；执行是游戏公司里 “所有” 职位中入门要求最低的；打个比喻，执行 = 初心者，而上面的那些策划分支就是它的进阶职业。</li></ul><h2 id="手游行业常见名词解释"><a href="#手游行业常见名词解释" class="headerlink" title="手游行业常见名词解释"></a>手游行业常见名词解释</h2><ul><li>手游开发商——也叫 CP，即 ContentProvider 内容提供商的英文首字母缩写，顾名思义，就是指制作手游产品的公司或者团队。</li><li>手游发行商——即代理或者独家代理手游 CP 开发出来的手游产品，在部分渠道或者全渠道发行 CP 手游产品的公司。</li><li>手游渠道——拥有手机端手游和 APP 用户，能够进行手游和 APP 流量分发的公司，即可成为渠道。所有可以获取手游用户的平台都可以称为渠道。如 91 手机助手、百度手机助手等</li><li>APP——Application 的简写，即应用，仅指手机游戏或者应用。游戏也是 APP，但通常都分开来说。</li><li>SDK——SoftwareDevelopmentKit，即软件开发工具包，实际工作中不用这么麻烦和官方的去理解，只要记住，SDK 是手游渠道提供的、集成了用户登录、充值通道、社区功能、社交分享功能、数据后台统计功能的一个功能模块，这个功能模块手游 CP 必须要植入到自己的游戏里，接入 SDK 后 CP 和渠道都要对 SDK 包进行测试，测试通过才能上线。</li><li>包——iOS 的 APP 文件格式为 ipa，因为 iPhone 手机分为越狱和非越狱，越狱的手机用户下载的 APP 文件就是 ipa 包。安卓系统的文件格式是 APK，所以提及安卓游戏或者 APP 的包，指的就是 APK 包。</li><li>刷量——指 CPA 渠道制造假量，骗取 CP 的推广费用。</li><li>扣量——与 CPA 渠道刷量针锋相对，指的是 CP 对于 CPA 渠道的量进行扣除，以此来减少自己的广告费用。刷量和扣量都是行业内公开的秘密。</li><li>官服——指游戏玩家在游戏开发上或代理商提供的服务器商登录、存档、充值</li><li>渠道服——指游戏玩家在游戏分发商提供的服务器商登录、存档、充值，渠道会对游戏玩家的充值进行抽成</li></ul><h2 id="手游推广方式"><a href="#手游推广方式" class="headerlink" title="手游推广方式"></a>手游推广方式</h2><ol><li>联运——即手游 CP 和手游渠道联合运营一款游戏，手游 CP 提供产品、运营和客服，手游渠道提供用户，手游 CP 需要接入渠道方的 SDK，才能上线运营，双方按照分成比例进行分成。因为接入了渠道的 SDK，所以数据后台用的是渠道方的，结算时是渠道分钱给 CP。</li><li>CPS——按照收益进行分成，CPS 和联运都是按照收益进行分成，但区别在于，CPS 不需要接入渠道的 SDK，用的是 CP 方的数据统计后台，结算时是 CP 分钱给渠道，而联运则是渠道分钱给 CP。CPS 的优势是不需要接入 SDK 可以上线，可以快速合作。联运的优势则是深度合作，联运的渠道可以给一些深度的推广资源。</li><li>CPA——每行动成本，CostPerAction)，同样是广告术语，在手游行业里，CPA 的意思有两种，第一种：CPA 的 A 是指注册，即每有一个用户注册了游戏账号后，CP 付给渠道一个费用。第二种：CPA 的 A 是指联网激活，即每有一个用户联网登录了游戏，CP 付给渠道一个费用。</li><li>CPD——即按照下载进行付费的方式，CP 的手游每有一次下载，CP 就要向渠道支付一次费用。</li><li>CPT——即时长广告，也称硬广，一般是从 24 时到明日 24 时计算的付费广告推广形式，CPT 广告价格水涨船高，一天的价格在 5000-12000 元不等，属于成本最高的推广方式。一般都是有钱的大 CP 或者回本情况比较好的游戏才会这样做。</li><li>CPL——即按照游戏用户在游戏里的等级付费，比如用户 5 级的时候付 1.5 元，10 级的时候付 2 元，30 级的时候付 2.5 元。这种推广方式不太主流。</li><li>区别和记住 CPS、CPA、CPD、CPT、CPL 的方法：</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">　　CPS 的 S 是 Sales 销售的意思，即按照销售结果进行分成;</span><br><span class="line">　　CPA 的 A 是 Action 动作的意思，即按照用户激活动作结果付费;</span><br><span class="line">　　CPD 的 D 是 Download 下载的意思，即按照用户下载的结果付费;</span><br><span class="line">　　CPL 的 L 是 Level 等级的意思，即按照用户游戏内等级高低付费的广告形式。</span><br></pre></td></tr></table></figure><ol><li>以上所有和渠道的合作形式中，联运和 CPS 属于主流，CPA 是次主流，是阶段性的推广方式，其他的几种形式近期不会接触到。</li><li>一般情况下，对于非联运渠道来说，他们对于收益不错的产品会选择 CPS 合作，因为这样渠道的收益更高，对于收益不高的产品，渠道会选择 CPA 合作，这样会有一个基本的收益保证。</li></ol><h2 id="手游渠道的类型"><a href="#手游渠道的类型" class="headerlink" title="手游渠道的类型"></a>手游渠道的类型</h2><h3 id="iOS-渠道"><a href="#iOS-渠道" class="headerlink" title="iOS 渠道"></a>iOS 渠道</h3><ol><li>苹果官方 AppStore;</li><li>各种限时免费推荐应用：如限时免费大全等;</li><li>各种 iOS 手机助手：如 91 手机助手、百度手机助手等各种苹果 APP 推荐应用;</li><li>各种越狱渠道：如威锋网等;</li><li>iMessage 推送：即推送到 iPhone 用户的 iMessage 信息中，包含了跳转到 AppStore 的产品链接，这种方式就是 iMessage 推送。</li><li>刷榜：iOS 生态里独有的推广方式，因苹果 AppStore 会有免费榜，付费榜，畅销榜，所以各 CP 就会找专业刷榜公司做刷榜，通过大量僵尸 AppStore 账户下载某款手游，获取较高的下载和付费，会冲到榜单较靠前的位置;</li><li>冲榜：刷榜是靠僵尸账户下载游戏获得榜单位置，而冲榜则是通过付费广告推广的综合方式获得真实的下载来冲击榜单，其成本要比刷榜高。</li></ol><h3 id="安卓渠道"><a href="#安卓渠道" class="headerlink" title="安卓渠道"></a>安卓渠道</h3><ol><li>GooglePlay 谷歌官方电子市场：因谷歌在国内受到限制，所以用户很少，但在国外 GooglePlay 是主流的渠道;</li><li>第三方电子市场：即除了谷歌官方和手机厂商的电子市场外，独立的第三方电子市场，如：91 手机助手，百度手机助手，安卓市场等;</li><li>手机厂商电子市场：小米商店，华为智汇云，OPPOFindMe，联想乐商店，三星 SamsungApps 等等;</li><li>专业游戏中心：如 TapTap、好游快爆、当乐游戏中心，乐逗游戏中心等;</li><li>预装 / 刷机渠道：预装指在手机出厂前，把手游或者应用预装在手机中，但手机出厂后，还要经过各种销售渠道的刷机，所以预装的激活率很低，预装在手机厂商的手游产品，很大一部分都被零售渠道刷下去了。预装和刷机的合作方式主要是 CPA，也有少部分是 CPS;</li><li>运营商电子市场：运营商的电子市场接入比较麻烦，流程很多，一般情况下，CP 有一部分选择自己接入，也有一部分 CP 选择找第三方公司接入，给第三方公司分成;</li><li>运营商游戏基地：移动的游戏基地，接入属于所有渠道里难度和时间周期最大的，大多数情况下小 CP 都会选择找和移动游戏基地有关联关系的第三方公司接入，给第三方公司进行分成。</li></ol><h3 id="iOS-和安卓通用的渠道类型"><a href="#iOS-和安卓通用的渠道类型" class="headerlink" title="iOS 和安卓通用的渠道类型"></a>iOS 和安卓通用的渠道类型</h3><ol><li>积分墙——当用户需要付费下载某款游戏或者应用，或者付费获取某款游戏里的道具、某款应用里付费试用的高阶功能时，他不需要付费，只需要按照提示去下载指定推荐的游戏或者应用，即可获得相应积分，有了积分之后，就可以免费下载付费的游戏或应用，免费获取游戏道具或者应用内高阶功能。一般不推荐做积分墙。国内积分墙做的比较大的：有米、趣米。</li><li>Push——即推送到用户手机通知栏的信息，包含文字和图片，点击后会跳转到 AppStore 或者直接下载。</li><li>知名 APP 内广告——以插屏的形式，当用户玩一款游戏，在打开游戏、暂停游戏、游戏通过、退出游戏的几个关键点，会跳出一个页面插屏广告，这种形式就是 APP 内广告。</li><li>网盟——网盟指的是拥有很多渠道资源或者渠道的代理商，从 CP 那里拿包，一般按照 CPA 的合作方式，去渠道那里进行推广。假设渠道的 CPA 价格是 1.5，网盟从 CP 里拿到的包 CPA 价格是 1.8，那么网盟就是赚这 0.3 元的差价。</li><li>广告平台——广告平台就是指移动广告平台。广告平台的主流合作方式有几种：CPA、积分墙另外也有 CPC 和 CPM，少部分也可以做 CPS，但大多是针对能够有不错收入的游戏。</li><li>换量 / 交叉推广——在大部分 APP 和手游里，都会有类似应用推荐这种模块，这个模块的功能就是换量，A 产品在自己的应用推荐里给 B 产品导了 500 用户，那么 B 产品也要给 A 产品导入 500 用户。</li></ol><h2 id="和渠道合作的注意事项"><a href="#和渠道合作的注意事项" class="headerlink" title="和渠道合作的注意事项"></a>和渠道合作的注意事项</h2><ol><li>尽量争取协调内外部所有资源，想办法提升渠道对游戏的评级，以获取更高评级和更好的推广资源。</li><li>在商务谈判的时候要注意是否有隐性的坑，即对我方不利的条款。</li><li>和联运渠道谈合作的几个关键因素：合作方式、分成比例、运营资源支持、开服形式(专服还是混服)、CP 渠道政策(不允许夸渠道抢用户恶意运营，即渠道的包不允许满世界放)、服务器成本、结算方式、客服归属、商务和技术对接流程、善后事宜等。</li></ol><h2 id="手游媒体"><a href="#手游媒体" class="headerlink" title="手游媒体"></a>手游媒体</h2><p>主要可以分为手游用户媒体 (ToC 媒体) 以及手游产业媒体(Tob 媒体):</p><ul><li>手游用户媒体——游戏上线前的曝光度积累，首批种子用户积累，知名度传播; 游戏上线后的新闻发布、游戏活动发布、放号等。经常曝光的游戏会获得渠道的青睐。</li><li>手游产业媒体——很多发行商和渠道的开发者关系部门的员工，即发行商和渠道里对接 CP 的人员，有很大一部分都是通过各种手游产业媒体的微信公众账号发现好的 CP 和游戏，所以，CP 应该重视手游产业媒体，在产业媒体进行经常曝光，可以获得渠道和发行商的关注，对于自己的游戏获得较好的评级，较好的资源支持，都有很大的战略价值。</li></ul>]]></content>
    
    <summary type="html">
    
      游戏行业常用术语解释
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
</feed>
